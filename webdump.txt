=== FULL PROJECT DUMP (Text Files Only) ===

Root: .

[.]
  - dump.js
    <Contents of: dump.js>
const fs = require('fs');
const path = require('path');

const projectRoot = '.';
const outputFile = 'full-project-dump.txt';

// Daftar ekstensi file yang dianggap aman dibaca sebagai teks
const TEXT_EXTENSIONS = new Set([
  '.js', '.mjs', '.cjs', '.ts', '.d.ts', '.json', '.txt', '.md', '.html', '.htm',
  '.css', '.scss', '.sass', '.less', '.xml', '.yaml', '.yml', '.toml',
  '.ini', '.cfg', '.conf', '.env', '.sh', '.bash', '.zsh', '.dockerfile',
  '.gitignore', '.gitattributes', '.editorconfig', '.lock', '.sql',
  '.ejs', '.pug', '.hbs', '.csv', '.log', '.properties', '.bat', '.cmd'
]);

// Fungsi deteksi kasar apakah file berisi teks
function isTextFile(filePath) {
  const ext = path.extname(filePath).toLowerCase();
  if (TEXT_EXTENSIONS.has(ext)) return true;

  // Jika tidak punya ekstensi, coba lihat nama file
  const basename = path.basename(filePath);
  if (['Dockerfile', 'Procfile', 'Makefile', 'README', 'LICENSE', 'CHANGELOG'].includes(basename)) return true;

  // Jika tetap tidak yakin, anggap BUKAN teks (hindari file biner)
  return false;
}

let output = '';

function log(str) {
  output += str + '\n';
}

function dumpDirectory(dirPath, depth = 0) {
  const indent = '  '.repeat(depth);
  const relativeDir = path.relative(projectRoot, dirPath) || '.';
  log(`${indent}[${relativeDir}]`);

  try {
    const items = fs.readdirSync(dirPath);
    items.sort();

    for (const item of items) {
      const fullPath = path.join(dirPath, item);
      const relativePath = path.relative(projectRoot, fullPath);
      let stat;
      try {
        stat = fs.statSync(fullPath);
      } catch (e) {
        log(`${indent}  - [ERROR: Cannot access] ${item}`);
        continue;
      }

      if (stat.isDirectory()) {
        dumpDirectory(fullPath, depth + 1);
      } else {
        log(`${indent}  - ${item}`);
        if (isTextFile(fullPath)) {
          try {
            const content = fs.readFileSync(fullPath, 'utf8');
            log(`    <Contents of: ${relativePath}>`);
            output += content + '\n';
            log(`    </End of: ${relativePath}>\n`);
          } catch (err) {
            log(`    [ERROR reading file: ${err.message}]\n`);
          }
        } else {
          log(`    [Binary file â€” contents skipped]\n`);
        }
      }
    }
  } catch (e) {
    log(`${indent}[ERROR reading directory: ${e.message}]\n`);
  }
}

log(`=== FULL PROJECT DUMP (Text Files Only) ===\n`);
log(`Root: ${projectRoot}\n`);

dumpDirectory(projectRoot);

log(`\n=== END OF DUMP ===`);

fs.writeFileSync(outputFile, output, 'utf8');
console.log(`âœ… Dump completed! Output saved to: ${outputFile}`);
console.log(`ðŸ’¡ Only text files were included. Binary files (like .webp, .DS_Store, etc.) were skipped.`);

    </End of: dump.js>

  - gaberguna.txt
    <Contents of: gaberguna.txt>
migrate ke express js, bikin fungsi login dan logout work
UI/UX Task menu (frontend)
Fitur todolist
delet+edit todo
user profile
Task to reminder modal
Reminder menu
Writing menu + create note
reminder bot whatsapp
profile page fungsi
username random
pr : bikin verif email, gemini step 2

    </End of: gaberguna.txt>

  [produse-api]
    - .env
    [Binary file â€” contents skipped]

    [produse-api/.well-known]
      [produse-api/.well-known/pki-validation]
        - C5C250D8131ED76206273793BD2A054C.txt
    <Contents of: produse-api/.well-known/pki-validation/C5C250D8131ED76206273793BD2A054C.txt>
3E7D51A6D20526AF88690E1DF96F8CB7FBAEFED374704C96BBC5A9BD8E2AB986
comodoca.com
c96e6f5bc0e06dd
    </End of: produse-api/.well-known/pki-validation/C5C250D8131ED76206273793BD2A054C.txt>

    - package-lock.json
    <Contents of: produse-api/package-lock.json>
{
  "name": "produse-api",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "produse-api",
      "version": "1.0.0",
      "license": "ISC",
      "dependencies": {
        "axios": "^1.13.2",
        "bcryptjs": "^3.0.2",
        "cookie-parser": "^1.4.7",
        "cors": "^2.8.5",
        "dotenv": "^17.2.3",
        "express": "^5.1.0",
        "jsonwebtoken": "^9.0.2",
        "luxon": "^3.7.2",
        "mysql2": "^3.15.1",
        "nodemailer": "^7.0.11"
      }
    },
    "node_modules/accepts": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-2.0.0.tgz",
      "integrity": "sha512-5cvg6CtKwfgdmVqY1WIiXKc3Q1bkRqGLi+2W/6ao+6Y7gu/RCwRuAhGEzh5B4KlszSuTLgZYuqFqo5bImjNKng==",
      "license": "MIT",
      "dependencies": {
        "mime-types": "^3.0.0",
        "negotiator": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/aws-ssl-profiles": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/aws-ssl-profiles/-/aws-ssl-profiles-1.1.2.tgz",
      "integrity": "sha512-NZKeq9AfyQvEeNlN0zSYAaWrmBffJh3IELMZfRpJVWgrpEbtEpnjvzqBPf+mxoI287JohRDoa+/nsfqqiZmF6g==",
      "license": "MIT",
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/axios": {
      "version": "1.13.2",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.13.2.tgz",
      "integrity": "sha512-VPk9ebNqPcy5lRGuSlKx752IlDatOjT9paPlm8A7yOuW2Fbvp4X3JznJtT4f0GzGLLiWE9W8onz51SqLYwzGaA==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/bcryptjs": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/bcryptjs/-/bcryptjs-3.0.2.tgz",
      "integrity": "sha512-k38b3XOZKv60C4E2hVsXTolJWfkGRMbILBIe2IBITXciy5bOsTKot5kDrf3ZfufQtQOUN5mXceUEpU1rTl9Uog==",
      "license": "BSD-3-Clause",
      "bin": {
        "bcrypt": "bin/bcrypt"
      }
    },
    "node_modules/body-parser": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-2.2.0.tgz",
      "integrity": "sha512-02qvAaxv8tp7fBa/mw1ga98OGm+eCbqzJOKoRt70sLmfEEi+jyBYVTDGfCL/k06/4EMk/z01gCe7HoCH/f2LTg==",
      "license": "MIT",
      "dependencies": {
        "bytes": "^3.1.2",
        "content-type": "^1.0.5",
        "debug": "^4.4.0",
        "http-errors": "^2.0.0",
        "iconv-lite": "^0.6.3",
        "on-finished": "^2.4.1",
        "qs": "^6.14.0",
        "raw-body": "^3.0.0",
        "type-is": "^2.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/buffer-equal-constant-time": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/content-disposition": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-1.0.0.tgz",
      "integrity": "sha512-Au9nRL8VNUut/XSzbQA38+M78dzP4D+eqg3gfJHMIHHYa3bg067xj1KxMUWj+VULbiZMowKngFFbKczUrNJ1mg==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie": {
      "version": "0.7.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.2.tgz",
      "integrity": "sha512-yki5XnKuf750l50uGTllt6kKILY4nQ1eNIQatoXEByZ5dWgnKqbnqmTrBE5B4N7lrMJKQ2ytWMiTO2o0v6Ew/w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-parser": {
      "version": "1.4.7",
      "resolved": "https://registry.npmjs.org/cookie-parser/-/cookie-parser-1.4.7.tgz",
      "integrity": "sha512-nGUvgXnotP3BsjiLX2ypbQnWoGUPIIfHQNZkkC668ntrzGWEZVW70HDEB1qnNGMicPje6EttlIgzo51YSwNQGw==",
      "license": "MIT",
      "dependencies": {
        "cookie": "0.7.2",
        "cookie-signature": "1.0.6"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.6.tgz",
      "integrity": "sha512-QADzlaHc8icV8I7vbaJXJwod9HWYp8uCqf1xa4OfNu1T7JVxQIrUgOWtHdNDtPiywmFbiS12VjotIXLrKM3orQ==",
      "license": "MIT"
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/denque": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/denque/-/denque-2.1.0.tgz",
      "integrity": "sha512-HVQE3AAb/pxF8fQAoiqpvg9i3evqug3hoiwakOyZAwJm+6vZehbkYXZ0l4JxS+I3QxM97v5aaRNhj8v5oBhekw==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/dotenv": {
      "version": "17.2.3",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-17.2.3.tgz",
      "integrity": "sha512-JVUnt+DUIzu87TABbhPmNfVdBDt18BLOWjMUFJMSi/Qqg7NTYtabbvSNJGOJ7afbRuv9D/lngizHtP7QyLQ+9w==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/ecdsa-sig-formatter": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==",
      "license": "MIT"
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==",
      "license": "MIT"
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/express": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/express/-/express-5.1.0.tgz",
      "integrity": "sha512-DT9ck5YIRU+8GYzzU5kT3eHGA5iL+1Zd0EutOmTE9Dtk+Tvuzd23VBU+ec7HPNSTxXYO55gPV/hq4pSBJDjFpA==",
      "license": "MIT",
      "dependencies": {
        "accepts": "^2.0.0",
        "body-parser": "^2.2.0",
        "content-disposition": "^1.0.0",
        "content-type": "^1.0.5",
        "cookie": "^0.7.1",
        "cookie-signature": "^1.2.1",
        "debug": "^4.4.0",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "etag": "^1.8.1",
        "finalhandler": "^2.1.0",
        "fresh": "^2.0.0",
        "http-errors": "^2.0.0",
        "merge-descriptors": "^2.0.0",
        "mime-types": "^3.0.0",
        "on-finished": "^2.4.1",
        "once": "^1.4.0",
        "parseurl": "^1.3.3",
        "proxy-addr": "^2.0.7",
        "qs": "^6.14.0",
        "range-parser": "^1.2.1",
        "router": "^2.2.0",
        "send": "^1.1.0",
        "serve-static": "^2.2.0",
        "statuses": "^2.0.1",
        "type-is": "^2.0.1",
        "vary": "^1.1.2"
      },
      "engines": {
        "node": ">= 18"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/express/node_modules/cookie-signature": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.2.2.tgz",
      "integrity": "sha512-D76uU73ulSXrD1UXF4KE2TMxVVwhsnCgfAyTg9k8P6KGZjlXKrOLe4dJQKI3Bxi5wjesZoFXJWElNWBjPZMbhg==",
      "license": "MIT",
      "engines": {
        "node": ">=6.6.0"
      }
    },
    "node_modules/finalhandler": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-2.1.0.tgz",
      "integrity": "sha512-/t88Ty3d5JWQbWYgaOGCCYfXRwV1+be02WqYYlL6h0lEiUAMPM8o8qKGO01YIkOHzka2up08wvgYD0mDiI+q3Q==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.4.0",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "on-finished": "^2.4.1",
        "parseurl": "^1.3.3",
        "statuses": "^2.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.5.tgz",
      "integrity": "sha512-8RipRLol37bNs2bhoV67fiTEvdTrbMUYcFTiy3+wuuOnUog2QBHCZWXDRijWQfAkhBj2Uf5UnVaiWwA5vdd82w==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/form-data/node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/form-data/node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fresh": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-2.0.0.tgz",
      "integrity": "sha512-Rx/WycZ60HOaqLKAi6cHRKKI7zxWbJ31MhntmtwMoaTeF7XFH9hhBp8vITaMidfljRQ6eYWCKkaTK+ykVJHP2A==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/generate-function": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/generate-function/-/generate-function-2.3.1.tgz",
      "integrity": "sha512-eeB5GfMNeevm/GRYq20ShmsaGcmI81kIX2K9XQx5miC8KdHaC6Jm0qQ8ZNeGOi7wYB8OsdxKs+Y2oVuTFuVwKQ==",
      "license": "MIT",
      "dependencies": {
        "is-property": "^1.0.2"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/http-errors/node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "license": "ISC"
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-promise": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/is-promise/-/is-promise-4.0.0.tgz",
      "integrity": "sha512-hvpoI6korhJMnej285dSg6nu1+e6uxs7zG3BYAm5byqDsgJNWwxzM6z6iZiAgQR4TJ30JmBTOwqZUw3WlyH3AQ==",
      "license": "MIT"
    },
    "node_modules/is-property": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/is-property/-/is-property-1.0.2.tgz",
      "integrity": "sha512-Ks/IoX00TtClbGQr4TWXemAnktAQvYB7HzcCxDGqEZU6oCmb2INHuOoKxbtR+HFkmYWBKv/dOZtGRiAjDhj92g==",
      "license": "MIT"
    },
    "node_modules/jsonwebtoken": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-9.0.2.tgz",
      "integrity": "sha512-PRp66vJ865SSqOlgqS8hujT5U4AOgMfhrwYIuIhfKaoSCZcirrmASQr8CX7cUg+RMih+hgznrjp99o+W4pJLHQ==",
      "license": "MIT",
      "dependencies": {
        "jws": "^3.2.2",
        "lodash.includes": "^4.3.0",
        "lodash.isboolean": "^3.0.3",
        "lodash.isinteger": "^4.0.4",
        "lodash.isnumber": "^3.0.3",
        "lodash.isplainobject": "^4.0.6",
        "lodash.isstring": "^4.0.1",
        "lodash.once": "^4.0.0",
        "ms": "^2.1.1",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      }
    },
    "node_modules/jwa": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
      "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jws": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
      "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
      "license": "MIT",
      "dependencies": {
        "jwa": "^1.4.1",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/lodash.includes": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
      "license": "MIT"
    },
    "node_modules/lodash.isboolean": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
      "license": "MIT"
    },
    "node_modules/lodash.isinteger": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
      "license": "MIT"
    },
    "node_modules/lodash.isnumber": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
      "license": "MIT"
    },
    "node_modules/lodash.isplainobject": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
      "license": "MIT"
    },
    "node_modules/lodash.isstring": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
      "license": "MIT"
    },
    "node_modules/lodash.once": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
      "license": "MIT"
    },
    "node_modules/long": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
      "license": "Apache-2.0"
    },
    "node_modules/lru-cache": {
      "version": "7.18.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-7.18.3.tgz",
      "integrity": "sha512-jumlc0BIUrS3qJGgIkWZsyfAM7NCWiBcCDhnd+3NNM5KbBmLTgHVfWBcg6W+rLUsIpzpERPsvwUP7CckAQSOoA==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/lru.min": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/lru.min/-/lru.min-1.1.2.tgz",
      "integrity": "sha512-Nv9KddBcQSlQopmBHXSsZVY5xsdlZkdH/Iey0BlcBYggMd4two7cZnKOK9vmy3nY0O5RGH99z1PCeTpPqszUYg==",
      "license": "MIT",
      "engines": {
        "bun": ">=1.0.0",
        "deno": ">=1.30.0",
        "node": ">=8.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wellwelwel"
      }
    },
    "node_modules/luxon": {
      "version": "3.7.2",
      "resolved": "https://registry.npmjs.org/luxon/-/luxon-3.7.2.tgz",
      "integrity": "sha512-vtEhXh/gNjI9Yg1u4jX/0YVPMvxzHuGgCm6tC5kZyb08yjGWGnqAjGJvcXbqQR2P3MyMEFnRbpcdFS6PBcLqew==",
      "license": "MIT",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/media-typer": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-1.1.0.tgz",
      "integrity": "sha512-aisnrDP4GNe06UcKFnV5bfMNPBUw4jsLGaWwWfnH3v02GnBuXX2MCVn5RbrWo0j3pczUilYblq7fQ7Nw2t5XKw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/merge-descriptors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-2.0.0.tgz",
      "integrity": "sha512-Snk314V5ayFLhp3fkUREub6WtjBfPdCPY1Ln8/8munuLuiYhsABgBVWsozAG+MWMbVEvcdcpbi9R7ww22l9Q3g==",
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/mime-db": {
      "version": "1.54.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.54.0.tgz",
      "integrity": "sha512-aU5EJuIN2WDemCcAp2vFBfp/m4EAhWJnUNSSw0ixs7/kXbd6Pg64EmwJkNdFhB8aWt1sH2CTXrLxo/iAGV3oPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-3.0.1.tgz",
      "integrity": "sha512-xRc4oEhT6eaBpU1XF7AjpOFD+xQmXNB5OVKwp4tqCuBpHLS/ZbBDrc07mYTDqVMg6PfxUjjNp85O6Cd2Z/5HWA==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "^1.54.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/mysql2": {
      "version": "3.15.1",
      "resolved": "https://registry.npmjs.org/mysql2/-/mysql2-3.15.1.tgz",
      "integrity": "sha512-WZMIRZstT2MFfouEaDz/AGFnGi1A2GwaDe7XvKTdRJEYiAHbOrh4S3d8KFmQeh11U85G+BFjIvS1Di5alusZsw==",
      "license": "MIT",
      "dependencies": {
        "aws-ssl-profiles": "^1.1.1",
        "denque": "^2.1.0",
        "generate-function": "^2.3.1",
        "iconv-lite": "^0.7.0",
        "long": "^5.2.1",
        "lru.min": "^1.0.0",
        "named-placeholders": "^1.1.3",
        "seq-queue": "^0.0.5",
        "sqlstring": "^2.3.2"
      },
      "engines": {
        "node": ">= 8.0"
      }
    },
    "node_modules/mysql2/node_modules/iconv-lite": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.7.0.tgz",
      "integrity": "sha512-cf6L2Ds3h57VVmkZe+Pn+5APsT7FpqJtEhhieDCvrE2MK5Qk9MyffgQyuxQTm6BChfeZNtcOLHp9IcWRVcIcBQ==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/named-placeholders": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/named-placeholders/-/named-placeholders-1.1.3.tgz",
      "integrity": "sha512-eLoBxg6wE/rZkJPhU/xRX1WTpkFEwDJEN96oxFrTsqBdbT5ec295Q+CoHrL9IT0DipqKhmGcaZmwOt8OON5x1w==",
      "license": "MIT",
      "dependencies": {
        "lru-cache": "^7.14.1"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/negotiator": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-1.0.0.tgz",
      "integrity": "sha512-8Ofs/AUQh8MaEcrlq5xOX0CQ9ypTF5dl78mjlMNfOK08fzpgTHQRQPBxcPlEtIw0yRpws+Zo/3r+5WRby7u3Gg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/nodemailer": {
      "version": "7.0.11",
      "resolved": "https://registry.npmjs.org/nodemailer/-/nodemailer-7.0.11.tgz",
      "integrity": "sha512-gnXhNRE0FNhD7wPSCGhdNh46Hs6nm+uTyg+Kq0cZukNQiYdnCsoQjodNP9BQVG9XrcK/v6/MgpAPBUFyzh9pvw==",
      "license": "MIT-0",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-to-regexp": {
      "version": "8.3.0",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-8.3.0.tgz",
      "integrity": "sha512-7jdwVIRtsP8MYpdXSwOS0YdD0Du+qOoF/AEPIt88PcCFrZCzx41oxku1jD88hZBwbNUIEfpqvuhjFaMAqMTWnA==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/qs": {
      "version": "6.14.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.14.0.tgz",
      "integrity": "sha512-YWWTjgABSKcvs/nWBi9PycY/JiPJqOD4JA6o9Sej2AtvSGarXxKC3OQSk4pAarbdQlKAh5D4FCQkJNkW+GAn3w==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-3.0.1.tgz",
      "integrity": "sha512-9G8cA+tuMS75+6G/TzW8OtLzmBDMo8p1JRxN5AZ+LAp8uxGA8V8GZm4GQ4/N5QNQEnLmg6SS7wyuSmbKepiKqA==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.7.0",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/raw-body/node_modules/iconv-lite": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.7.0.tgz",
      "integrity": "sha512-cf6L2Ds3h57VVmkZe+Pn+5APsT7FpqJtEhhieDCvrE2MK5Qk9MyffgQyuxQTm6BChfeZNtcOLHp9IcWRVcIcBQ==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/router": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/router/-/router-2.2.0.tgz",
      "integrity": "sha512-nLTrUKm2UyiL7rlhapu/Zl45FwNgkZGaCpZbIHajDYgwlJCOzLSk+cIPAnsEqV955GjILJnKbdQC1nVPz+gAYQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.4.0",
        "depd": "^2.0.0",
        "is-promise": "^4.0.0",
        "parseurl": "^1.3.3",
        "path-to-regexp": "^8.0.0"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "7.7.2",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.2.tgz",
      "integrity": "sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==",
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/send": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/send/-/send-1.2.0.tgz",
      "integrity": "sha512-uaW0WwXKpL9blXE2o0bRhoL2EGXIrZxQ2ZQ4mgcfoBxdFmQold+qWsD2jLrfZ0trjKL6vOw0j//eAwcALFjKSw==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.3.5",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "etag": "^1.8.1",
        "fresh": "^2.0.0",
        "http-errors": "^2.0.0",
        "mime-types": "^3.0.1",
        "ms": "^2.1.3",
        "on-finished": "^2.4.1",
        "range-parser": "^1.2.1",
        "statuses": "^2.0.1"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/seq-queue": {
      "version": "0.0.5",
      "resolved": "https://registry.npmjs.org/seq-queue/-/seq-queue-0.0.5.tgz",
      "integrity": "sha512-hr3Wtp/GZIc/6DAGPDcV4/9WoZhjrkXsi5B/07QgX8tsdc6ilr7BFM6PM6rbdAX1kFSDYeZGLipIZZKyQP0O5Q=="
    },
    "node_modules/serve-static": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-2.2.0.tgz",
      "integrity": "sha512-61g9pCh0Vnh7IutZjtLGGpTA355+OPn2TyDv/6ivP2h/AdAVX9azsoxmg2/M6nZeQZNYBEwIcsne1mJd9oQItQ==",
      "license": "MIT",
      "dependencies": {
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "parseurl": "^1.3.3",
        "send": "^1.2.0"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
      "license": "ISC"
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/sqlstring": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/sqlstring/-/sqlstring-2.3.3.tgz",
      "integrity": "sha512-qC9iz2FlN7DQl3+wjwn3802RTyjCx7sDvfQEXchwa6CWOx07/WVfh91gBmQ9fahw8snwGEWU3xGzOt4tFyHLxg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.2.tgz",
      "integrity": "sha512-DvEy55V3DB7uknRo+4iOGT5fP1slR8wQohVdknigZPMpMstaKJQWhwiYBACJE3Ul2pTnATihhBYnRhZQHGBiRw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/type-is": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-2.0.1.tgz",
      "integrity": "sha512-OZs6gsjF4vMp32qrCbiVSkrFmXtG/AZhY3t0iAMrMBiAZyV9oALtXO8hsrHbMXF9x6L3grlFuwW2oAz7cav+Gw==",
      "license": "MIT",
      "dependencies": {
        "content-type": "^1.0.5",
        "media-typer": "^1.1.0",
        "mime-types": "^3.0.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "license": "ISC"
    }
  }
}

    </End of: produse-api/package-lock.json>

    - package.json
    <Contents of: produse-api/package.json>
{
  "name": "produse-api",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "axios": "^1.13.2",
    "bcryptjs": "^3.0.2",
    "cookie-parser": "^1.4.7",
    "cors": "^2.8.5",
    "dotenv": "^17.2.3",
    "express": "^5.1.0",
    "jsonwebtoken": "^9.0.2",
    "luxon": "^3.7.2",
    "mysql2": "^3.15.1",
    "nodemailer": "^7.0.11"
  }
}

    </End of: produse-api/package.json>

    - server.js
    <Contents of: produse-api/server.js>
// ===== Core & Env =====
require('dotenv').config();
const axios = require('axios');
const express = require('express');
const mysql = require('mysql2/promise');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const cookieParser = require('cookie-parser');
const cors = require('cors');
const { DateTime } = require('luxon');
const { exec } = require('child_process');
const path = require('path');
const nodemailer = require('nodemailer');
const crypto = require('crypto');

const app = express();

// ===== Config dasar =====
const PORT = process.env.PORT || 3000;
const COOKIE_NAME = 'token';
const JWT_SECRET = process.env.JWT_SECRET || 'CHANGE_ME_SECRET';
const JWT_EXPIRES = '7d'; // masa berlaku token
const DELIVERY_MODE = (process.env.DELIVERY_MODE || 'termux').toLowerCase();

// (Kalau nanti butuh whitelisting origin spesifik, isi di sini)
const ALLOWED_ORIGINS = [
  'http://127.0.0.1:3000',
  'http://localhost:3000'
];

// CORS (karena FE & API sekarang satu origin/port 3000, ini aman)
app.use(cors({
  origin: true,
  credentials: true
}));
app.use(express.json());
app.use(cookieParser());

// ===== MySQL Pool =====
const pool = mysql.createPool({
  host: process.env.DB_HOST || '127.0.0.1',
  port: process.env.DB_PORT ? Number(process.env.DB_PORT) : 3306,
  user: process.env.DB_USER || 'root',
  password: process.env.DB_PASSWORD || '',
  database: process.env.DB_NAME || 'produse',
  waitForConnections: true,
  connectionLimit: 10
});

// ===== Util: JWT & Auth =====
function getTokenFromReq(req) {
  // Utama dari cookie httpOnly
  if (req.cookies && req.cookies[COOKIE_NAME]) return req.cookies[COOKIE_NAME];
  // Cadangan dari Authorization: Bearer <token> (kalau dipakai)
  const auth = req.headers.authorization || '';
  const parts = auth.split(' ');
  if (parts[0] === 'Bearer' && parts[1]) return parts[1];
  return null;
}

function verifyTokenFromReq(req) {
  const token = getTokenFromReq(req);
  if (!token) return null;
  try {
    return jwt.verify(token, JWT_SECRET); // => { sub: userId, iat, exp }
  } catch {
    return null;
  }
}

function requireAuth(req, res, next) {
  const payload = verifyTokenFromReq(req);
  if (!payload) return res.status(401).json({ message: 'Unauthorized' });
  req.userId = payload.sub;
  next();
}

// ===== Gate untuk file statis user (/public/user/)
function gateStaticUser(req, res, next) {
  const payload = verifyTokenFromReq(req);
  if (!payload) {
    // Kalau HTML â†’ redirect ke login; kalau asset/json â†’ 401
    if (req.accepts('html')) return res.redirect('/login/');
    return res.status(401).send('Unauthorized');
  }
  req.userId = payload.sub;
  next();
}

// ===== Healthcheck DB =====
app.get('/health/db', async (req, res) => {
  let conn;
  try {
    conn = await pool.getConnection();
    const [rows] = await conn.query('SELECT 1 AS ok');
    res.json({ db: 'ok', rows });
  } catch (e) {
    console.error('DB health error:', e.message);
    res.status(500).json({ db: 'error', message: e.message });
  } finally {
    if (conn) conn.release();
  }
});

// ===== Nodemailer Config (Via Brevo Relay) =====
const transporter = nodemailer.createTransport({
  host: process.env.MAIL_HOST,
  port: Number(process.env.MAIL_PORT),
  secure: false, // Port 2525 tidak butuh SSL di awal (pakai STARTTLS otomatis)
  auth: {
    user: process.env.MAIL_USER,
    pass: process.env.MAIL_PASS
  },
  tls: {
    rejectUnauthorized: false // Membantu mencegah error sertifikat di beberapa VPS
  }
});

app.use('/.well-known', express.static(path.join(__dirname, '.well-known')));

// ===== Serve STATIC /public (dengan proteksi /public/user/)
app.use('/public/user', gateStaticUser);
app.use(express.static(path.join(__dirname, '..', 'public'), {
  index: 'index.html'
}));


// ===== AUTH =====

// Register dengan Verifikasi Email
app.post('/api/auth/register', async (req, res) => {
  try {
    let { name, email, username, password } = req.body || {};

    if (!name || !email || !password) {
      return res.status(400).json({ message: 'Data tidak lengkap' });
    }
    if (password.length < 8) return res.status(400).json({ message: 'Password min 8 karakter' });

    // Auto-generate username jika kosong
    if (!username || username.trim() === '') {
      const randomNum = Math.floor(100000 + Math.random() * 900000);
      username = `user${randomNum}`;
    }

    const conn = await pool.getConnection();
    try {
      // Cek duplikasi
      const [exists] = await conn.execute(
        'SELECT id FROM users WHERE email = ? OR username = ?',
        [email, username]
      );
      if (exists.length) return res.status(409).json({ message: 'Email/Username sudah dipakai' });

      const hash = await bcrypt.hash(password, 12);
      
      // Generate Token Random
      const verifyToken = crypto.randomBytes(32).toString('hex');

      // INSERT dengan status 'disabled' dan simpan token
      await conn.execute(
        `INSERT INTO users (name, email, username, password_hash, status, verification_token) 
         VALUES (?, ?, ?, ?, 'disabled', ?)`,
        [name, email, username, hash, verifyToken]
      );

      // Kirim Email
      const verifyLink = `${process.env.BASE_URL || 'http://127.0.0.1:3000'}/api/auth/verify-email?token=${verifyToken}`;
      
      const mailOptions = {
        // Ganti 'alamat_email_kamu@gmail.com' dengan email Gmail asli kamu 
        // yang tadi sudah kamu daftarkan sebagai "Sender" di dashboard Brevo.
        from: `"Produse Team" <produsehub@gmail.com>`, 
        
        to: email, // Email tujuan (user yang daftar)
        subject: 'Verify your Produse Account',
        html: `
          <div style="font-family: Arial, sans-serif; padding: 20px; color: #333;">
            <h2 style="color: #1976D2;">Welcome to Produse!</h2>
            <p>Hi ${name},</p>
            <p>Thanks for registering. Please click the button below to verify your account:</p>
            <br>
            <a href="${verifyLink}" style="background-color: #1976D2; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; font-weight: bold; display: inline-block;">Verify Email Address</a>
            <br><br>
            <p style="font-size: 14px; color: #666;">Or copy this link to your browser:</p>
            <p style="font-size: 13px; color: #888; word-break: break-all;">${verifyLink}</p>
            <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
            <p style="font-size: 12px; color: #999;">This link is valid for 24 hours.</p>
          </div>
        `
      };

      await transporter.sendMail(mailOptions);

      // Jangan buat token login (JWT) disini, karena belum aktif
      return res.status(201).json({ message: 'Registrasi berhasil. Silakan cek email.', email: email });

    } finally {
      conn.release();
    }
  } catch (e) {
    console.error('Register error', e);
    res.status(500).json({ message: 'Gagal mendaftar atau mengirim email' });
  }
});

// Endpoint Verifikasi Email (Diklik dari email)
app.get('/api/auth/verify-email', async (req, res) => {
  const { token } = req.query;
  if (!token) return res.status(400).send('Token invalid');

  const conn = await pool.getConnection();
  try {
    // Cari user dengan token tersebut
    const [users] = await conn.execute(
      'SELECT id FROM users WHERE verification_token = ? LIMIT 1',
      [token]
    );

    if (users.length === 0) {
      return res.status(400).send('<h1>Invalid or Expired Token</h1><p>Link verifikasi salah atau sudah digunakan.</p>');
    }

    const userId = users[0].id;

    // Aktifkan user dan hapus token
    await conn.execute(
      "UPDATE users SET status = 'active', verification_token = NULL WHERE id = ?",
      [userId]
    );

    // Redirect ke halaman login dengan pesan sukses
    // Kita bisa tambahkan parameter query biar frontend tau verifikasi sukses
    res.redirect('/login/index.html?verified=true');

  } catch (e) {
    console.error('Verify error', e);
    res.status(500).send('Server Error');
  } finally {
    conn.release();
  }
});

// Login
app.post('/api/auth/login', async (req, res) => {
  try {
    const { emailOrUsername, email, password } = req.body || {};
    const handle = (emailOrUsername || email || '').trim();

    if (!handle || !password) {
      return res.status(400).json({ message: 'email/username & password wajib' });
    }

    const conn = await pool.getConnection();
    try {
      const [rows] = await conn.execute(
        'SELECT id, name, email, username, password_hash FROM users WHERE email = ? OR username = ? LIMIT 1',
        [handle, handle]
      );
      if (!rows.length) return res.status(401).json({ message: 'Email/username atau password salah' });

      const user = rows[0];
      if (user.status === 'disabled') {
    return res.status(403).json({ message: 'Akun belum diverifikasi. Cek email kamu.' });
}
      const ok = await bcrypt.compare(password, user.password_hash || '');
      if (!ok) return res.status(401).json({ message: 'Email/username atau password salah' });

      // Buat token & set cookie httpOnly
      const token = jwt.sign({ sub: user.id }, JWT_SECRET, { expiresIn: JWT_EXPIRES });
      res.cookie(COOKIE_NAME, token, {
        httpOnly: true,
        sameSite: 'lax',
        path: '/',
        maxAge: 7 * 24 * 60 * 60 * 1000
        // secure: true // aktifkan saat sudah HTTPS
      });

      return res.json({ id: user.id, name: user.name, email: user.email, username: user.username });
    } finally {
      conn.release();
    }
  } catch (e) {
    console.error(e);
    return res.status(500).json({ message: 'Server error' });
  }
});

// Siapa saya (cek login)
app.get('/api/auth/me', requireAuth, async (req, res) => {
  try {
    const conn = await pool.getConnection();
    try {
      const [rows] = await conn.execute(
       'SELECT id, name, email, username, phone, created_at FROM users WHERE id = ? LIMIT 1',
        [req.userId]
      );
      if (!rows.length) return res.status(404).json({ message: 'User tidak ditemukan' });
      return res.json(rows[0]);
    } finally {
      conn.release();
    }
  } catch (e) {
    console.error('me error', e);
    res.status(500).json({ message: 'Server error' });
  }
});

// Logout
app.post('/api/auth/logout', (req, res) => {
  res.clearCookie(COOKIE_NAME, { httpOnly: true, sameSite: 'lax', path: '/' });
  // Opsional: bersihkan cookie site-wide di browser modern (hapus jika mengganggu)
  // res.setHeader('Clear-Site-Data', '"cookies"');
  res.json({ ok: true });
});

// ===== TASKS (To-Do List) =====

// Helper: parsing & validasi tanggal dari body (day, month, year, time)
function parseDateFromBody(body) {
  const {
    day,
    month,
    year,
    time
  } = body || {};

  const dNum = parseInt(day, 10);
  let mNum = parseInt(month, 10);
  const yNum = parseInt(year, 10);

  // Kalau month bukan angka (NaN), coba mapping nama bulan â†’ angka (optional)
  if (Number.isNaN(mNum)) {
    const monthMap = {
      january: 1,
      february: 2,
      march: 3,
      april: 4,
      may: 5,
      june: 6,
      july: 7,
      august: 8,
      september: 9,
      october: 10,
      november: 11,
      december: 12
    };
    const key = String(month || '').toLowerCase();
    mNum = monthMap[key];
  }

  if (!dNum || !mNum || !yNum || !time) {
    return { error: 'Tanggal (dd/mm/yyyy) & waktu wajib diisi' };
  }

  const checkDate = new Date(yNum, mNum - 1, dNum);
  if (
    checkDate.getFullYear() !== yNum ||
    checkDate.getMonth() !== mNum - 1 ||
    checkDate.getDate() !== dNum
  ) {
    return { error: 'Tanggal tidak valid' };
  }

  if (!/^\d{2}:\d{2}$/.test(String(time))) {
    return { error: 'Format time harus HH:MM (24 jam)' };
  }

  const dueDate = `${yNum.toString().padStart(4, '0')}-${mNum
    .toString()
    .padStart(2, '0')}-${dNum.toString().padStart(2, '0')}`;
  const dueTime = String(time);

  return { dueDate, dueTime };
}

// GET semua task user (untuk halaman list)
app.get('/api/tasks', requireAuth, async (req, res) => {
  let conn;
  try {
    conn = await pool.getConnection();
    const [rows] = await conn.execute(
      `SELECT id, title, description, priority, category,
              DATE_FORMAT(due_date, '%Y-%m-%d') AS due_date,
              TIME_FORMAT(due_time, '%H:%i') AS due_time,
              status
         FROM tasks
        WHERE user_id = ?
        ORDER BY due_date ASC, due_time ASC, id ASC`,
      [req.userId]
    );

    return res.json(rows);
  } catch (e) {
    console.error('GET /api/tasks error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

// GET satu task (untuk halaman edit /task/new/?id=...)
app.get('/api/tasks/:id', requireAuth, async (req, res) => {
  let conn;
  try {
    const { id } = req.params;

    conn = await pool.getConnection();
    const [rows] = await conn.execute(
      `SELECT id, title, description, priority, category,
              DATE_FORMAT(due_date, '%Y-%m-%d') AS due_date,
              TIME_FORMAT(due_time, '%H:%i') AS due_time,
              status
         FROM tasks
        WHERE id = ? AND user_id = ?`,
      [id, req.userId]
    );

    if (rows.length === 0) {
      return res.status(404).json({ message: 'Task tidak ditemukan' });
    }

    return res.json(rows[0]);
  } catch (e) {
    console.error('GET /api/tasks/:id error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

// POST buat task baru
app.post('/api/tasks', requireAuth, async (req, res) => {
  let conn;
  try {
    const {
      title,
      description,
      priority,
      category
    } = req.body || {};

    if (!title || !String(title).trim()) {
      return res.status(400).json({ message: 'Title wajib diisi' });
    }
    if (!category || !String(category).trim()) {
      return res.status(400).json({ message: 'Category wajib diisi' });
    }

    const allowedPriority = ['low', 'medium', 'high'];
    const priorityNorm = String(priority || 'low').toLowerCase();
    if (!allowedPriority.includes(priorityNorm)) {
      return res.status(400).json({ message: 'Priority tidak valid' });
    }

    const parsed = parseDateFromBody(req.body);
    if (parsed.error) {
      return res.status(400).json({ message: parsed.error });
    }
    const { dueDate, dueTime } = parsed;

    conn = await pool.getConnection();
    const [result] = await conn.execute(
      `INSERT INTO tasks
        (user_id, title, description, priority, category, due_date, due_time, status)
       VALUES (?, ?, ?, ?, ?, ?, ?, 'pending')`,
      [
        req.userId,
        title,
        description || '',
        priorityNorm,
        category,
        dueDate,
        dueTime
      ]
    );

    return res.status(201).json({
      id: result.insertId,
      title,
      description: description || '',
      priority: priorityNorm,
      category,
      due_date: dueDate,
      due_time: dueTime,
      status: 'pending'
    });
  } catch (e) {
    console.error('POST /api/tasks error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

// PUT update task (edit)
app.put('/api/tasks/:id', requireAuth, async (req, res) => {
  let conn;
  try {
    const { id } = req.params;
    const {
      title,
      description,
      priority,
      category
    } = req.body || {};

    if (!title || !String(title).trim()) {
      return res.status(400).json({ message: 'Title wajib diisi' });
    }
    if (!category || !String(category).trim()) {
      return res.status(400).json({ message: 'Category wajib diisi' });
    }

    const allowedPriority = ['low', 'medium', 'high'];
    const priorityNorm = String(priority || 'low').toLowerCase();
    if (!allowedPriority.includes(priorityNorm)) {
      return res.status(400).json({ message: 'Priority tidak valid' });
    }

    const parsed = parseDateFromBody(req.body);
    if (parsed.error) {
      return res.status(400).json({ message: parsed.error });
    }
    const { dueDate, dueTime } = parsed;

    conn = await pool.getConnection();
    const [result] = await conn.execute(
      `UPDATE tasks
          SET title = ?,
              description = ?,
              priority = ?,
              category = ?,
              due_date = ?,
              due_time = ?
        WHERE id = ? AND user_id = ?`,
      [
        title,
        description || '',
        priorityNorm,
        category,
        dueDate,
        dueTime,
        id,
        req.userId
      ]
    );

    if (result.affectedRows === 0) {
      return res.status(404).json({ message: 'Task tidak ditemukan' });
    }

    return res.json({ ok: true });
  } catch (e) {
    console.error('PUT /api/tasks/:id error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

// PATCH ubah status (pending <-> completed) dari checkbox
app.patch('/api/tasks/:id/status', requireAuth, async (req, res) => {
  let conn;
  try {
    const { id } = req.params;
    const { status } = req.body || {};

    const newStatus = String(status || '').toLowerCase();
    if (!['pending', 'completed'].includes(newStatus)) {
      return res.status(400).json({ message: 'Status tidak valid' });
    }

    conn = await pool.getConnection();
    const [result] = await conn.execute(
      `UPDATE tasks
          SET status = ?
        WHERE id = ? AND user_id = ?`,
      [newStatus, id, req.userId]
    );

    if (result.affectedRows === 0) {
      return res.status(404).json({ message: 'Task tidak ditemukan' });
    }

    return res.json({ ok: true });
  } catch (e) {
    console.error('PATCH /api/tasks/:id/status error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

// DELETE hapus task (dari dropdown delete)
app.delete('/api/tasks/:id', requireAuth, async (req, res) => {
  let conn;
  try {
    const { id } = req.params;

    conn = await pool.getConnection();
    const [result] = await conn.execute(
      `DELETE FROM tasks WHERE id = ? AND user_id = ?`,
      [id, req.userId]
    );

    if (result.affectedRows === 0) {
      return res.status(404).json({ message: 'Task tidak ditemukan' });
    }

    return res.json({ ok: true });
  } catch (e) {
    console.error('DELETE /api/tasks/:id error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

// ===== REMINDERS (Luxon + Termux-API) =====
const MONTH_MAP = {
  january: 1, february: 2, march: 3, april: 4, may: 5, june: 6,
  july: 7, august: 8, september: 9, october: 10, november: 11, december: 12,
};

function sh(s) {
  return `'${String(s || '').replace(/'/g, `'\\''`)}'`;
}

// GET semua reminder milik user login (untuk halaman list /features/reminder/)
app.get('/api/reminders', requireAuth, async (req, res) => {
  let conn;
  try {
    conn = await pool.getConnection();
    const [rows] = await conn.execute(
      `SELECT
         id,
         title,
         description,
         tz,
         DATE_FORMAT(scheduled_local, '%Y-%m-%d %H:%i') AS scheduled_local,
         DATE_FORMAT(fire_at_utc, '%Y-%m-%d %H:%i') AS fire_at_utc,
         lead_minutes,
         channel,
         status,
         created_at,
         fired_at
       FROM reminders
       WHERE user_id = ?
       ORDER BY scheduled_local DESC`,
      [req.userId]
    );
    return res.json(rows);
  } catch (e) {
    console.error('GET /api/reminders error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

// GET satu reminder (untuk halaman edit /features/reminder/new/?id=...)
app.get('/api/reminders/:id', requireAuth, async (req, res) => {
  let conn;
  try {
    const { id } = req.params;
    conn = await pool.getConnection();
    const [rows] = await conn.execute(
      `SELECT
         id,
         title,
         description,
         tz,
         DATE_FORMAT(scheduled_local, '%Y-%m-%d %H:%i') AS scheduled_local,
         DATE_FORMAT(fire_at_utc, '%Y-%m-%d %H:%i') AS fire_at_utc,
         lead_minutes,
         channel,
         status,
         created_at,
         fired_at
       FROM reminders
       WHERE id = ? AND user_id = ?`,
      [id, req.userId]
    );

    if (rows.length === 0) {
      return res.status(404).json({ message: 'Reminder tidak ditemukan' });
    }

    return res.json(rows[0]);
  } catch (e) {
    console.error('GET /api/reminders/:id error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});



// Proteksi endpoint reminder: WAJIB login
app.post('/api/reminders', requireAuth, async (req, res) => {
  try {
    const {
      title, description,
      day, month, year,
      time,      // "HH:MM" 24 jam
      timezone,  // IANA TZ (ex: "Asia/Jakarta")
      leadMinutes,
      channel    // 'termux' (default) atau 'web'
    } = req.body || {};

    if (!title) return res.status(400).json({ message: 'title wajib diisi' });
    if (!day || !month || !year || !time) {
      return res.status(400).json({ message: 'Tanggal & waktu wajib diisi' });
    }

    // Fallback: timezone dari header kalau body kosong
    const tzEffective =
      (timezone && String(timezone).trim()) ||
      req.get('X-Timezone') ||
      '';

    if (!tzEffective) {
      return res.status(400).json({ message: 'Timezone tidak terdeteksi' });
    }

    // normalisasi bulan (angka / nama EN)
    let mNum = Number(month);
    if (Number.isNaN(mNum)) {
      const key = String(month).toLowerCase().trim();
      mNum = MONTH_MAP[key];
    }
    if (!mNum || mNum < 1 || mNum > 12) {
      return res.status(400).json({ message: 'Month tidak valid' });
    }

    const [hh, mm] = String(time).split(':').map(x => parseInt(x, 10));
    const yNum = parseInt(year, 10);
    const dNum = parseInt(day, 10);
    const lead = parseInt(leadMinutes || 0, 10) || 0;

    // Buat waktu lokal sesuai TZ
    const dtLocal = DateTime.fromObject(
      { year: yNum, month: mNum, day: dNum, hour: hh, minute: mm },
      { zone: tzEffective }
    );
    if (!dtLocal.isValid) {
      return res.status(400).json({ message: 'Tanggal/waktu atau timezone tidak valid' });
    }

    // Waktu eksekusi = (lokal) - lead â†’ UTC
    const fireUtc = dtLocal.minus({ minutes: lead }).toUTC();

    const conn = await pool.getConnection();
    try {
      const [result] = await conn.execute(
        `INSERT INTO reminders
        (user_id, title, description, tz, scheduled_local, fire_at_utc, lead_minutes, channel)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?)`,
        [
          req.userId, // â† sekarang wajib & terisi user yang login
          title,
          description || '',
          tzEffective,
          dtLocal.toFormat('yyyy-LL-dd HH:mm:ss'),
          fireUtc.toFormat('yyyy-LL-dd HH:mm:ss'),
          lead,
          channel || DELIVERY_MODE
        ]
      );
      return res.json({
        id: result.insertId,
        fire_at_utc: fireUtc.toISO(),
        scheduled_local: dtLocal.toISO()
      });
    } finally {
      conn.release();
    }
  } catch (e) {
    console.error('POST /api/reminders error:', e);
    return res.status(500).json({ message: 'Server error' });
  }
});

// PUT update reminder (dipakai saat edit dari /reminder/new/?id=...)
app.put('/api/reminders/:id', requireAuth, async (req, res) => {
  try {
    const { id } = req.params;
    const {
      title, description,
      day, month, year,
      time,
      timezone,
      leadMinutes,
      channel
    } = req.body || {};

    if (!title) return res.status(400).json({ message: 'title wajib diisi' });
    if (!day || !month || !year || !time) {
      return res.status(400).json({ message: 'Tanggal & waktu wajib diisi' });
    }

    const tzEffective =
      (timezone && String(timezone).trim()) ||
      req.get('X-Timezone') ||
      '';

    if (!tzEffective) {
      return res.status(400).json({ message: 'Timezone tidak terdeteksi' });
    }

    let mNum = Number(month);
    if (Number.isNaN(mNum)) {
      const key = String(month).toLowerCase().trim();
      mNum = MONTH_MAP[key];
    }
    if (!mNum || mNum < 1 || mNum > 12) {
      return res.status(400).json({ message: 'Month tidak valid' });
    }

    const [hh, mm] = String(time).split(':').map(x => parseInt(x, 10));
    const yNum = parseInt(year, 10);
    const dNum = parseInt(day, 10);
    const lead = parseInt(leadMinutes || 0, 10) || 0;

    const dtLocal = DateTime.fromObject(
      { year: yNum, month: mNum, day: dNum, hour: hh, minute: mm },
      { zone: tzEffective }
    );
    if (!dtLocal.isValid) {
      return res.status(400).json({ message: 'Tanggal/waktu atau timezone tidak valid' });
    }

    const fireUtc = dtLocal.minus({ minutes: lead }).toUTC();

    const conn = await pool.getConnection();
    try {
      const [result] = await conn.execute(
        `UPDATE reminders
            SET title = ?,
                description = ?,
                tz = ?,
                scheduled_local = ?,
                fire_at_utc = ?,
                lead_minutes = ?,
                channel = ?,
                status = 'scheduled',
                fired_at = NULL
          WHERE id = ? AND user_id = ?`,
        [
          title,
          description || '',
          tzEffective,
          dtLocal.toFormat('yyyy-LL-dd HH:mm:ss'),
          fireUtc.toFormat('yyyy-LL-dd HH:mm:ss'),
          lead,
          channel || DELIVERY_MODE,
          id,
          req.userId
        ]
      );

      if (result.affectedRows === 0) {
        return res.status(404).json({ message: 'Reminder tidak ditemukan' });
      }

      return res.json({ ok: true });
    } finally {
      conn.release();
    }
  } catch (e) {
    console.error('PUT /api/reminders/:id error:', e);
    return res.status(500).json({ message: 'Server error' });
  }
});

// DELETE reminder
app.delete('/api/reminders/:id', requireAuth, async (req, res) => {
  let conn;
  try {
    const { id } = req.params;
    conn = await pool.getConnection();
    const [result] = await conn.execute(
      `DELETE FROM reminders WHERE id = ? AND user_id = ?`,
      [id, req.userId]
    );

    if (result.affectedRows === 0) {
      return res.status(404).json({ message: 'Reminder tidak ditemukan' });
    }

    return res.json({ ok: true });
  } catch (e) {
    console.error('DELETE /api/reminders/:id error:', e);
    return res.status(500).json({ message: 'Server error' });
  } finally {
    if (conn) conn.release();
  }
});

async function dispatchDue() {
  const mode = DELIVERY_MODE;
  const conn = await pool.getConnection();

  try {
    // Ambil reminder yang sudah waktunya
    // Kita JOIN dengan tabel users untuk ambil nomor HP pemilik reminder
    const [rows] = await conn.execute(
      `SELECT r.*, u.phone as user_phone
       FROM reminders r
       JOIN users u ON r.user_id = u.id
       WHERE r.status='scheduled' AND r.fire_at_utc <= UTC_TIMESTAMP()
       ORDER BY r.fire_at_utc ASC
       LIMIT 50`
    );

    for (const r of rows) {
      try {
        const title = r.title || 'Reminder';
        const content = (r.description && r.description.trim()) ? r.description : 'Waktunya!';
        const message = `ðŸ”” *Reminder for you !!*\n\n_Title:_ ${title}\n\n_Detail:_ ${content}\n\nReady to run and crush it? ðŸ”¥\nâ€” _Sent From Produse, stay organized_`;

        // 1. Cek Channel: WhatsApp
        // Kita kirim ke WA jika channelnya 'whatsapp' ATAU user memilih checkbox WA di frontend
        // (Di frontend kamu ada checkbox, asumsikan itu disimpan ke kolom 'channel')

        let sent = false;

        // LOGIC WHATSAPP
        if (r.channel === 'whatsapp' || r.channel.includes('whatsapp')) {
            if (r.user_phone) {
                try {
                    // Tembak API Bot Lokal di Port 8080
                    await axios.post('http://127.0.0.1:8080/send-message', {
                        target: r.user_phone,
                        message: message
                    });
                    console.log(`[Produse] WA dikirim ke ${r.user_phone}`);
                    sent = true;
                } catch (waErr) {
                    console.error('[Produse] Gagal kirim WA:', waErr.message);
                    // Jangan throw error agar code bisa lanjut update status
                }
            } else {
                console.log('[Produse] User tidak punya no HP di database');
            }
        }

        // LOGIC TERMUX (Default / Fallback)
        if (r.channel === 'termux' || mode === 'termux') {
             const cmd = `termux-notification --id ${r.id} --priority high --sound --title ${sh(title)} --content ${sh(content)}`;
             await new Promise((resolve) => exec(cmd, () => resolve()));
             sent = true;
        }

        // Update status jadi fired
        await conn.execute(
          `UPDATE reminders SET status='fired', fired_at=UTC_TIMESTAMP() WHERE id=?`,
          [r.id]
        );

      } catch (inner) {
        console.error('dispatchDue item error:', inner);
      }
    }

  } catch (e) {
    console.error('dispatchDue error:', e);
  } finally {
    conn.release();
  }
}

// Jalankan scheduler tiap 10 detik
setInterval(dispatchDue, 10_000);
console.log('Reminder dispatcher aktif (interval 10s). Mode:', DELIVERY_MODE);

// ===== RATE LIMITER SEDERHANA (In-Memory) =====
const resendCooldowns = new Map(); // Menyimpan timestamp request terakhir

const COOLDOWN_TIERS = [60, 120, 300, 600, 3600]; 

app.post('/api/auth/resend-verify', async (req, res) => {
  try {
    const { email } = req.body;
    if (!email) return res.status(400).json({ message: 'Email diperlukan' });

    const conn = await pool.getConnection();
    try {
      // 1. Ambil data user beserta history resend-nya
      const [users] = await conn.execute(
        'SELECT id, name, status, verification_token, resend_count, last_resend_time FROM users WHERE email = ? LIMIT 1',
        [email]
      );

      if (users.length === 0) return res.status(404).json({ message: 'Email tidak terdaftar' });
      const user = users[0];

      if (user.status === 'active') {
        return res.status(400).json({ message: 'Akun sudah aktif. Silakan login.' });
      }

      // 2. Cek apakah sudah melebih batas maksimal (Level 5)
      // Jika resend_count >= 5 (karena array index 0-4), maka blokir.
      if (user.resend_count >= COOLDOWN_TIERS.length) {
        return res.status(429).json({ 
          message: 'Terlalu banyak percobaan. Silakan hubungi support atau coba lagi besok.',
          blocked: true // Flag untuk frontend
        });
      }

      // 3. Hitung Waktu Cooldown
      const now = new Date(); // Waktu server sekarang
      const lastTime = new Date(user.last_resend_time || user.created_at); // Waktu terakhir kirim (atau waktu daftar)
      const diffSeconds = (now - lastTime) / 1000; // Selisih dalam detik
      
      // Ambil durasi cooldown berdasarkan level saat ini
      const requiredWait = COOLDOWN_TIERS[user.resend_count] || 60;

      // 4. Validasi Keamanan (Server-Side Guard)
      if (diffSeconds < requiredWait) {
        const remaining = Math.ceil(requiredWait - diffSeconds);
        return res.status(429).json({ 
          message: `Mohon tunggu ${remaining} detik lagi.`,
          remainingSeconds: remaining 
        });
      }

      // 5. Proses Kirim Email (Jika lolos validasi)
      let verifyToken = user.verification_token;
      // Jika token null (kasus langka), generate baru
      if (!verifyToken) {
        verifyToken = crypto.randomBytes(32).toString('hex');
      }

      // Update Database DULU sebelum kirim (untuk mengunci state)
      // Kita update token (jaga-jaga), naikkan resend_count, dan update waktu sekarang
      await conn.execute(
        `UPDATE users 
         SET verification_token = ?, 
             resend_count = resend_count + 1, 
             last_resend_time = NOW() 
         WHERE id = ?`,
        [verifyToken, user.id]
      );

      // Kirim Email via Brevo
      const verifyLink = `${process.env.BASE_URL || 'http://127.0.0.1:3000'}/api/auth/verify-email?token=${verifyToken}`;
      const mailOptions = {
        from: `"Produse Team" <produsehub@gmail.com>`,
        to: email,
        subject: 'Resend: Verify your Produse Account',
        html: `
          <div style="font-family: Arial, sans-serif; padding: 20px; color: #333;">
            <h2 style="color: #1976D2;">Verify Your Email</h2>
            <p>Hi ${user.name},</p>
            <p>Here is your new verification link. Please click below to activate:</p>
            <br>
            <a href="${verifyLink}" style="background-color: #1976D2; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; font-weight: bold; display: inline-block;">Verify Account</a>
            <br><br>
            <p style="font-size: 13px; color: #888;">This is attempt #${user.resend_count + 1}.</p>
          </div>
        `
      };

      await transporter.sendMail(mailOptions);

      // Hitung cooldown untuk tahap SELANJUTNYA agar frontend bisa langsung update timer
      const nextLevel = user.resend_count + 1;
      const nextWait = (nextLevel < COOLDOWN_TIERS.length) ? COOLDOWN_TIERS[nextLevel] : -1;

      return res.json({ 
        message: 'Email berhasil dikirim ulang!',
        nextCooldown: nextWait // Beritahu frontend berapa lama harus nunggu berikutnya
      });

    } finally {
      conn.release();
    }
  } catch (e) {
    console.error('Resend error:', e);
    return res.status(500).json({ message: 'Server error saat mengirim email.' });
  }
});

// ===== Start server =====
app.listen(PORT, () => {
  console.log(`API + Static ready at http://127.0.0.1:${PORT}`);
  console.log('Serving /public via Express (tanpa python http.server)');
});

    </End of: produse-api/server.js>

  [public]
    - auth-check.js
    <Contents of: public/auth-check.js>
(() => {
  async function guard() {
    try {
      const r = await fetch('/api/auth/me', { credentials: 'include' });
      if (!r.ok) throw new Error();
    } catch {
      // Bersihkan storage & arahkan ke login folder
      try { localStorage.clear(); sessionStorage.clear(); } catch {}
      if (location.pathname !== '/login') location.replace('/login');
    }
  }

  // Cegah halaman muncul dari bfcache saat user menekan Back setelah logout
  window.addEventListener('pageshow', (e) => { if (e.persisted) location.reload(); });

  guard();
})();

    </End of: public/auth-check.js>

    - buat catatan.txt
    <Contents of: public/buat catatan.txt>
async function dispatchDue() {
  const mode = DELIVERY_MODE;
  const conn = await pool.getConnection();

  try {
    // Ambil reminder yang sudah waktunya
    // Kita JOIN dengan tabel users untuk ambil nomor HP pemilik reminder
    const [rows] = await conn.execute(
      `SELECT r.*, u.phone as user_phone 
       FROM reminders r
       JOIN users u ON r.user_id = u.id
       WHERE r.status='scheduled' AND r.fire_at_utc <= UTC_TIMESTAMP()
       ORDER BY r.fire_at_utc ASC
       LIMIT 50`
    );

    for (const r of rows) {
      try {
        const title = r.title || 'Reminder';
        const content = (r.description && r.description.trim()) ? r.description : 'Waktunya!';
        const message = `ðŸ”” *REMINDER: ${title}*\n\n${content}\n\n_Sent from Produse_`;

        // 1. Cek Channel: WhatsApp
        // Kita kirim ke WA jika channelnya 'whatsapp' ATAU user memilih checkbox WA di frontend
        // (Di frontend kamu ada checkbox, asumsikan itu disimpan ke kolom 'channel')
        
        let sent = false;

        // LOGIC WHATSAPP
        if (r.channel === 'whatsapp' || r.channel.includes('whatsapp')) {
            if (r.user_phone) {
                try {
                    // Tembak API Bot Lokal di Port 8080
                    await axios.post('http://127.0.0.1:8080/send-message', {
                        target: r.user_phone,
                        message: message
                    });
                    console.log(`[Produse] WA dikirim ke ${r.user_phone}`);
                    sent = true;
                } catch (waErr) {
                    console.error('[Produse] Gagal kirim WA:', waErr.message);
                    // Jangan throw error agar code bisa lanjut update status
                }
            } else {
                console.log('[Produse] User tidak punya no HP di database');
            }
        }

        // LOGIC TERMUX (Default / Fallback)
        if (r.channel === 'termux' || mode === 'termux') {
             const cmd = `termux-notification --id ${r.id} --priority high --sound --title ${sh(title)} --content ${sh(content)}`;
             await new Promise((resolve) => exec(cmd, () => resolve()));
             sent = true;
        }

        // Update status jadi fired
        await conn.execute(
          `UPDATE reminders SET status='fired', fired_at=UTC_TIMESTAMP() WHERE id=?`,
          [r.id]
        );

      } catch (inner) {
        console.error('dispatchDue item error:', inner);
      }
    }

  } catch (e) {
    console.error('dispatchDue error:', e);
  } finally {
    conn.release();
  }
}
    </End of: public/buat catatan.txt>

    - cookies.txt
    <Contents of: public/cookies.txt>
# Netscape HTTP Cookie File
# https://curl.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.

#HttpOnly_127.0.0.1	FALSE	/	FALSE	1763543392	token	eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEsImlhdCI6MTc2MjkzODU5MiwiZXhwIjoxNzYzNTQzMzkyfQ.0YL1zmdGuL2gwheWXEZtVpajOi5cugCyrfSuixTqSws

    </End of: public/cookies.txt>

    - example.html
    <Contents of: public/example.html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create New Journal | Produse</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="create-journal.css">
  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

body {
  background: #f9f9f9;
  color: #212121;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 40px 16px;
}

.journal-container {
  background: #fff;
  width: 100%;
  max-width: 800px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  padding: 24px;
}

.journal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.back-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: #1976d2;
}

.journal-date {
  font-weight: 500;
  color: #333;
  font-size: 1rem;
}

.actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.pin-btn {
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
}

.save-btn {
  background: #2e7d32;
  border: none;
  color: white;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  transition: background 0.2s ease;
}
.save-btn:hover {
  background: #256628;
}

/* Prompt */
.prompt {
  color: #555;
  margin-bottom: 12px;
  font-style: italic;
  font-size: 0.95rem;
}

/* Editor */
.editor textarea {
  width: 100%;
  height: 320px;
  padding: 20px;
  font-size: 1rem;
  border: 1px solid #ddd;
  border-radius: 12px;
  resize: none;
  outline: none;
  line-height: 1.6;
  background: #fff;
  transition: border-color 0.2s;
}
.editor textarea:focus {
  border-color: #1976d2;
  background: #fefefe;
}

/* Mood selector */
.mood {
  margin-top: 16px;
}
.mood label {
  display: block;
  font-weight: 500;
  color: #444;
  margin-bottom: 8px;
}
.moods button {
  background: #e3f2fd;
  border: none;
  font-size: 1.5rem;
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer;
  margin-right: 6px;
  transition: transform 0.2s ease;
}
.moods button:hover {
  transform: scale(1.15);
}

/* Autosave text */
.autosave {
  text-align: right;
  color: #888;
  font-size: 0.85rem;
  margin-top: 8px;
}

@media (max-width: 600px) {
  .journal-container {
    padding: 16px;
  }
  .editor textarea {
    height: 260px;
  }
}
  </style>
</head>
<body>
  <div class="journal-container">
    <!-- Header -->
    <header class="journal-header">
      <button class="back-btn">â†</button>
      <div class="journal-date" id="journalDate">Monday, 25 November 2025</div>
      <div class="actions">
        <button class="pin-btn" title="Pin">&#128204;</button>
        <button class="save-btn">Save</button>
      </div>
    </header>

    <!-- Prompt -->
    <div class="prompt">
      <p>âœ¨ How was your day today?</p>
    </div>

    <!-- Editor -->
    <section class="editor">
      <textarea placeholder="Write your journal here..."></textarea>
    </section>

    <!-- Mood Selector -->
    <div class="mood">
      <label>How do you feel today?</label>
      <div class="moods">
        <button>ðŸ˜Š</button>
        <button>ðŸ˜</button>
        <button>ðŸ˜”</button>
        <button>ðŸ˜¡</button>
      </div>
    </div>

    <!-- Autosave indicator -->
    <p class="autosave">Saved just now</p>
  </div>

  <script>
    // Tampilkan tanggal otomatis
    const date = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById("journalDate").textContent = date.toLocaleDateString('en-GB', options);
  </script>
</body>
</html>
    </End of: public/example.html>

    - example2.html
    <Contents of: public/example2.html>
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="navbar/style.css">
<link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
<style>
  .workspace-toolbar {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  padding: 16px 20px;
  margin-bottom: 16px;
  margin-top:70px;
}

.search-bar input {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 0.95rem;
  outline: none;
  transition: all 0.2s ease;
}
.search-bar input:focus {
  border-color: #1976d2;
  box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
}

.filter-tabs {
  display: flex;
  gap: 8px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.filter-tabs button {
  display: flex;
  align-items: center;
  gap: 6px;
  border: 1px solid #ddd;
  background: #fff;
  color: #444;
  padding: 8px 14px;
  border-radius: 20px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s ease;
}

.filter-tabs button.active {
  background: #2e7d32;
  color: #fff;
  border-color: #2e7d32;
}

.filter-tabs button:hover {
  background: #e8f5e9;
}

.empty-state {
  text-align: center;
  padding: 60px 0;
  color: #666;
}
.empty-state i {
  font-size: 2rem;
  opacity: 0.6;
}
</style><!-- Global layout -->
</head>
<body>
<div class="app-layout">

  <!-- Sidebar -->
  <aside class="sidebar">
    <!-- isi navigasi -->
  </aside>

  <!-- Main Area -->
  <main class="main-content">
    
    <!-- Top Navbar global -->
    <header class="top-navbar">
      <div id="main_navbar"></div>
    </header>

    <!-- Workspace Toolbar (khusus halaman ini) -->
    <section class="workspace-toolbar">
      <div class="search-bar">
        <input type="text" placeholder="Cari catatan atau jurnal..." />
      </div>
      <div class="filter-tabs">
        <button class="active"><i class="icon-list"></i> All</button>
        <button><i class="icon-note"></i> Notes</button>
        <button><i class="icon-book"></i> Journal</button>
        <button><i class="icon-pin"></i> Pinned</button>
      </div>
    </section>

    <!-- Konten utama workspace -->
    <section class="workspace-content">
      <div class="empty-state">
        <i class="icon-empty"></i>
        <p>Tidak ada catatan ditemukan</p>
      </div>
    </section>

  </main>
</div>
<script src="navbar/navbarFunction.js"></script>
        <script src="navbar/style.js"></script>
        <script src="navbar/profile.js"></script>
        </body>
        </html>
    </End of: public/example2.html>

    [public/image]
      - dashboardart.jpg
    [Binary file â€” contents skipped]

      - freelance.png
    [Binary file â€” contents skipped]

      - google.png
    [Binary file â€” contents skipped]

      - hello.png
    [Binary file â€” contents skipped]

      - inbox.png
    [Binary file â€” contents skipped]

      - logo.png
    [Binary file â€” contents skipped]

      - logout.png
    [Binary file â€” contents skipped]

      - pc.png
    [Binary file â€” contents skipped]

      - procoin.png
    [Binary file â€” contents skipped]

      - teaching.png
    [Binary file â€” contents skipped]

      - team.png
    [Binary file â€” contents skipped]

      - work.png
    [Binary file â€” contents skipped]

    - index.bak
    [Binary file â€” contents skipped]

    - index.html
    <Contents of: public/index.html>
want cookies?

    </End of: public/index.html>

    [public/login]
      - index.bak
    [Binary file â€” contents skipped]

      - index.html
    <Contents of: public/login/index.html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login â€” PRODUSE</title>
  <style>
body.auth{
  background: #F9F9F9;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  font-family: "Roboto", sans-serif;
}
.auth-card{
  width: 100%; max-width: 420px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.06);
  padding: 28px;
  text-align: center;
}
.auth-logo{ width: 55%; margin: 0 auto 8px; display:block; }
.auth-title{ font-size: 24px; margin: 6px 0; }
.auth-sub{ color: #555; margin-bottom: 16px; }

.notice{
  margin-top: 16px;
  padding: 10px 12px;
  border-radius: 12px;
  display: none;
  text-align: left;
}
.notice.ok{ display:block; background:#F0FDF4; border:1px solid #E8F5E9; }
.notice.err{ display:block; background:#FEF2F2; border:1px solid #FEE2E2; color:#991B1B; }

.auth-divider{
  position: relative; margin: 18px 0;
  font-size: 13px; color: #64748B;
  display: block;
  justify-content: center;
  align-items: center;
}
.auth-divider:before, .auth-divider:after{
  content:""; display:block; height:1px; background:#E0E0E0;
  position:absolute; top:50%; width:40%;
}
.auth-divider:before{ left:0; } .auth-divider:after{ right:0; }

.auth-ghost-btn{
  display:flex; padding:10px 18px; border-radius: 8px;
  border: 1.5px solid #1976D2; color:#1976D2; text-decoration:none; font-weight:600;
  justify-content: center;
  text-align: center;
  width: 70%;
  margin: 0 auto;
}
.auth-ghost-btn:hover{ background:#E3F2FD; }

.auth-terms{ margin-top: 16px; color:#64748B; font-size:12px; }
input {
  padding: 8px;
  font-size: 16px;
  width: 70%;
  text-decoration:none;
  border: 0px solid #1976D2;
  border-bottom: 2px solid #1976D2;
  outline: none;
}
button {
  background-color: #1976D2;
  font-size: 16px;
  padding: 10px 16px;
  width: 40%;
  border: none;
  color: white;
  border-radius: 999px;
  font-weight: 600;
  cursor: pointer;
}
#get_started_button{ display:inline-block; text-decoration:none; }
#google { width: 18px; margin-right:10px; }
  </style>
</head>
<body class="auth">
  <div class="auth-card">
    <img src="../image/logo.png" alt="PRODUSE logo" class="auth-logo" />
    <br>
    <h1 class="auth-title">Welcome back ðŸ‘‹</h1>
    <p class="auth-sub">Sign in to continue to PRODUSE</p>

    <!-- FORM LOGIN YANG BENAR -->
    <form id="login-form" autocomplete="on" novalidate>
      <input type="text" name="emailOrUsername" placeholder="Email" required>
      <br><br>
      <input type="password" name="password" placeholder="Password" required minlength="8">
      <br><br><br>
      <button id="login-btn" type="submit">Log In</button>
    </form>

    <div id="notice" class="notice"></div>

    <p class="auth-terms">Don't have an account yet?
      <a href="../sign-up/index.html">Sign up</a>
    </p>

    <div class="auth-divider"><span>or</span></div>
    <a href="#" class="auth-ghost-btn"><img id="google" src="../image/google.png" alt="">Continue With Google</a>

    <p class="auth-terms">By lorem ipsum you agree to our
      <a href="#">Terms</a> & <a href="#">Privacy</a>.
    </p>
  </div>

  <!-- Script dipasang di AKHIR body -->
  <script>
  (function() {
    const API = ``;
    const form = document.getElementById('login-form');
    const notice = document.getElementById('notice');
    const btn = document.getElementById('login-btn');

    function showError(msg) {
      notice.className = 'notice err';
      notice.textContent = msg;
    }
    function showOk(msg) {
      notice.className = 'notice ok';
      notice.textContent = msg;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const emailOrUsername = form.elements['emailOrUsername'].value.trim();
      const password = form.elements['password'].value;

      if (!emailOrUsername || !password) {
        showError('Email dan password harus diisi');
        return;
      }

      btn.disabled = true;

      try {
        const r = await fetch(`${API}/api/auth/login`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    credentials: 'include',
    body: JSON.stringify({ emailOrUsername, password })
  });

        const data = await r.json().catch(() => ({}));
        if (!r.ok) {
          throw new Error(data.message || 'Gagal login');
        }

        // (opsional) verifikasi token/cookie dengan /me
        const meRes = await fetch(`${API}/api/auth/me`, { credentials: 'include' });
        if (!meRes.ok) throw new Error('Gagal mengambil profil');
        const me = await meRes.json();

        showOk('Login sukses. Halo, ' + (me.name || me.email) + '!');
        // redirect sementara ke "dashboard" -> pakai halaman utama dulu
        setTimeout(() => {
          window.location.href = '../user/dashboard/';
        }, 500);

      } catch (err) {
        showError(err.message || 'Server error');
      } finally {
        btn.disabled = false;
      }
    });

    // Placeholder agar GIS tidak error kalau callback terpicu
    window.handleCredentialResponse = function() {
      showError('Google Sign-In belum dikonfigurasi.');
    };
  })();
  </script>
  <script>
const im = document.querySelector('img[alt="work"]') || document.querySelector('img');
im.addEventListener('load', () => console.log('IMG OK:', im.naturalWidth, 'x', im.naturalHeight));
im.addEventListener('error', (e) => console.error('IMG FAIL:', im.src, e));

(async () => {
  try {
    const r = await fetch(im.getAttribute('src'));
    console.log('FETCH status:', r.status, r.statusText);
  } catch (err) {
    console.error('FETCH error:', err);
  }
})();
</script>
</body>
</html>

    </End of: public/login/index.html>

    [public/navbar]
      - index.html
    <Contents of: public/navbar/index.html>
<!DOCTYPE html>
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="navbar/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body>
        <div id="main_navbar"></div>
<script src="navbarFunction.js"></script>
        <script src="style.js"></script>
        <script src="profile.js"></script>
        </body>
</html>
    </End of: public/navbar/index.html>

      - navbarFunction.js
    <Contents of: public/navbar/navbarFunction.js>
document.addEventListener('DOMContentLoaded', function() {
    const content = document.querySelector('#main_navbar');

    content.innerHTML = `
    <div style="display:block;">
    <div id="top_navbar">
      <button id="sidebar_icon"><i class="fa-solid fa-bars"></i></button>
      <img src="../../../image/logo.png">
      <div id="right_items">
        <a href="../dashboard/" class="fa-solid fa-house"></a>
      <i id="right_profile" class="fa-solid fa-user"></i>
      </div>
    </div>
    <div id="cik">
          <div id="profile_menu">
          <div id="profile_menu_value">
          <a href="https://produse.home.kg/user/profile"><i class="fa-solid fa-user"></i><span>View Profile</span></a><br>
          <a href="../user/settings"><i class="fa-solid fa-gear"></i><span>Settings</span></a><br>
          <a href="../user"><i class="fa-solid fa-key"></i><span>Change Password</span></a><br>
          <hr>
          <a id="logout"><i class="fa-solid fa-right-from-bracket"></i><span>Log out</span></a>
          </div>
          </div>
          </div>
        
    </div>
    <div id="navbar_menu">
            <ul>
        <li><a href="https://produse.home.kg/user/dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
        <li><a href="https://produse.home.kg/user/features/task"><i class="fas fa-check-square"></i> Tasks</a></li>
        <li><a href=#><i class="fas fa-folder"></i> Projects</a></li>
        <li><a href=#><i class="fas fa-file-alt"></i> Documents</a></li>
        <li><a href="https://produse.home.kg/user/features/reminder"><i class="fas fa-bell"></i> Reminders</a></li>
        <li><a href=#><i class="fas fa-gear"></i> Settings</a></li>
      </ul>
    </div>
    <div id="navbar_bottom">
      <ul>
        <li><a href="https://produse.home.kg/user/pricing"><i class="fas fa-crown"></i> Upgrade</a></li>
        <li id="quest"><a href=#><i class="fas fa-question"></i> Support</a></li>
      </ul>
    </div>
    <div id="logout_confirmation">
      <div id="logout_confirmation_value">
        <img id="logout_img" src="../../../image/logout.png">
        <h5>Ready to log out?</h5>
        <span>Youâ€™ll be signed out from your workspace â€” donâ€™t worry, everything stays right where you left it.</span>
        <div id="logout_button">
          <button id="logout_cancel">Cancel</button>
          <button id="logout_submit">Log out</button>
        </div>
      </div>
    </div>
    `;
window.dispatchEvent(new Event('navbar:ready'));
});

    </End of: public/navbar/navbarFunction.js>

      - profile.js
    <Contents of: public/navbar/profile.js>
document.addEventListener('DOMContentLoaded', bootstrapNavbar);
window.addEventListener('navbar:ready', bootstrapNavbar);

let _inited = false;

function bootstrapNavbar() {
  if (_inited) return; // hindari double-init di halaman yang memuat dua event
  const menuWrap = document.getElementById('cik'); // pembungkus profile menu (overlay kecil)
  const btnProfile = document.getElementById('right_profile');
  const linkLogout = document.getElementById('logout');
  const modal = document.getElementById('logout_confirmation');
  const btnCancel = document.getElementById('logout_cancel');
  const btnSubmit = document.getElementById('logout_submit');

  // Pastikan semua elemen sudah ada (karena navbar diinject dinamis)
  if (!menuWrap || !btnProfile || !linkLogout || !modal || !btnCancel || !btnSubmit) {
    return; // belum siap; tunggu event navbar:ready berikutnya
  }
  _inited = true;

  // Helper: dapatkan display aktual
  const isShown = (el) => window.getComputedStyle(el).display !== 'none';
  const show = (el, disp = 'block') => el && (el.style.display = disp);
  const hide = (el) => el && (el.style.display = 'none');

  // 1) Toggle menu profil
  btnProfile.addEventListener('click', () => {
    if (isShown(menuWrap)) hide(menuWrap); else show(menuWrap, 'block');
  });

  // Klik di luar menu â†’ tutup menu
  document.addEventListener('click', (e) => {
    if (!menuWrap.contains(e.target) && e.target !== btnProfile) {
      hide(menuWrap);
    }
  });

  // 2) Klik "Logout" (link di menu) â†’ buka modal konfirmasi
  linkLogout.addEventListener('click', (e) => {
    e.preventDefault();
    hide(menuWrap);
    show(modal, 'flex'); // modal kamu pakai flex
  });

  // 3) Cancel di modal â†’ tutup modal
  btnCancel.addEventListener('click', () => hide(modal));

  // 4) ESC key â†’ tutup modal
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isShown(modal)) hide(modal);
  });

  // 5) Klik area luar modal â†’ tutup modal (opsional, kalau markup mendukung)
  modal.addEventListener('click', (e) => {
    const box = document.getElementById('logout_confirmation_value');
    if (e.target === modal && box && !box.contains(e.target)) {
      hide(modal);
    }
  });

  // 6) SUBMIT LOGOUT: panggil API, bersihkan state, redirect ke login
  btnSubmit.addEventListener('click', async () => {
    try {
      // panggil API untuk hapus cookie httpOnly di server
      await fetch('http://127.0.0.1:3000/api/auth/logout', {
        method: 'POST',
        credentials: 'include'
      });
    } catch (e) {
      // kalau server down, tetap lanjut ke redirect
      console.warn('Logout API error:', e);
    } finally {
      try {
        localStorage.clear();
        sessionStorage.clear();
      } catch (e) {}
      window.location.replace('/login/');
    }
  });
}

    </End of: public/navbar/profile.js>

      - style.css
    <Contents of: public/navbar/style.css>
body {
  margin:0;
  padding:0;
  font-family: "Roboto", Sans-Serif;
  }
  #top_navbar {
  position: fixed;
  top:0;
  left:0;
  right:0;
  margin: 0px;
  padding: 0 15px;
  height: 50px;
  display: flex;
  align-items: center;
  background-color: white;
  color:black;
  justify-content: space-between;
  border-bottom:0px solid rgba(0,0,0,0.5);
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  z-index: 9;
  }
  a {
    text-decoration: none;
    color:black;
  }
  #sidebar_icon {
    background-color: white;
    border: none;
  }
  img {
    width:26%;
    margin-left: 35px;
  }
  #right_items {
    display: flex;
    align-items: center;
    gap:15px;
  }
  #quest {
    padding-bottom: 15px;
    padding-top: 0px;
  }
  .fa-solid.fa-house {
    font-size:19px;
    
  }
  .fa-solid.fa-bars {
    font-size: 25px;
  }
  .fa-xmark {
    font-size: 25px;
  }
  #right_profile {
    border: 0px solid black;
    padding: 10px;
    border-radius:50px;
    background-color: lightgray;
    font-size: 16px;
  }
  #navbar_menu ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  #navbar_menu ul li a {
    text-decoration: none;
    color: #555555;
    display: flex;
    align-items: center;
    padding: 20px 20px;
    transition: background-color 0.2s ease, color 0.2s ease;
  }
  #navbar_menu {
    height: calc(100vh - 50px);
    width: 250px;
    background-color: white;
    /* border-right:1px solid rgba(0,0,0,0.5); */
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    position: fixed;
    left: 0;
    top: 50px;
    z-index: 999;
    left: -250px;
    transition: left 0.3s ease;
  }
  #navbar_menu ul li a i {
    width: 25px;
    align-items: center;
    margin-right: 10px;
  }
  #navbar_menu ul li a:hover {
    background-color: #E3F2FD;
    color: #1976D2; 
    cursor: pointer;
    padding-left: 10px;
    font-weight: 600;
  }
  #navbar_bottom {
    height: auto;
    width: 250px;
    background-color: white;
    /* border-right:1px solid rgba(0,0,0,0.5); */
    border-top:0px solid rgba(0,0,0,0.5);
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    position: fixed;
    left: 0;
    top: auto;
    bottom: 0;
    z-index: 1000;
    left: -250px;
    transition: left 0.3s ease;
  }
  #navbar_bottom ul li a {
    text-decoration: none;
    color: #555555;
    display: flex;
    align-items: center;
    padding: 25px 20px;
    transition: background-color 0.2s ease, color 0.2s ease;
  }
  #navbar_bottom ul {
  padding: 0;
  margin: 0;
  list-style: none;
  }
  #navbar_bottom ul li a i {
    width: 25px;
    align-items: center;
    margin-right: 10px;
  }
  #navbar_bottom ul li:first-child a {
   background-color: #ffe8b2;
   border-radius: 8px;
   color: #da8900;
   margin: 10px 0px;
   margin-left: 5px;
   margin-right: 5px;
   padding-left: 10px;
   padding-bottom: 15px;
   padding-top: 15px;
   display: flex;
   align-items:center;
   font-weight: 800;
  }
  #navbar_menu.open,
  #navbar_bottom.open {
    left: 0px;
  }
  #navbar_menu ul li,
  #navbar_bottom ul li {
    opacity: 0;
  }
  #navbar_menu.open,
  #navbar_bottom.open {
    left: 0px;
  }
  #navbar_menu.open ul li,
  #navbar_bottom.open ul li {
    animation: fadeInSlideUp 0.3s ease-out forwards;
  }
  #navbar_menu.open ul li:nth-child(1) { animation-delay: 0.2s; }
  #navbar_menu.open ul li:nth-child(2) { animation-delay: 0.3s; }
  #navbar_menu.open ul li:nth-child(3) { animation-delay: 0.4s; }
  #navbar_menu.open ul li:nth-child(4) { animation-delay: 0.5s; }
  #navbar_menu.open ul li:nth-child(5) { animation-delay: 0.6s; }
  #navbar_menu.open ul li:nth-child(6) { animation-delay: 0.7s; }
  #navbar_bottom.open ul li:nth-child(1) { animation-delay: 0.8s; }
  #navbar_bottom.open ul li:nth-child(2) { animation-delay: 0.9s; }
  @keyframes fadeInSlideUp {
    from {
      opacity: 0;
      transform: translateX(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0)
    }
  }
  #cik {
    display:none;
    height: 1px;
  }
  #profile_menu {
    position: fixed;
    display:block;
    display: flex;
     margin-top: 40px;
    border:0px solid black;
    justify-content: flex-end;
    width: 100%;
    z-index:10;
    
  }
  #profile_menu_value {
    background-color: white;
    line-height: 0;
    display: inline-flex;
    flex-direction: column;
    border: 0px solid blue;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    margin-right: 20px;
    color:#1E1E1E;
    border-radius:8px;
  }
  hr {
    margin:0;
  }
  #profile_menu a {
    display: flex;
    align-items: center;
    padding:15px 15px;
    gap:8px;
    text-decoration: none;
    color:#555555;
    font-weight: 450;
  }
  a#logout {
    color:#e74c3c;
  }
  #profile_menu a:hover {
    color: #2ec866;
    background-color: #f4fff8;
  }
  a#logout:hover {
    background-color: rgba(231, 76, 60,0.1);
    color: #c0392b;
  }
  #logout_confirmation {
    border:0px solid blue;
    position: fixed;
    inset: 0;
    width:100%;
    height: 100%;
    align-items: center;
    justify-content: center;
    display: none;
    background-color: rgba(0,0,0,0.3);
    z-index:99999;
  }
  #logout_confirmation_value {
    background: white;
    border-radius: 20px;
    margin:0 60px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    padding:40px;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap:20px;
  }
  img#logout_img {
    margin:0;
    padding:0;
    width:40%;
  }
  #logout_confirmation_value h5 {
    font-size: 25px;
    margin:0;
    margin-bottom:0px;
  }
  #logout_confirmation_value span {
    color:#555555;
    font-size:15px;
    line-height:1.5;
  }
  #logout_button {
    display:flex;
    flex-direction: row;
    gap:35px;
    margin-top:10px;
  }
  #logout_button button {
    background-color: white;
    padding:8px 25px;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight:500;
  }
  button#logout_submit {
    background-color: #2682de;
    color:white;
  }
  button#logout_cancel {
    border: 1px solid #2682de;
    color:#2682de;
  }
    </End of: public/navbar/style.css>

      - style.js
    <Contents of: public/navbar/style.js>
document.addEventListener('DOMContentLoaded', function() {
    const sidebar_icon = document.getElementById('sidebar_icon');
    const navbarmenu = document.getElementById('navbar_menu');
    const navbarbottom = document.getElementById('navbar_bottom'); 
    
    if (!sidebar_icon || !navbarmenu || !navbarbottom)
    {
        return;
    }

sidebar_icon.addEventListener('click', function()
{
  navbarmenu.classList.toggle('open');
  navbarbottom.classList.toggle('open');
  
  const iconElement = sidebar_icon.querySelector('i');
  
  if (navbarmenu.classList.contains('open')) {
    iconElement.classList.remove('fa-bars');
    iconElement.classList.add('fa-xmark');
    
  } else {
    iconElement.classList.remove('fa-xmark');
    iconElement.classList.add('fa-bars');
  }
});
});
    </End of: public/navbar/style.js>

    [public/pricing]
      - index.html
    <Contents of: public/pricing/index.html>
<!DOCTYPE html>
<html>
  <head>
    <title>Produse Pricing</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css"href="../navbar/style.css">
    <link rel="stylesheet" type="text/css" href="style.css">
          <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
  </head>
  <body>
    <div id="main_content">
        <div id="top_navbar">
      <div id="navbar_container">
      <img id="navbar_logo" src="../image/logo.png">
      <div id="navbar_icon">
        <a id="get_started_button" href="../login">Get Started</a>
      </div>
      </div>
    </div>
    
    <div id="jawa">
      <h1>ProCoin Pricing</h1>
      <p>We use a flexible credit/limit system called "ProCoin" to access premium features. Purchase as needed, with no monthly commitment</p>
    </div>
    <div class="pricing_card">
      <h5>Starter Pack</h5>
      <div id="coin_num">
        <span>
      <p>100</p>
       <img id="procoin_img" src="../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$10</h5>
      <p id="price_subtext">$0.10 per Coin</p>
      </div>
      <button type="submit" onclick="window.location.href='../login'">Get Started</button>
    </div>
    <div class="pricing_card">
      <h5>Basic Pack</h5>
      <div id="coin_num">
        <span>
      <p>250</p>
       <img id="procoin_img" src="../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$20</h5>
      <p id="price_subtext">$0.08 per Coin</p>
      </div>
      <button type="submit" onclick="window.location.href='../login'">Get Started</button>
    </div>
    <div class="pricing_card">
      <h5>Pro Pack</h5>
       <div id="coin_num">
        <span>
      <p>500</p>
       <img id="procoin_img" src="../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$40</h5>
      <p id="price_subtext">$0.08 per Coin</p>
      </div>
      <button type="submit" onclick="window.location.href='../login'">Get Started</button>
    </div>
    <div class="pricing_card">
      <h5>Ultimate Pack</h5>
      <div id="coin_num">
        <span>
      <p>1000</p>
       <img id="procoin_img" src="../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$80</h5>
      <p id="price_subtext">$0.08 per Coin</p>
      </div>
      <button type="submit" onclick="window.location.href='../login'">Get Started</button>
    </div>
    <div id="credit_features">
      <span>Use Our Featured Features</span>
      <div id="credit_features_card">
        <div id="credit_features_icon">
          <i class="fa-solid fa-folder-open"></i>
        </div>
        <div id="credit_features_sidetext">
          <span>Lorem ipsum</span>
          <p>Lorem ipsum dolor amet</p>
        </div>
      </div>
      <div id="credit_features_card">
        <div id="credit_features_icon">
          <i class="fa-solid fa-folder-open"></i>
        </div>
        <div id="credit_features_sidetext">
          <span>Lorem ipsum</span>
          <p>Lorem ipsum dolor amet</p>
        </div>
      </div>
      <div id="credit_features_card">
        <div id="credit_features_icon">
          <i class="fa-solid fa-folder-open"></i>
        </div>
        <div id="credit_features_sidetext">
          <span>Lorem ipsum</span>
          <p>Lorem ipsum dolor amet</p>
        </div>
      </div>
      <div id="credit_features_card">
        <div id="credit_features_icon">
          <i class="fa-solid fa-folder-open"></i>
        </div>
        <div id="credit_features_sidetext">
          <span>Lorem ipsum</span>
          <p>Lorem ipsum dolor amet</p>
        </div>
      </div>
    </div>
    <div id="FAQ">
      <span>Frequently Asked Questions</span>
      <div id="FAQ_card">
        <span>Lorem ipsum dolor amet?</span>
        <p>exercitation amet minim in do sunt fugiat excepteur exercitation magna</p>
      </div>
      <div id="FAQ_card">
        <span>Lorem ipsum dolor amet?</span>
        <p>exercitation amet minim in do sunt fugiat excepteur exercitation magna</p>
      </div>
      <div id="FAQ_card">
        <span>Lorem ipsum dolor amet?</span>
        <p>exercitation amet minim in do sunt fugiat excepteur exercitation magna</p>
      </div>
    </div>
    <div id="final_cta">
      <span>Ready to Increase Your Productivity?</span>
      <p>Join the users who are already experiencing the benefits of Produse</p>
      <a href="../login">Get Started For Free</a>
    </div>
</div>
  </body>
</html>
    </End of: public/pricing/index.html>

      - style.css
    <Contents of: public/pricing/style.css>
body {
  font-family: "Roboto", Sans-Serif;
  padding:0;
  margin:0;
  margin-top:100px;
  background-color: #F5F6F8;
}
#top_navbar {
  z-index: 9999;
  isolation: isolate;
  position: fixed;
  top:0;
  left:0;
  right:0;
  margin: 0px;
  padding-top: 0px;
  padding-left: 8px;
  height: 60px;
  display: flex;
  align-items: center;
  background-color: white;
  color:black;
  justify-content: space-between;
  border-bottom:1px solid black;
  z-index: 1000;
  width: 100vw;
  box-sizing: border-box;
}

#navbar_container {
  max-width: 1100px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 5px;
}
#navbar_logo {
  width:26%;
  background-color: white;
}
#navbar_icon {
  display: flex;
  padding-right:13px;
  gap: 18px;
  align-items: center;
}
#sun_icon {
  font-size:20px;
  align-items: center;
}
#get_started_button {
  border-radius: 8px;
  background-color: #2682de;
  padding:8px;
  font-family: "Roboto", sans-serif;
  font-weight:bold;
  font-size: 15px;
  color:white;
  text-decoration:none;
}
#get_started_button:hover {
  background-color: grey;
}
#main_content {
  z-index:1;
}
#jawa {
  display:block;
  align-items: center;
  justify-content: center;
  border:0px solid black;
  text-align: center;
  margin: 70px 40px 50px 40px;
}
#jawa h1 {
  margin:0;
}
#jawa p {
  color: #555555;
  line-height: 1.6;
}
.pricing_card {
  display: flex;
  flex-direction: column;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding:25px;
  margin: 0 30px 40px 30px;
  border-radius: 10px;
  text-align:center;
  gap:15px;
  background-color: white;
  border:2px solid #d9d9d9;
}
.pricing_card:hover {
  border:2px solid #bfbfbf;
  cursor: pointer;
}
.pricing_card h5 {
  font-size: 22px;
  margin: 0;
}
#coin_num span {
  display:flex;
  gap:5px;
}
#coin_num span p {
  margin:0;
  font-size: 28px;
  border:0px solid black;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight:600;
  color:#1976D2;
  gap:50px;
}
#coin_num h5 {
  font-size: 26px;
  border:0px solid black;
  display: flex;
  align-items: center;
  justify-content: center;
  gap:0px;
}
.pricing_card p {
  margin: 0;
  font-size: 16px;
  color:#555555;
  margin-top:5px;
}
.pricing_card #price_subtext {
  color:#555555;
}
.pricing_card button {
  padding:12px;
  border:none;
  background-color: #f0f0f0;
  border-radius: 10px;
  font-weight: 450;
  font-size:18px;
  color:black;
}
.pricing_card button:hover {
  background-color: #e5e7eb;
  color:blaack;
  cursor: pointer;
} 
.pricing_card img {
  width:30px;
  margin:0;
}
.pricing_card span {
  display:flex;
  align-items: center;
  justify-content: center;
  gap:3px;
}
.pricing_card p {
  display:flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  margin:0;
  padding:0;
  gap:5px;
}
#procoin_img {
  width:25px;
  box-sizing: border-box;
}

#credit_features {
  border:0px solid black;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap:20px;
  margin:0;
}
#credit_features span {
  font-size: 26px;
  font-weight: 600;
  margin-bottom: 25px;
}
#credit_features_card {
  border: 0px solid black;
  padding:14px;
  background-color: white;
  border-radius:8px;
  display:flex;
  flex-direction: row;
  align-items: center;
  gap:15px;
  width:88%;
}
#credit_features_icon {
  background-color: #F5F6F8;
  padding:12px;
  border-radius:8px;
}
#credit_features_card i {
  font-size: 18px;
  color: #555555;
}
#credit_features_sidetext {
  border:0px solid black;
  display:flex;
  flex-direction: column;
  gap:6px;
}
#credit_features_sidetext span {
  font-size: 18px;
  margin:0;
  font-weight: 500;
}
#credit_features_sidetext p {
  color:#555555;
  margin:0;
  font-size:15px;
}
#FAQ {
  border:0px solid black;
  display: flex;
  justify-content: center;
  margin-top:40px;
  flex-direction: column;
  align-items: center;
}
#FAQ span {
  font-size: 26px;
  margin:0 0 40px 0;
  font-weight: 600;
}
#FAQ_card {
  display: flex;
  flex-direction:column;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  padding:20px 20px;
  margin: 0 30px 30px 30px;
  border-radius: 10px;
  text-align:center;
  align-items: flex-start;
  background-color: white;
  width:94%;
  box-sizing: border-box;
  border:0px solid black;
  text-align: left;
  justify-content: flex-start;
  gap:10px;
}
#FAQ_card span {
  margin:0 0 0 0;
  font-size:20px;
  font-weight:500;
}
#FAQ_card p {
  border: 0px solid black;
  text-align: left;
  justify-content: flex-start;
  margin:0;
  color:#555555;
  font-size: 16px;
  line-height:1.4;
}
#final_cta {
  display:flex;
  flex-direction:column;
  justify-content:center;
  text-align:center;
  background-color: #F9FDF4;
  padding:50px 30px;
}
#final_cta span {
  font-size:30px;
  margin:20px 60px;
  font-weight:750;
}
#final_cta p {
  margin:0 30px;
  font-size:18px;
  color:#555555;
  line-height:1.4;
}
#final_cta a {
  margin-top:30px;
  padding:15px 25px;
  font-size:18px;
  font-weight:600;
  border:none;
  border-radius:8px;
  background-color: #16a34a;
  color:white;
  cursor: pointer;
}
#final_cta a:hover {
  background-color: #15803d;
}
    </End of: public/pricing/style.css>

    [public/sign-up]
      [public/sign-up/email-verification]
        - index.html
    <Contents of: public/sign-up/email-verification/index.html>
<!DOCTYPE html>
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body>
        <div id="card">
                <img id="email_verification_img" src="../../image/inbox.png">
                <h3>Email Verification</h3>
                <p>We have sent a verification link to your email address. Please check your inbox and click on the link to verify your email</p>
                <div id="note">
                <div id="info_icon">
                <i class="fa-solid fa-circle-info"></i>
                </div>
                <p>If you did not receive the email, please check your spam folder or click the button below to resend the verification</p>
                </div>
                <div class="action-area" style="width: 100%; display: flex; justify-content: center; flex-direction: column; align-items: center;">
    <p id="countdown_text" style="display:none; color: #64748b; font-size: 14px; margin-top: 15px;">
        </p>
    <button type="button" id="resend_button">Resend Email</button>
</div>
        </div>
	<script src="verif.js"></script>
        </body>
</html>

    </End of: public/sign-up/email-verification/index.html>

        - style.css
    <Contents of: public/sign-up/email-verification/style.css>
body {
    font-family: 'Roboto', sans-serif;
    background-color: #F9F9F9;
    display: flex;
    justify-content: center;
}
#card {
    background: #fff;
    border-radius: 16px;
    padding:40px 38px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    text-align: center;
    margin: 50px 20px;
    display: flex;
    flex-direction: column;
    gap:30px;
    align-items: center;
}
#email_verification_img {
    width: 120px;
    margin-bottom: 10px;
}
#card h3 {
    font-size: 28px;
    margin: 0 0 0 0;
}
#card p {
    color: #555555;
    margin: 0 0 0 0;
    font-size: 14px;
    line-height: 1.5;
}
#note {
    background-color: #fefce8;
    border: 1px solid #facc15;
    border-radius: 8px;
    padding: 15px 15px;
    font-size: 14px;
    color: #92400e;
    margin:0 2px;
    display: flex;
    text-align: left;
}
#info_icon {
    margin-right: 10px;
    font-size: 16px;
    color:#92400e;
    flex-shrink: 0;
}
#note p {
    margin: 0;
    font-size:13px;
    color:#92400e
}
#card button {
    background-color: #1976D2;
    border:none;
    color:white;
    padding:12px 0;
    border-radius:10px;
    font-size: 15px;
    font-weight: 500;
    font-family: "Roboto", sans-serif;
    cursor: pointer;
    margin-top:10px;
    width: 50%;
}

    </End of: public/sign-up/email-verification/style.css>

        - verif.js
    <Contents of: public/sign-up/email-verification/verif.js>
document.addEventListener('DOMContentLoaded', () => {
    const email = localStorage.getItem('registered_email');
    const pElement = document.querySelector('#card > p');
    
    // Tampilkan email
    if (email && pElement) {
        pElement.innerHTML = `We have sent a verification link to <b>${email}</b>. Please check your inbox and click on the link to verify your email.`;
    } else if (!email) {
        alert("Session expired. Please register again.");
        window.location.href = '../index.html';
        return;
    }

    // Elemen UI
    // Kita buat elemen timer secara dinamis atau ambil dari HTML jika sudah diupdate
    let actionArea = document.querySelector('.action-area');
    
    // Jika user belum update HTML, kita inject elemen timer via JS biar ga error
    if (!actionArea) {
        const btn = document.getElementById('resend_button');
        const wrapper = document.createElement('div');
        wrapper.className = 'action-area';
        btn.parentNode.insertBefore(wrapper, btn);
        wrapper.appendChild(btn);
        
        const txt = document.createElement('p');
        txt.id = 'countdown_text';
        txt.style.cssText = "color: #64748b; font-size: 14px; margin-top: 15px;";
        txt.innerHTML = 'Resend available in <span id="timer">60</span>s';
        wrapper.insertBefore(txt, btn);
        actionArea = wrapper;
    }

    const resendBtn = document.getElementById('resend_button');
    const countdownText = document.getElementById('countdown_text');
    const timerSpan = document.getElementById('timer');
    let countdownInterval;

    // Fungsi Timer UI
    function startTimer(seconds) {
        if (seconds <= 0) {
            finishTimer();
            return;
        }

        // Sembunyikan tombol, Munculkan teks
        resendBtn.style.display = 'none';
        countdownText.style.display = 'block';
        countdownText.innerHTML = `Resend available in <span id="timer">${seconds}</span>s`;
        
        if (countdownInterval) clearInterval(countdownInterval);

        let timeLeft = seconds;
        countdownInterval = setInterval(() => {
            timeLeft--;
            const span = document.getElementById('timer');
            if(span) span.textContent = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(countdownInterval);
                finishTimer();
            }
        }, 1000);
    }

    function finishTimer() {
        countdownText.style.display = 'none';
        resendBtn.style.display = 'inline-block';
        resendBtn.disabled = false;
        resendBtn.textContent = "Resend Email";
        resendBtn.style.backgroundColor = "#1976D2";
        resendBtn.style.cursor = "pointer";
    }

    // === LOGIC UTAMA ===
    // 1. Saat halaman dimuat, kita asumsikan user baru saja register.
    // Default cooldown level 0 adalah 60 detik.
    startTimer(60);

    // 2. Event Klik
    resendBtn.addEventListener('click', async () => {
        // UI Loading
        resendBtn.disabled = true;
        resendBtn.textContent = "Processing...";
        resendBtn.style.backgroundColor = "#ccc";
        resendBtn.style.cursor = "not-allowed";

        try {
            const r = await fetch('/api/auth/resend-verify', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email: email })
            });

            const data = await r.json();

            // KASUS 1: Sukses Kirim
            if (r.ok) {
                alert(`Success! Email sent. Please check your inbox.`);
                // Server memberitahu durasi cooldown berikutnya lewat data.nextCooldown
                // Jika tidak ada data, default ke 60 (fallback)
                const nextWait = data.nextCooldown || 60;
                
                if (nextWait === -1) {
                    // Level max reached (walau aneh kalau sukses tapi -1, buat jaga2)
                    resendBtn.style.display = 'none';
                    countdownText.style.display = 'block';
                    countdownText.innerHTML = "<b style='color:red'>Maximum attempts reached.</b>";
                } else {
                    startTimer(nextWait);
                }
            } 
            
            // KASUS 2: Kena Rate Limit (429) - Terlalu Cepat
            else if (r.status === 429) {
                if (data.blocked) {
                    // Kena Blokir Permanen (Level 5)
                    resendBtn.style.display = 'none';
                    countdownText.style.display = 'block';
                    countdownText.innerHTML = "<b style='color:red'>Too many attempts. Please try again later.</b>";
                } else {
                    // Kena Cooldown (User mungkin refresh page untuk bypass timer)
                    // Ambil sisa waktu dari server (source of truth)
                    const serverRemaining = data.remainingSeconds || 60;
                    alert(`Too fast! Please wait ${serverRemaining} seconds.`);
                    startTimer(serverRemaining);
                }
            } 
            
            // KASUS 3: Error Lain
            else {
                throw new Error(data.message || 'Error occurred');
            }

        } catch (err) {
            alert(err.message);
            // Kembalikan tombol agar bisa dicoba (kecuali kalau logic diatas sudah menyembunyikannya)
            if (countdownText.style.display === 'none') {
                resendBtn.disabled = false;
                resendBtn.textContent = "Resend Email";
                resendBtn.style.backgroundColor = "#1976D2";
            }
        }
    });
});

    </End of: public/sign-up/email-verification/verif.js>

      - index.html
    <Contents of: public/sign-up/index.html>
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up</title>
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body.auth {
      background: #F9F9F9;
      min-height: 100vh;
      display: flex;
      align-items: center;
     justify-content: center;
      padding: 20px;
      font-family: "Roboto", sans-serif;
      color: #0f172a;
      overflow: hidden;
    }

    .auth-card {
      width: 100%;
      max-width: 420px;
      background: #fff;
      border-radius: 16px;
      padding: 28px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align: center;
    }

    .brand-link { display: inline-block; }
    .auth-logo { width: 55%; margin: 0 auto 8px; display: block; }
    .auth-title { font-size: 22px; margin: 6px 0; }
    .auth-sub { color: #555; margin-bottom: 16px; font-size: 14px; }

    form { width: 100%; margin: 0 auto; text-align: left; }
    .input-group { margin-bottom: 14px; }
    .input-row { display: flex; gap: 12px; }
    .input-row .input-group { flex: 1; }

    label {
      display: block;
      font-weight: 600;
      font-size: 13px;
      color: #374151;
      margin: 0 4px 6px;
    }
    .muted { color: #64748B; font-weight: 500; }

    input[type="text"], input[type="email"], input[type="password"] {
      width: 100%;
      padding: 11px 12px;
      font-size: 15px;
      border-radius: 10px;
      border: 1.5px solid #E5E7EB;
      outline: none;
      background: #fff;
      transition: .15s;
    }
    input:focus {
      border-color: #1976D2;
      box-shadow: 0 0 0 3px rgba(25,118,210,.15);
    }

    .password-field { position: relative; }
    .password-field input { padding-right: 84px; }
    #toggle_show {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      background: #1976D2;
      color: #fff;
      border-radius: 999px;
      padding: 6px 12px;
      font-weight: 700;
      cursor: pointer;
      font-size: 12px;
    }
    .hint { margin: 6px 6px 0; color: #64748B; font-size: 12px; }

    /* Password meter */
    .pw-meter {
      margin: 10px 6px 0;
      height: 8px;
      background: #EFEFEF;
      border-radius: 999px;
      overflow: hidden;
    }
    .pw-bar { height: 100%; width: 0%; background: #EF4444; transition: width .2s; }
    .pw-label { display: block; font-size: 12px; color: #64748B; margin: 6px 6px 0; }

    .checkbox {
      display: flex;
      gap: 10px;
      align-items: center;
      margin: 6px 4px 2px;
    }
    .checkbox input { width: 18px; height: 18px; }
    .checkbox a { color: #1976D2; text-decoration: none; }

    .primary-btn {
      width: 100%;
      margin-top: 14px;
      background: #1976D2;
      color: #fff;
      border: 0;
      padding: 12px 18px;
      font-size: 16px;
      font-weight: 700;
      border-radius: 999px;
      cursor: pointer;
    }
    .primary-btn:hover { opacity: .95; }

    .auth-divider {
      position: relative;
      margin: 20px 0;
      font-size: 13px;
      color: #64748B;
      text-align: center;
    }
    .auth-divider:before, .auth-divider:after {
      content: "";
      display: block;
      height: 1px;
      background: #E0E0E0;
      position: absolute;
      top: 50%;
      width: 40%;
    }
    .auth-divider:before { left: 0; }
    .auth-divider:after { right: 0; }

    .auth-ghost-btn {
      display: flex;
      padding: 10px 18px;
      border-radius: 8px;
      border: 1.5px solid #1976D2;
      color: #1976D2;
      text-decoration: none;
      font-weight: 600;
      justify-content: center;
      text-align: center;
      width: 100%;
      gap: 10px;
    }
    .auth-ghost-btn:hover { background: #E3F2FD; }
    #google { width: 18px; }

    .auth-terms {
      margin-top: 14px;
      color: #64748B;
      font-size: 12px;
      text-align: center;
    }
    .auth-terms a { color: #1976D2; text-decoration: none; font-weight: 600; }

    .hidden { display: none; }

    @media (max-width: 420px){
      .input-row { flex-direction: column; }
      .auth-card { padding: 20px; }
    }
  </style>
</head>
<body class="auth">
  <div class="auth-card">
    <a href="#" class="brand-link">
      <img src="../image/logo.png" alt="PRODUSE logo" class="auth-logo">
    </a>
    <h1 class="auth-title">Create your account</h1>
    <p class="auth-sub">Start your productivity workspace â€” free</p>

    <form id="signup_form" action="#" method="post" novalidate>
      <div class="input-group">
        <label for="name">Full name</label>
        <input id="name" name="name" type="text" placeholder="Full Name" required>
      </div>

      <div class="input-row">
        <div class="input-group">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required>
        </div>
        <div class="input-group">
          <label for="username">Username <span class="muted">(optional)</span></label>
          <input id="username" name="username" type="text" placeholder="username">
        </div>
      </div>

      <div class="input-group">
        <label for="password">Password</label>
        <div class="password-field">
          <input id="password" name="password" type="password" placeholder="8 character minimum" minlength="8" required>
          <button id="toggle_show" type="button">Show</button>
        </div>
        <div class="pw-meter"><div id="pw_bar" class="pw-bar"></div></div>
        <span id="pw_text" class="pw-label">Weak</span>
        <p class="hint">Use capital letters, symbols, and numbers</p>
      </div>

      <div class="input-group">
        <label for="confirm">Confirm password</label>
        <input id="confirm" name="confirm" type="password" placeholder="Repeat password" required>
      </div>

      <div class="checkbox">
        <input id="terms" type="checkbox" required>
        <label for="terms">I agree with  <a href="#">Terms</a> & <a href="#">Privacy</a>.</label>
      </div>

      <button class="primary-btn" type="submit">Create account</button>
    </form>

    <div class="auth-divider"><span>or</span></div>

    <a href="#" class="auth-ghost-btn"><img id="google" src="../image/google.png" alt="">Continue With Google</a>

    <p class="auth-terms">Already have an account? <a href="../login/index.html">Log in</a></p>

    <div id="auth-result" class="hidden"></div>
  </div>

  <script>
    // Toggle show/hide password (Biarkan kode ini tetap ada)
    const toggleBtn = document.getElementById("toggle_show");
    const passwordInput = document.getElementById("password");
    toggleBtn.addEventListener("click", () => {
      const type = passwordInput.getAttribute("type") === "password" ? "text" : "password";
      passwordInput.setAttribute("type", type);
      toggleBtn.textContent = type === "password" ? "Show" : "Hide";
    });

    // Password strength meter (Biarkan kode ini tetap ada)
    const pwBar = document.getElementById("pw_bar");
    const pwText = document.getElementById("pw_text");
    passwordInput.addEventListener("input", () => {
      const val = passwordInput.value;
      let strength = 0;
      if (val.length >= 8) strength++;
      if (/[A-Z]/.test(val)) strength++;
      if (/[0-9]/.test(val)) strength++;
      if (/[^A-Za-z0-9]/.test(val)) strength++;
      switch(strength) {
        case 0: case 1: pwBar.style.width = "25%"; pwBar.style.background = "#EF4444"; pwText.textContent = "Weak"; break;
        case 2: pwBar.style.width = "50%"; pwBar.style.background = "#F59E0B"; pwText.textContent = "Fair"; break;
        case 3: pwBar.style.width = "75%"; pwBar.style.background = "#3B82F6"; pwText.textContent = "Good"; break;
        case 4: pwBar.style.width = "100%"; pwBar.style.background = "#22C55E"; pwText.textContent = "Strong"; break;
      }
    });

    // ===== LOGIKA SUBMIT YANG DIPERBAIKI =====
    const form = document.querySelector('form');
    const submitBtn = document.querySelector('.primary-btn'); // Ambil tombol submit

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const name = document.querySelector('input[name="name"]').value.trim();
      const email = document.querySelector('input[name="email"]').value.trim();
      const username = document.querySelector('input[name="username"]')?.value.trim();
      const password = document.querySelector('input[name="password"]').value;

      // 1. Ubah Tombol jadi Loading agar user tidak klik 2x
      const originalBtnText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = "Creating Account & Sending Email...";
      submitBtn.style.backgroundColor = "#ccc";

      try {
        const r = await fetch('/api/auth/register', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          credentials: 'include',
          body: JSON.stringify({ name, email, username, password })
        });
        
        const data = await r.json();
        
        if (!r.ok) {
            throw new Error(data.message || 'Gagal daftar');
        }
        
        // Simpan email untuk ditampilkan di halaman verifikasi
        localStorage.setItem('registered_email', email);
        
        // Redirect sukses
        window.location.href = './email-verification/index.html';

      } catch (err) {
        alert(err.message);
        // Kembalikan tombol jika error
        submitBtn.disabled = false;
        submitBtn.textContent = originalBtnText;
        submitBtn.style.backgroundColor = "#1976D2";
      }
    });
  </script>
</body>
</html>

    </End of: public/sign-up/index.html>

    - style.css
    <Contents of: public/style.css>
* {
  box-sizing: border-box;
}
html {
  overflow-y: scroll;
  overflow-x: hidden;
}
body {
        background-color: #f9fafc;
  min-height: 100vh;
        padding-top: 60px;
      }
      
#top_navbar {
  z-index: 9999;
  isolation: isolate;
  position: fixed;
  top:0;
  left:0;
  right:0;
  margin: 0px;
  padding-top: 0px;
  padding-left: 8px;
  height: 60px;
  display: flex;
  align-items: center;
  background-color: white;
  color:black;
  justify-content: space-between;
  border-bottom:1px solid black;
  z-index: 1000;
  width: 100vw;
  box-sizing: border-box;
}

#navbar_container {
  max-width: 1100px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 5px;
}
#navbar_logo {
  width:26%;
  background-color: white;
}
#navbar_icon {
  display: flex;
  padding-right:13px;
  gap: 18px;
  align-items: center;
}
#sun_icon {
  font-size:20px;
  align-items: center;
}
#get_started_button {
  border-radius: 8px;
  background-color: #2682de;
  padding:8px;
  font-family: "Roboto", sans-serif;
  font-weight:bold;
  font-size: 15px;
  color:white;
  text-decoration:none;
}
#get_started_button:hover {
  background-color: grey;
}

#container1 {
  display: block;
  border:0px solid black;
  margin:0px 2px 0 2px;
  padding:30px 0 30px 0;
  background-color: white;
  text-align:center;
}
#start_for_free:hover {
  cursor: pointer;
  background-color: grey;
}
#dashboard_art {
  display: flex;
  justify-content: center;
  width: 50%;
  align-items: center;
}
#headline {
  font-family: "Bebas Neue", sans-serif;
  font-size: 50px;
  text-align: center;
  color: black;
  margin: 0 60px 0 60px;
  border:0px solid black;
  margin-bottom:0px;
}
h6 {
  margin-top: 0px;
  font-family: "Roboto", sans-serif;
  font-weight: bold;
  font-size: 22px;
  text-align: center;
  color: black;
  margin: 0 60px 0 60px;
  border:0px solid black;
} 
#subheadline {
  margin: 15px auto;
      max-width: 600px;
      font-size: 15px;
      letter-spacing: 1px;
      line-height: 1.6;
      color: #555;
      font-family: "Roboto", Sans-Serif;
}
#cta_button {
  display: flex;
  justify-content: center;
  gap:20px;
  border: 0px solid black;
}
#start_for_free {
  display: block;
  justify-content: center;
  align-items: center;
  padding: 12px 15px 0 15px;
  font-weight:600;
  font-size:15px;
  color: white;
  border-radius:10px;
  background-color: #1976D2;
  border: 0px;
  margin: 3px 0 3px 0;
  text-decoration: none;
  text-align: center;
}
#learn_more {
  background-color: white;
  justify-content: center;
  align-items: center;
  padding: 10px 18px 10px 18px;
  font-weight: 600;
  font-size: 15px;
  color: #2682de;
  border-radius:12px;
  background-color: 0;
  border: 2px solid #2682de;
  margin: 3px 0 3px 0;
}
#feature_section {
  background-color: #f9f9f9;
  padding-bottom: 60px;
  font-family: "roboto", Sans-Serif;
}
#feature_highlights_heading {
  margin:40px 0 18px 0;
  padding-top: 50px;
}
#feature_highlights_subheading {
  margin: 0 35px 8px 35px;
  font-family: "Roboto", Sans-Serif;
}
#card_container {
  display: flex;
  border:0px solid yellow;
  padding:5px 10px 5px 10px;
  gap: 15px;
}
#feature_highlights_card {
  flex:1;
  display: block;
  border: 0px solid blue;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  border-radius: 12px;
  gap:10px;
  text-align: left;
  padding: 12px;
}
#feature_header {
  display: flex;
  align-items: center;
  gap:8px;
  font-family: "Roboto", Sans-Serif;
  font-weight: 400;
  font-size: 20px;
}
#feature_text {
  font-family: "Oswald", Sans-Serif;
  font-weight: 300;
  font-size: 19px;
}
#green {
  font-size: 20px;
  border-radius: 50%;
  padding:10px;
  background-color: #E8F5E9;
  color: #4caf10; 
}
#blue {
  font-size: 20px;
  border-radius: 50%;
  padding:10px;
  background-color: #E3F2FD;
  color: #1976D2; 
}
#yellow {
  font-size: 20px;
  border-radius: 50%;
  padding:10px;
  background-color: #FFF8E1;
  color: #F9A825; 
}
#purple {
  font-size: 20px;
  border-radius: 50%;
  padding:10px;
  background-color: #E3F2FD;
  color: #6A1B9A; 
}
#feature_description {
  font-size: 15px;
  line-height: 18px;
  color: #515e5e;
  font-family: "Robotic", sans-serif;
  letter-spacing: 0.8px;
  word-spacing: 0.8px;
  font-weight: auto;
  margin-top: 5px;
}
#benefit_section {
  background-color:white;
  padding: 36px 0 0 0;
  border: 0px solid black;
  margin: 0 15px 60px 15px;
  font-family: "roboto", Sans-Serif;
}
#benefit_section h3 {
  font-size: 22px;
  color: #2E7D32;
}
#benefit_section p {
  color: #555555;
  border:0px solid black;
  margin: 15px;
  font-size: 15px;
  line-height: 1.6;
  font-weight: 400;
}
#benefit_list {
  display: block;
  align-items: left;
  justify-content: left;
  text-align: left;
  border: 0px solid black;
  margin: 0 12px 0 12px;
  line-height:20px;
}
#benefit_card {
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  border-radius:12px;
  border-left: 4px solid #2E7D32;
  background: #fff;
  padding: 18px;
  line-height:25px;
}
#benefit_title {
  font-size:20px;
  font-weight: 600;
  margin-bottom: 5px;
}
#benefit_description {
  color: #555;
}
#market_section {
  padding:26px 0 25px 0;
  background-color: #f9f9f9;
  border: 0px solid black;
  font-family: "Roboto", Sans-Serif;
  margin-bottom:0px;
}
#market_section_title {
  font-size: 22px;
  color: #1976D2;
}
#market_section_subtitle {
  font-family: "Roboto", Sans-Serif;
  color: #64748B;
  margin : 0 10px 50px 10px;
}
#market_card {
  background-color: white;
  padding-top: 15px;
  margin: 0 20px 30px 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  border-radius: 10px;
}
#teach_img {
  width: 50%;
}
#market_card_content {
  border:0px solid black;
  margin: 0 20px 0 20px;
  padding-bottom:20px;
  display: block;
  text-align: left;
  line-height: 25px;
}
#title {
  margin: 2px 0 0;
  font-size: 20px;
  color: black;
  margin-bottom:15px;
}
ul {
  margin: 6px 0 0;
  padding: 0;
  list-style: none;
  display: grid;
  gap: 6px;
  color: #555;
  font-size: .95rem;
}
li {
  position: relative;
  padding-left: 22px;
}
li::before {
  content: "âœ“";
  position: absolute;
  left: 0; top: 0.05rem;
  color: #22C55E;
  font-weight: 900;
}
#team_market_card {
  background-color: white;
  padding-top: 0px;
  margin: 0 20px 30px 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  border-radius: 10px;
}
#market_section_more {
  font-size: 22px;
  color: black;
  margin:40px 0 18px 0;
}
#more_market {
  font-family: "Roboto", Sans-Serif;
  color: #64748B;
  margin : 0 10px 20px 10px;
  padding-bottom: 0;
  line-height: 23px;
}
#final_cta {
  border:0px solid black;
  background-color: #F0FDF4;
  padding: 30px 0 30px 0;
  margin-top:0px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  font-family: "Roboto", Sans-Serif;
}
#final_cta h4 {
  font-size: 25px;
  margin: 0 30px 0 30px;
}
#get_started_for_free {
  border:0px;
  border-radius: 10px;
  background-color: #22C55E;
  padding:15px;
  font-family: "Roboto", sans-serif;
  font-weight:bold;
  font-size: 15px;
  color:white;
}

/* ===== Footer ===== */
#footer {
  background-color: #fff;
  border-top: 1px solid #e5e7eb;
  font-family: "Roboto", sans-serif;
  margin-top: 0px;
}

#footer_top {
  max-width: 1100px;
  margin: auto;
  padding: 30px 20px;
  display: flex;
  flex-wrap: wrap;
  gap: 30px;
  justify-content: space-between;
}

#footer_brand {
  max-width: 300px;
}
#footer_logo {
  width: 120px;
  margin-bottom: 10px;
}
#footer_brand p {
  font-size: 14px;
  color: #64748b;
  line-height: 1.5;
}

#footer_links {
  display: flex;
  gap: 40px;
}
.footer_col h4 {
  font-size: 15px;
  margin-bottom: 10px;
  font-weight: 600;
}
.footer_col ul {
  list-style: none;
  margin: 0;
  padding: 0;
}
.footer_col ul li {
  margin: 0px 0;
}
.footer_col ul li a {
  text-decoration: none;
  color: #555;
  font-size: 14px;
}
.footer_col ul li a:hover {
  color: #22C55E; /* emerald accent */
}

#footer_bottom {
  border-top: 1px solid #e5e7eb;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  max-width: 1100px;
  margin: auto;
}
#footer_bottom p {
  font-size: 13px;
  color: #64748b;
}
#footer_social a {
  margin-left: 12px;
  color: #555;
  font-size: 16px;
  text-decoration: none;
}
#footer_social a:hover {
  color: #22C55E;
}

/* Responsive */
@media (max-width: 768px) {
  #footer_top {
    flex-direction: column;
    gap: 20px;
  }
  #footer_links {
    flex-direction: column;
    gap: 20px;
  }
  #footer_bottom {
    flex-direction: column;
  }
    </End of: public/style.css>

    [public/template]
      - index.html
    <Contents of: public/template/index.html>
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css"href="../navbar/style.css">
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body>
        <script src="../navbar/navbarFunction.js"></script>
        <script src="../navbar/style.js"></script>
        <script src="../navbar/profile.js"></script>
    </body>
</html>
    </End of: public/template/index.html>

    [public/user]
      [public/user/dashboard]
        - index.html
    <Contents of: public/user/dashboard/index.html>
<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, intial-scale=1.0">
    <link rel="stylesheet" type="text/css"href="../../navbar/style.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="../../navbar/style.css">
      <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
 
  </head>
  <body>   
    <div id="main_navbar"></div>
    <div class="new_user_empty_dashboard">
    <div id="welcome_img_container">
    <img class="welcome_img" src="../../image/hello.png">
    </div>
    <h3>Welcome to your workspace,</h3> <h3>User ðŸ‘‹</h3>
    <br><br>
    <span id="subheadline">Let's make your day more organized. <br> Try some of our features</span>
    <br><br>
    <div id="card">
      <i id="icon" class="fa-solid fa-square-check"></i>
      <br><br>
      <h5>Lorem ipsum dolor amet</h5>
      <span id="subheadline_card">Lorem ipsum dolor amet</span>
      <br>
      <button id="get_started" type="submit">Get Started</button>
    </div>
    <div id="card">
      <i id="foldericon" class="fa-solid fa-folder-open"></i>
      <br><br>
      <h5>Lorem ipsum dolor amet</h5>
      <span id="subheadline_card">Lorem ipsum dolor amet</span>
      <br>
      <button id="get_started" type="submit">Get Started</button>
    </div>
    <div id="card">
      <i id="docicon" class="fa-solid fa-file-pen"></i>
      <br><br>
      <h5>Lorem ipsum dolor amet</h5>
      <span id="subheadline_card">Lorem ipsum dolor amet</span>
      <br>
      <button id="get_started" type="submit">Get Started</button>
    </div>
    <div id="other">
    <h5>OR...</h5>
    <span>Try other interesting features in the<br> side bar at the top left.</span>
    </div>
    <div id="last_card">
      <span>Quick Tips</span>
      <div id="quick_tips">
        <i id="lampu" class="fa-solid fa-lightbulb"></i>
        <a>lorem ipsum dolor amet</a>
        <br>
        <i id="lampu" class="fa-solid fa-lightbulb"></i>
        <a>lorem ipsum dolor amet</a>
        <br>
        <i id="lampu" class="fa-solid fa-lightbulb"></i>
        <a>lorem ipsum dolor amet</a>
      </div>
    </div>
    </div>
	<script src="../../navbar/navbarFunction.js"></script>
    <script src="../../navbar/style.js"></script>
<script src="../../navbar/profile.js"></script>
<script src="../../auth-check.js" defer></script>

  </body>
</html>

    </End of: public/user/dashboard/index.html>

        - style.css
    <Contents of: public/user/dashboard/style.css>
body {
  text-align: center;
  font-family: "Roboto", Sans-Serif;
  margin-bottom:30px;
  background-color: white;
  }

  #welcome_img_container {
    display: flex;
    justify-content: center;
    margin:40px 0 20px 0;
  } 
  .welcome_img {
  padding-top:60px;
    width:45%;
    border: 0px solid black;
  }
  
  h3 {
    font-size: 22px;
    display: inline;
    text-align: center;
  }
  #subheadline {
    display: block;
    color: #555555;
    font-size: 15px;
    margin-top: 22px;
  }
  #card {
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    margin:0 15px 20px 15px;
    padding: 30px;
    border-radius: 8px;
    background-color: ;
  }
  #icon {
    background-color: #E3F2FD;
  color: #1976D2; 
    font-size: 25px;
    border: 0px solid blue;
    padding: 18px 19px;
    border-radius:50%;
  }
  h5 {
    font-size: 20px;
    margin: 0;
  }
  #subheadline_card {
    display: block;
    color: #555555;
    font-size: 15px;
    margin-top: 15px;
    margin-bottom: 15px;
  }
  #get_started {
    background-color: white;
    border:1px solid rgba(0,0,0,0.2);
    font-weight: 500;
    font-size: 18px;
    padding: 10px;
    border-radius: 8px;
    width: 90%;
  }
  #foldericon {
  font-size: 20px;
  border-radius: 50%;
  padding:19px 16px 19px 19px;
  background-color: #E8F5E9;
  color: #4caf10; 
}
  #docicon {
  font-size: 20px;
  border-radius: 50%;
  padding:19px 14px 19px 21px;
  background-color: #FFF8E1;
  color: #FFC107; 
}
#other {
  margin:0;
  margin-bottom: 30px;
  margin-top:30px;
}
#other h5 {
  margin:0;
  margin-bottom: 8px;
  font-size: 30px;
}
#other span {
  font-size: 17px;
  color:#555555;
}
  #last_card {
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    margin:0 15px 20px 15px;
    padding: 20px;
    border-radius: 8px;
    text-align: left;
    background-color: #F9FDF4;
    
  }
  #last_card span {
    font-weight: 500;
    font-size: 19px;
    margin:0;
    margin-bottom:10px;
    display:block;
    gap:0;
  }
  #quick_tips {
    display: block;
    align-items: center;
    border:0px solid black;
    gap:1px;
    line-height: 2;
  }
  #lampu {
  font-size: 12px;
  border-radius: 50%;
  padding:5px 7px;
  background-color: #E8F5E9;
  color: green; 
}
#quick_tips a {
  margin-left: 5px;
  font-size: 15px;
  color:#555555;
}

#logout_confirmation {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  display: none;
  align-items: center;
  justify-content: center;
  background-color: rgba(0,0,0,0.3);
  z-index: 999999 !important;
}

#logout_confirmation_value {
  position: relative !important;
  background: white;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  padding: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}
    </End of: public/user/dashboard/style.css>

      [public/user/features]
        [public/user/features/reminder]
          - index.html
    <Contents of: public/user/features/reminder/index.html>
<!DOCTYPE html>
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="../../../navbar/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" 
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body>
        <div id="main_navbar"></div>

        <h5>Reminders</h5>
        <span class="subheading">Manage your reminders and schedule</span>

        <div class="reminder-card-area">

            <div class="reminder-card">
                <div class="reminder-top">

                    <span class="reminder-title">Reminder Title</span>

                    <span class="reminder-status status-scheduled">Scheduled</span>

                    <div class="reminder-dropdown">
                        <i class="fa-solid fa-ellipsis"></i>
                    </div>

                    <div class="reminder-dropdown-menu">
                        <span data-action="delete"><i class="fa-solid fa-trash"></i>Delete</span>
                        <span data-action="edit"><i class="fa-solid fa-pen-to-square"></i>Edit</span>
                    </div>
                </div>

                <p>Reminder description</p>
                
                <div class="reminder-time">
                    <span><i class="fa-regular fa-calendar"></i>dd month yyyy</span>
                    <span class="dot">â—</span>
                    <span><i class="fa-regular fa-clock"></i>hh:mm AM/PM</span>
                </div>

                <span class="reminder-lead">
                    <i class="fa-regular fa-bell"></i>x minutes before
                </span>

                <div class="reminder-method">
                    <span>Website Notification</span>
                    <span>Email</span>
                </div>

            </div>
        </div>
        
        <script src="../../../navbar/navbarFunction.js"></script>
        <script src="../../../navbar/style.js"></script>
        <script src="../../../navbar/profile.js"></script>
        <script src="reminder.js"></script>
    </body>
</html>
    </End of: public/user/features/reminder/index.html>

          [public/user/features/reminder/new]
            - index.html
    <Contents of: public/user/features/reminder/new/index.html>
<!DOCTYPE html>
<html>
  <head>
    <title>Schedule Reminder</title>
    <link rel="stylesheet" type="text/css"href="../../../../navbar/style.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
  </head>
  <body>
    <div style="display:block;">
    <div id="top_navbar">
      <button id="sidebar_icon"><i class="fa-solid fa-bars"></i></button>
      <img src="../../../image/logo.png">
      <div id="right_items">
        <a href="../dashboard/" class="fa-solid fa-house"></a>
      <i id="right_profile" class="fa-solid fa-user"></i>
      </div>
    </div>
    <div id="cik">
          <div id="profile_menu">
          <div id="profile_menu_value">
          <a href="../user/profile"><i class="fa-solid fa-user"></i><span>View Profile</span></a><br>
          <a href="../user/settings"><i class="fa-solid fa-gear"></i><span>Settings</span></a><br>
          <a href="../user"><i class="fa-solid fa-key"></i><span>Change Password</span></a><br>
          <hr>
          <a id="logout"><i class="fa-solid fa-right-from-bracket"></i><span>Log out</span></a>
          </div>
          </div>
          </div>
        
    </div>
    <div id="navbar_menu">
            <ul>
        <li><a href=#><i class="fas fa-home"></i> Dashboard</a></li>
        <li><a href=#><i class="fas fa-check-square"></i> Tasks</a></li>
        <li><a href=#><i class="fas fa-folder"></i> Projects</a></li>
        <li><a href=#><i class="fas fa-file-alt"></i> Documents</a></li>
        <li><a href="../reminder/"><i class="fas fa-bell"></i> Reminders</a></li>
        <li><a href=#><i class="fas fa-gear"></i> Settings</a></li>
      </ul>
    </div>
    <div id="navbar_bottom">
      <ul>
        <li><a href=#><i class="fas fa-crown"></i> Upgrade</a></li>
        <li id="quest"><a href=#><i class="fas fa-question"></i> Support</a></li>
      </ul>
    </div>
    <div id="card1">
      <span>Reminder Title</span>
      <br>
      <input type="text" id="title_input" placeholder="Enter the title of this reminder">
    </div>
    <div id="card">
      <span>Description</span>
      <br>
      <textarea id="description_input" placeholder="Add details of your reminder..."></textarea>
    </div>
    <div id="card">
      <span>Date & Time</span>
      <br>
      <br>
      <div id="grid">
      <div class="field">
        <label>Date</label>
        <select class="date">
          <option value="" disabled selected hidden>Select Date</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
  <option value="8">8</option>
  <option value="9">9</option>
  <option value="10">10</option>
  <option value="11">11</option>
  <option value="12">12</option>
  <option value="13">13</option>
  <option value="14">14</option>
  <option value="15">15</option>
  <option value="16">16</option>
  <option value="17">17</option>
  <option value="18">18</option>
  <option value="19">19</option>
  <option value="20">20</option>
  <option value="21">21</option>
  <option value="22">22</option>
  <option value="23">23</option>
  <option value="24">24</option>
  <option value="25">25</option>
  <option value="26">26</option>
  <option value="27">27</option>
  <option value="28">28</option>
  <option value="29">29</option>
  <option value="30">30</option>
  <option value="31">31</option>
</select>
        </option>
      </div>
      <div class="field">
        <label>Month</label>
        <select class="month">
          <option value="" disabled selected hidden>Select Month</option>
          <option>January</option>
          <option>February</option>
          <option>March</option>
          <option>April</option>
          <option>May</option>
          <option>June</option>
          <option>July</option>
          <option>August</option>
          <option>September</option>
          <option>October</option>
          <option>November</option>
          <option>December</option>
        </select>
      </div>
      <div class="field">
        <label>Year</label>
        <select class="year">
          <option value="" disabled selected hidden>Select Year</option>
          <option>2025</option>
          <option>2026</option>
          <option>2027</option>
          <option>2028</option>
          <option>2029</option>
          <option>2030</option>
        </select>
      </div>
      </div>
      <br>
      <div style="line-height:20px;">
        <label>Time</label>
        <input id="clock_time" type="time">
        <br>
        <small id="tz_hint" style="color:#555;display:block;margin-top:6px;"></small>
        <br>
    </div>
    </div>
    <div id="card">
  <span>Reminder me before (in minutes)</span><br><br>
  <input id="reminder_lead" type="number" min="0" value="0" placeholder="minutes (0, 5, 10, 30, 60)">
</div>
    <div id="card">
  <span>How would you like to be reminded?</span>

  <div class="reminder-option">
    <div class="option-left">
      <i class="fa-solid fa-bell"></i>
      <span>Website Notification</span>
    </div>
    <input type="checkbox">
  </div>

  <div class="reminder-option">
    <div class="option-left">
      <i class="fa-solid fa-envelope"></i>
      <span>Email</span>
    </div>
    <input type="checkbox">
  </div>

  <div class="reminder-option">
    <div class="option-left">
      <i class="fa-brands fa-whatsapp"></i>
      <span>WhatsApp</span>
    </div>
    <input type="checkbox">
  </div>

  <div class="reminder-option">
    <div class="option-left">
      <i class="fa-brands fa-telegram"></i>
      <span>SMS</span>
    </div>
    <input type="checkbox">
  </div>
</div>
<button type="submit" id="create_reminder">Create Reminders</button>
<div id="logout_confirmation">
      <div id="logout_confirmation_value">
        <img id="logout_img" src="../../../image/logout.png">
        <h5>Ready to log out?</h5>
        <span>Youâ€™ll be signed out from your workspace â€” donâ€™t worry, everything stays right where you left it.</span>
        <div id="logout_button">
          <button id="logout_cancel">Cancel</button>
          <button id="logout_submit">Log out</button>
        </div>
      </div>
    </div>
<script src="reminder.js"></script>
<script src="../../../../navbar/style.js"></script>
<script src="../../../../navbar/profile.js"></script>
  </body>
</html>

    </End of: public/user/features/reminder/new/index.html>

            - reminder.js
    <Contents of: public/user/features/reminder/new/reminder.js>
(() => {
  // Button buat trigger submit
  const btn = document.getElementById('create_reminder');
  if (!btn) return;

  // Elemen input form
  const titleInput = document.getElementById('title_input');
  const descInput  = document.getElementById('description_input');
  const dateSelect = document.querySelector('select.date');
  const monthSelect = document.querySelector('select.month');
  const yearSelect = document.querySelector('select.year');
  const clockInput = document.querySelector('input#clock_time[type="time"]');
  const leadInput  = document.getElementById('reminder_lead');

  // Helper ambil nilai input
  const pick = {
    title: () => titleInput?.value?.trim() || '',
    desc:  () => descInput?.value?.trim() || '',
    day:   () => dateSelect?.value || '',
    month: () => monthSelect?.value || '',
    year:  () => yearSelect?.value || '',
    clock: () => clockInput?.value || '',
    lead:  () => Number(leadInput?.value || 0)
  };

  // Autodetect timezone IANA dari browser
  function detectBrowserTZ() {
    try {
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
      return typeof tz === 'string' && tz ? tz : '';
    } catch {
      return '';
    }
  }

  // Tampilkan hint timezone di bawah input time
  const hint = document.getElementById('tz_hint');
  if (hint) {
    const tz = detectBrowserTZ();
    if (tz) {
      const now = new Date().toLocaleString([], { timeZone: tz });
      hint.textContent = `Timezone detected: ${tz} Â· Now: ${now}`;
    } else {
      hint.textContent = `Timezone cannot detected, use the default server`;
    }
  }

  // ====== Deteksi mode edit ======
  const params = new URLSearchParams(window.location.search);
  const reminderId = params.get('id');
  const isEditMode = !!reminderId;
  let editTz = ''; // simpan tz dari server kalau edit

  const MONTH_NAMES = [
    'January','February','March','April','May','June',
    'July','August','September','October','November','December'
  ];

  // Load data reminder kalau mode edit
  async function loadReminderForEdit() {
    if (!isEditMode) return;

    try {
      const r = await fetch(`/api/reminders/${reminderId}`);
      if (!r.ok) {
        console.error('Gagal mengambil data reminder untuk edit');
        return;
      }
      const data = await r.json();

      if (titleInput) titleInput.value = data.title || '';
      if (descInput) descInput.value = data.description || '';

      // scheduled_local: "YYYY-MM-DD HH:MM"
      if (data.scheduled_local && dateSelect && monthSelect && yearSelect && clockInput) {
        const parts = String(data.scheduled_local).split(' ');
        if (parts.length >= 2) {
          const [datePart, timePart] = parts;
          const [y, m, d] = datePart.split('-');
          yearSelect.value = y;
          dateSelect.value = String(parseInt(d, 10));

          const monthIndex = parseInt(m, 10) - 1;
          if (monthIndex >= 0 && monthIndex < MONTH_NAMES.length) {
            monthSelect.value = MONTH_NAMES[monthIndex];
          }

          clockInput.value = timePart.slice(0,5); // HH:MM
        }
      }

      if (typeof data.lead_minutes === 'number' && leadInput) {
        leadInput.value = data.lead_minutes;
      }

      // --- LOGIC UNTUK MENANDAI CHECKBOX SAAT EDIT ---
      // Kita cari channel apa yang tersimpan di database
      const savedChannel = data.channel || 'termux';
      
      // Cari elemen checkbox berdasarkan icon di dekatnya
      // 1. Checkbox WhatsApp (cari yang ada icon fa-whatsapp)
      const waCheckbox = document.querySelector('.reminder-option i.fa-whatsapp')
        ?.closest('.reminder-option')
        ?.querySelector('input[type="checkbox"]');
        
      // 2. Checkbox Notifikasi Biasa (cari yang ada icon fa-bell)
      const termuxCheckbox = document.querySelector('.reminder-option i.fa-bell')
        ?.closest('.reminder-option')
        ?.querySelector('input[type="checkbox"]');

      if (savedChannel === 'whatsapp') {
        if (waCheckbox) waCheckbox.checked = true;
      } else {
        // Default atau termux
        if (termuxCheckbox) termuxCheckbox.checked = true;
      }

      editTz = data.tz || '';

      if (btn) {
        btn.textContent = 'Update Reminder';
      }
    } catch (err) {
      console.error('Error load reminder for edit:', err);
    }
  }

  // ====== Submit handler (create / update) ======
  const submit = async () => {
    if (!pick.title()) return alert('Title wajib diisi');
    if (!pick.day() || !pick.month() || !pick.year()) return alert('Tanggal wajib diisi');
    if (!pick.clock()) return alert('Jam wajib diisi');

    // Gunakan tz dari server saat edit, kalau tidak ada pakai deteksi browser
    let tz = isEditMode && editTz ? editTz : detectBrowserTZ();
    if (!tz) {
      console.warn('Timezone tidak terdeteksi; backend akan fallback (jika disetel).');
    }

    // --- LOGIC BARU: DETEKSI PILIHAN CHANNEL ---
    
    // 1. Cari checkbox WhatsApp (navigasi dari icon .fa-whatsapp ke parent .reminder-option lalu ke input)
    const waCheckbox = document.querySelector('.reminder-option i.fa-whatsapp')
      ?.closest('.reminder-option')
      ?.querySelector('input[type="checkbox"]');

    // 2. Tentukan channel yang akan dikirim ke database
    // Defaultnya 'termux' (Notifikasi biasa)
    let selectedChannel = 'web';

    // Jika checkbox WhatsApp ada DAN dicentang, ubah jadi 'whatsapp'
    if (waCheckbox && waCheckbox.checked) {
        selectedChannel = 'whatsapp';
    }

    const payload = {
      title: pick.title(),
      description: pick.desc(),
      day: pick.day(),
      month: pick.month(),      // BE sudah handle angka / nama
      year: pick.year(),
      time: pick.clock(),       // "HH:MM" 24 jam
      timezone: tz,
      leadMinutes: pick.lead(),
      channel: selectedChannel  // <--- Bagian ini yang diubah (Dinadmis)
    };

    const url = isEditMode ? `/api/reminders/${reminderId}` : '/api/reminders';
    const method = isEditMode ? 'PUT' : 'POST';

    const r = await fetch(url, {
      method,
      headers: {
        'Content-Type': 'application/json',
        'X-Timezone': tz || ''   // header fallback untuk BE
      },
      body: JSON.stringify(payload)
    });

    const data = await r.json().catch(() => null);
    if (!r.ok) {
      throw new Error((data && data.message) || 'Gagal menyimpan reminder');
    }

    // Pesan sukses disesuaikan
    let msgSuccess = 'Reminder dibuat.';
    if (selectedChannel === 'whatsapp') {
        msgSuccess += ' Akan dikirim via WhatsApp Bot.';
    } else {
        msgSuccess += ' Akan diingatkan via Termux-API.';
    }

    alert(isEditMode ? 'Reminder berhasil diupdate.' : msgSuccess);
    
    // Redirect kembali ke list setelah sukses (opsional, agar user melihat hasilnya)
    // window.location.href = '../'; 
  };

  btn.addEventListener('click', () => {
    submit().catch(e => alert('Error: ' + e.message));
  });

  // Kalau mode edit, prefill form
  loadReminderForEdit();
})();

    </End of: public/user/features/reminder/new/reminder.js>

            - style.css
    <Contents of: public/user/features/reminder/new/style.css>
body {
  display: block;
  justify-content: center;
  padding-bottom: 50px;
  font-family: "Roboto", Sans-Serif;
  }
  #top_navbar {
    position: fixed;
  top:0;
  left:0;
  right:0;
  margin: 0px;
  padding: 0 15px;
  height: 50px;
  display: flex;
  align-items: center;
  background-color: white;
  color:black;
  justify-content: space-between;
  border-bottom:0px solid rgba(0,0,0,0.5);
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }
  #sidebar_icon {
    background-color: white;
    border: none;
  }
  img {
    width:26%;
    margin-left: 35px;
  }
  #right_items {
    display: flex;
    align-items: center;
    gap:15px;
  }
  .fa-solid.fa-house {
    font-size:19px;
  }
  .fa-solid.fa-bars {
    font-size: 25px;
  }
  .fa-solid.fa-user {
    border: 0px solid black;
    padding: 10px;
    border-radius:50px;
    background-color: lightgray;
    font-size: 16px;
  }
  #card1 {
  padding:20px 20px;
  margin: 80px 10px 20px 10px;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}
#card {
  padding:20px 20px;
  margin: 15px 10px 20px 10px;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}
#card span {
  font-family: "Roboto", Sans-Serif;
  font-weight: 500;
}
#card1 span {
  font-family: "Roboto", Sans-Serif;
  font-weight: 500;
}
#title_input {
  display: block;
  align-items: center;
  margin:0;
  margin-top:10px;
  padding:15px 10px;
  width:100%;
  height: 50px;
  border-radius: 8px;
  border: none;
  font-family: "Roboto", Sans-Serif;
  font-size: 15px;
  outline: none;
  background-color: #f9f9f9;
  white-space: nowrap;
  overflow-x: auto;
  overflow-x: hidden;
  box-sizing: border-box;
}
#title_input:focus {
  outline: 2px solid lightgray;
  background-color: white;
}
#description_input {
  margin:0;
  margin-top:10px;
  padding:15px 15px;
  width:90%;
  min-height: 60px;
  border-radius: 8px;
  border: none;
  font-family: "Roboto", Sans-Serif;
  font-size: 15px;
  outline: none;
  background-color: #f9f9f9;
  resize: vertical;
}
#description_input:focus {
  outline: 2px solid lightgray;
  background-color: white;
}
::placeholder {
  color: #999999;
}
#grid {
  justify-content: space-between;
  display: flex;
  flex-direction: row;
  gap:15px 20px;
}
label {
  color: #999999;
  font-size:15px;
}
.field {
  gap: 5px;
  display: flex;
  flex-direction: column;
}
select.date,
select.month,
select.year {
  box-sizing: border-box;
  outline:none;
  border:none;
  border-radius: 8px;
  width: 120px;
  padding: 10px 8px;
  background-color: #f9f9f9;
}
select:focus {
  outline: 2px solid lightgray;
}
#clock_time {
  width: 100%;
  height: 40px;
  background-color: #f9f9f9;
  border-radius: 8px;
  padding: 0 10px;
  box-sizing: border-box;
  border:none;
}
#clock_time:focus {
  outline: 2px solid lightgray;
}
select#remind_before {
  margin-top: 10px;
  box-sizing: border-box;
  outline:none;
  border:none;
  border-radius: 8px;
  width: 100%;
  height:40p;
  padding: 10px 8px;
  background-color: #f9f9f9;
}
#remind_before:focus {
  outline: 2px solid lightgray;
}
.reminder-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: #f8fafd;
  padding: 15px 20px;
  border-radius: 10px;
  margin-top: 15px;
  transition: background-color 0.2s ease, transform 0.1s ease;
  cursor: pointer;
}

.reminder-option:hover {
  background-color: #eef3fb;
  transform: scale(1.01);
}
.option-left {
  display: flex;
  align-items: center;
  gap: 15px;
}
.option-left i {
  font-size: 18px;
  color: #2f3640;
  width: 22px;
  text-align: center;
}
.option-left span {
  font-size: 15px;
  color: #1c1c1c;
}
.reminder-option input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: #4c9aff;
  cursor: pointer;
}
.reminder-option:has(input[type="checkbox"]:checked) {
  background-color: #e1f5fe;
  border: 1px solid #4c9aff;
}
#create_reminder {
  display: block;
  width: 90%;
  margin: auto;
  border:0px;
  border-radius: 10px;
  background-color: #22C55E;
  padding:15px;
  font-family: "Roboto", sans-serif;
  font-weight:bold;
  font-size: 15px;
  color:white;
}
#logout_confirmation {
  position: fixed;
  top:0;
  display:none;
  z-index: 9999 !important;
  background: transparent;
  background-color: rgba(0,0,0,0.3);
}

    </End of: public/user/features/reminder/new/style.css>

          - reminder.bak
    [Binary file â€” contents skipped]

          - reminder.js
    <Contents of: public/user/features/reminder/reminder.js>
document.addEventListener('DOMContentLoaded', function () {
  // =========================================
  // BAGIAN 1: SETUP ELEMENT & TEMPLATE
  // =========================================

  // Ambil card contoh sebagai template
  const template = document.querySelector('.reminder-card');
  if (!template) return;

  // Container tempat kita taruh semua card reminder
  const container = template.parentElement;

  // Template tetap terlihat (flex) tapi kita hide via CSS display none
  template.style.display = 'none';

  const MONTH_NAMES = [
    'January', 'February', 'March', 'April', 'May', 'June',
    'July', 'August', 'September', 'October', 'November', 'December'
  ];

  // Variabel untuk menyimpan ID yang sudah dinotifikasi di sesi ini agar tidak spam bunyi terus
  const notifiedSessionIds = new Set();

  // =========================================
  // BAGIAN 2: LOGIC UI (TAMPILAN)
  // =========================================

  // Tutup semua dropdown (titik tiga) di semua card
  function closeAllDropdownMenus() {
    const menus = container.querySelectorAll('.reminder-dropdown-menu');
    menus.forEach(m => {
      m.style.display = 'none';
    });
  }

  // Klik di mana saja â†’ tutup dropdown
  document.addEventListener('click', function () {
    closeAllDropdownMenus();
  });

  // Format tanggal untuk tampilan UI
  function formatDateTime(scheduledLocal) {
    if (!scheduledLocal) {
      return { dateText: '-', timeText: '-' };
    }

    const parts = scheduledLocal.split(' ');
    if (parts.length < 2) {
      return { dateText: scheduledLocal, timeText: '' };
    }

    const [datePart, timePart] = parts;
    const [y, m, d] = datePart.split('-');
    const [hh, mm] = timePart.split(':');

    const monthIndex = parseInt(m, 10) - 1;
    const monthName = MONTH_NAMES[monthIndex] || m;

    const dateText = `${parseInt(d, 10)} ${monthName} ${y}`;
    const timeText = `${hh}:${mm}`;

    return { dateText, timeText };
  }

  // Atur badge status
  function applyStatusBadge(statusEl, status) {
    const s = String(status || '').toLowerCase();
    statusEl.classList.remove('status-scheduled', 'status-fired', 'status-cancelled');

    if (s === 'fired') {
      statusEl.textContent = 'Fired';
      statusEl.classList.add('status-fired');
    } else if (s === 'cancelled') {
      statusEl.textContent = 'Cancelled';
      statusEl.classList.add('status-cancelled');
    } else {
      statusEl.textContent = 'Scheduled';
      statusEl.classList.add('status-scheduled');
    }
  }

  // Buat 1 card reminder dari 1 object data
  function createReminderCard(rem) {
    const card = template.cloneNode(true);
    card.style.display = 'flex';

    // Elemen-elemen dalam card
    const titleEl = card.querySelector('.reminder-title');
    const descEl = card.querySelector('p');
    const timeRow = card.querySelector('.reminder-time');
    const timeSpans = timeRow ? timeRow.querySelectorAll('span') : [];
    const dateSpan = timeSpans[0] || null;
    const timeSpan = timeSpans[2] || null;
    const leadSpan = card.querySelector('.reminder-lead');
    const methodWrapper = card.querySelector('.reminder-method');
    const dropdown = card.querySelector('.reminder-dropdown');
    const dropdownMenu = card.querySelector('.reminder-dropdown-menu');
    const deleteBtn = dropdownMenu ? dropdownMenu.querySelector('span[data-action="delete"]') : null;
    const editBtn = dropdownMenu ? dropdownMenu.querySelector('span[data-action="edit"]') : null;
    const statusEl = card.querySelector('.reminder-status');

    // Isi konten
    if (titleEl) titleEl.textContent = rem.title || 'Untitled reminder';
    if (descEl) descEl.textContent = rem.description || '';

    const { dateText, timeText } = formatDateTime(rem.scheduled_local);

    if (dateSpan) {
      dateSpan.innerHTML = `<i class="fa-regular fa-calendar"></i>${dateText}`;
    }

    if (timeSpan) {
      timeSpan.innerHTML = `<i class="fa-regular fa-clock"></i>${timeText}`;
    }

    if (leadSpan) {
      const lead = typeof rem.lead_minutes === 'number' ? rem.lead_minutes : 0;
      let label;
      if (lead === 0) {
        label = 'at exact time';
      } else {
        label = `${lead} minute${lead === 1 ? '' : 's'} before`;
      }
      leadSpan.innerHTML = `<i class="fa-regular fa-bell"></i>${label}`;
    }

    if (methodWrapper) {
      methodWrapper.innerHTML = '';
      const span = document.createElement('span');
      // Logic tampilan text method
      span.textContent = rem.channel === 'web' ? 'Website Notification' : (rem.channel === 'whatsapp' ? 'WhatsApp Bot' : 'Termux Notification');
      methodWrapper.appendChild(span);
    }

    // Badge status
    if (statusEl) applyStatusBadge(statusEl, rem.status);

    // Event dropdown (titik tiga)
    if (dropdown && dropdownMenu) {
      dropdown.addEventListener('click', function (e) {
        e.stopPropagation();
        const visible = dropdownMenu.style.display === 'flex';
        closeAllDropdownMenus();
        dropdownMenu.style.display = visible ? 'none' : 'flex';
      });
    }

    // Tombol DELETE
    if (deleteBtn) {
      deleteBtn.addEventListener('click', async function (e) {
        e.stopPropagation();
        const yakin = confirm('Yakin ingin menghapus reminder ini?');
        if (!yakin) return;

        try {
          const res = await fetch(`/api/reminders/${rem.id}`, {
            method: 'DELETE'
          });
          if (!res.ok) {
            alert('Gagal menghapus reminder');
            return;
          }
          card.remove();
        } catch (err) {
          console.error('Error delete reminder:', err);
          alert('Network error saat menghapus reminder');
        }
      });
    }

    // Tombol EDIT
    if (editBtn) {
      editBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        window.location.href = `new/?id=${rem.id}`;
      });
    }

    // Tambahkan card ke halaman
    container.appendChild(card);
  }

  // Pesan kosong
  function showEmptyMessage() {
    let empty = document.querySelector('.reminder-empty');
    if (!empty) {
      empty = document.createElement('p');
      empty.classList.add('reminder-empty');
      empty.style.margin = '0 15px 20px 15px';
      empty.style.color = '#555';
      empty.textContent = 'Belum ada reminder. Buat reminder baru dari halaman Task atau halaman ini.';
      container.appendChild(empty);
    }
  }

  function hideEmptyMessage() {
    const empty = document.querySelector('.reminder-empty');
    if (empty) empty.remove();
  }

  // Load data dari backend (Untuk Tampilan List)
  async function loadReminders() {
    try {
      const res = await fetch('/api/reminders');
      if (!res.ok) {
        console.error('Gagal mengambil reminders dari API');
        return;
      }

      const list = await res.json();

      // Hapus card lama kecuali template
      Array.from(container.querySelectorAll('.reminder-card')).forEach(el => {
        if (el !== template) el.remove();
      });

      if (!list || list.length === 0) {
        showEmptyMessage();
        return;
      }

      hideEmptyMessage();

      list.forEach(rem => createReminderCard(rem));
    } catch (err) {
      console.error('Error fetch /api/reminders:', err);
    }
  }

  // =========================================
  // BAGIAN 3: SISTEM NOTIFIKASI WEB (BARU)
  // =========================================

  // 1. Minta Izin Notifikasi Browser
  if ('Notification' in window) {
    if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {
      Notification.requestPermission().then(permission => {
        if (permission === 'granted') {
          console.log('Izin notifikasi Produse diberikan!');
        }
      });
    }
  }

  // 2. Fungsi Menampilkan Notifikasi
  function showBrowserNotification(title, body) {
    if (Notification.permission === 'granted') {
      new Notification(title, {
        body: body,
        icon: '/public/img/logo.png', // Pastikan ada gambar logo atau hapus baris ini
        requireInteraction: true // Notif tidak hilang sendiri sampai diklik
      });
      
      // Opsional: Mainkan audio jika ada
      // const audio = new Audio('/public/audio/notification.mp3');
      // audio.play().catch(e => {});
    }
  }

  // 3. Interval Checker (Cek setiap 10 detik)
  // Ini memisahkan logic render UI dan logic cek notifikasi agar UI tidak kedip-kedip
  setInterval(async () => {
    try {
      const res = await fetch('/api/reminders');
      if (!res.ok) return;
      const list = await res.json();
      const now = new Date();

      list.forEach(rem => {
        // Cek 1: Apakah channelnya WEB?
        // Cek 2: Apakah statusnya masih SCHEDULED?
        if (rem.channel === 'web' && rem.status === 'scheduled') {
          
          // Parsing Tanggal Manual (Format Server: "YYYY-MM-DD HH:MM")
          const [datePart, timePart] = rem.scheduled_local.split(' ');
          const [y, m, d] = datePart.split('-');
          const [hh, mm] = timePart.split(':');
          
          // Buat objek Date Javascript
          const scheduleTime = new Date(y, m - 1, d, hh, mm);
          
          // Hitung selisih waktu (miliseconds)
          const diff = now - scheduleTime;

          // LOGIKA FIRE:
          // Jika waktu sekarang >= waktu jadwal (diff >= 0)
          // DAN batas toleransi belum lewat 5 menit (diff < 300000 ms)
          // DAN belum dinotifikasi di sesi browser ini
          if (diff >= 0 && diff < 5 * 60 * 1000) {
            
            if (!notifiedSessionIds.has(rem.id)) {
              // FIRE!
              showBrowserNotification(rem.title, rem.description || 'Saatnya mengerjakan tugas ini!');
              
              // Tandai ID ini agar tidak bunyi lagi di looping berikutnya (spam preventer)
              notifiedSessionIds.add(rem.id);
              
              // Opsional: Refresh UI list agar status berubah (jika backend auto-update status)
              // loadReminders(); 
            }
          }
        }
      });
    } catch (e) {
      console.error('Silent check error', e);
    }
  }, 10000); // Jalan setiap 10.000ms (10 detik)

  // =========================================
  // INIT
  // =========================================
  loadReminders();
});

    </End of: public/user/features/reminder/reminder.js>

          - style.css
    <Contents of: public/user/features/reminder/style.css>
body {
    font-family: "Roboto", Sans-Serif;
    background: #F7F7F7;
    width:100%;
}

h5 {
    margin:70px 0 8px 15px;
    font-size: 28px;
}

/* subheading */
.subheading {
    display:flex;
    margin:0 15px 20px 15px;
    color:#555555;
}

/* reminder card area */
.reminder-card-area {
    display:flex;
    flex-direction: column;
    gap:20px;
}

/* card */
.reminder-card {
    background:white;
    padding:25px;
    margin:0 15px;
    border-radius:12px;
    display:flex;
    flex-direction: column;
    gap:12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.reminder-card:hover {
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

/* title */
.reminder-title {
    margin:0;
    font-weight:500;
    font-size:18px;
}

/* description paragraph */
.reminder-card p {
    margin:0;
    color: #555555;
    font-size: 14px;
    line-height: 1.5;
}

/* time section */
.reminder-time {
    display: flex;
    flex-direction: row;
    gap: 20px;
    color: #555555;
    font-size: 14px;
}

.dot {
    color: lightgray;
}

.reminder-time span {
    display: flex;
    gap: 8px;
}

/* lead time */
.reminder-lead {
    color: #555555;
    font-size: 14px;
    display:flex;
    gap:8px;
}

/* method tags */
.reminder-method {
    display: flex;
    flex-direction: row;
    gap: 10px;
}

.reminder-method span {
    color:green;
    background-color: #E8F5E9;
    padding:6px 12px;
    border-radius:6px;
    font-size: 12px;
    font-weight: 500;
}

.fa-regular.fa-bell {
    color:green;
}

/* top area */
.reminder-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    position: relative;
}

/* dropdown trigger */
.reminder-dropdown {
    cursor: pointer;
    font-size: 18px;
    color: #555;
}

/* dropdown menu */
.reminder-dropdown-menu {
    display: none;
    flex-direction: column;
    gap:8px;
    position: absolute;
    top: 30px;
    right: 0px;
    background: white;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    border-radius: 8px;
    padding: 10px 0;
    z-index: 50;
    width: 120px;
}

.reminder-dropdown-menu span {
    padding: 2px 15px 0px 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
}

.reminder-dropdown-menu span:hover {
    background-color: #f2f2f2;
}

/* icons */
.fa-solid.fa-trash {
    color: #E53935;
}

.fa-solid.fa-pen-to-square {
    color: #1E88E5;
}

/* status badges */
.reminder-status {
    margin-left: auto;
    font-size: 12px;
    padding: 2px 10px;
    border-radius: 999px;
    border: 1px solid transparent;
    flex-shrink: 0;
    margin-right:10px;
}

.reminder-status.status-scheduled {
    color: #1E88E5;
    background-color: #E3F2FD;
    border-color: #BBDEFB;
}

.reminder-status.status-fired {
    color: #388E3C;
    background-color: #E8F5E9;
    border-color: #C8E6C9;
}

.reminder-status.status-cancelled {
    color: #E53935;
    background-color: #FFEBEE;
    border-color: #FFCDD2;
}
    </End of: public/user/features/reminder/style.css>

        [public/user/features/task]
          - index.html
    <Contents of: public/user/features/task/index.html>
<!DOCTYPE html>
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="../../../navbar/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body id="task">
        <div id="main_navbar"></div>
      <div id="task_stats">
        <div id="task_stats_all">
          <div id="list_icon">
            <i class="fa-solid fa-list"></i>
          </div>
          <div id="task_list_value">
            <span id="top_span">Total Task</span>
            <span id="amount">10</span>
          </div>
        </div>
        <div id="horizontal_task_stats">
        <div id="task_stats_all">
          <div id="pending_icon">
            <i class="fa-regular fa-clock"></i>
          </div>
          <div id="task_pending_value">
            <span id="top_span">Pending</span>
            <span id="amount">10</span>
          </div>
        </div>
        <div id="task_stats_all">
          <div id="completed_icon">
            <i class="fa-solid fa-check"></i>
          </div>
          <div id="task_completed_value">
            <span id="top_span">Completed</span>
            <span id="amount">10</span>
          </div> 
        </div>
        </div>
      </div>
      <div id="task_type">
        <div id="task_type_part">All Task</div>
        <div id="task_type_part">Pending</div>
        <div id="task_type_part">Completed</div>
      </div>

      <!-- container kosong, nanti diisi task.js -->
      <div id="task_list"></div>

      <div id="create_task">
        <!-- kalau mau nanti kamu bisa isi tombol "New Task" di sini -->
      </div>

      <div id="reminder_example">
        <span>Task created successfully !</span>
        <p>Would you like to add a reminder for this task?</p>
        <div id="reminder_button">
        <button type="submit">Yes, add it</button>
        <button type="submit">No</button>
        </div>
      </div>
      <div id="reminder_modal">
        <div id="reminder_modal_content">
        <span>Add Reminder</span>
        <label>Title</label>
        <input type="text" id="reminder_title_input" placeholder="Enter the title of this reminder">
        <label>Description</label>
        <textarea id="reminder_description_input" placeholder="Add details of your reminder..."></textarea>
        <div id="grid">
      <div class="field">
        <label>Date</label>
        <select class="date">
          <option value="" disabled selected hidden>Select Date</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
  <option value="8">8</option>
  <option value="9">9</option>
  <option value="10">10</option>
  <option value="11">11</option>
  <option value="12">12</option>
  <option value="13">13</option>
  <option value="14">14</option>
  <option value="15">15</option>
  <option value="16">16</option>
  <option value="17">17</option>
  <option value="18">18</option>
  <option value="19">19</option>
  <option value="20">20</option>
  <option value="21">21</option>
  <option value="22">22</option>
  <option value="23">23</option>
  <option value="24">24</option>
  <option value="25">25</option>
  <option value="26">26</option>
  <option value="27">27</option>
  <option value="28">28</option>
  <option value="29">29</option>
  <option value="30">30</option>
  <option value="31">31</option>
</select>
        </option>
      </div>
      <div class="field">
        <label>Month</label>
        <select class="month">
          <option value="" disabled selected hidden>Select Month</option>
          <option>January</option>
          <option>February</option>
          <option>March</option>
          <option>April</option>
          <option>May</option>
          <option>June</option>
          <option>July</option>
          <option>August</option>
          <option>September</option>
          <option>October</option>
          <option>November</option>
          <option>December</option>
        </select>
      </div>
      <div class="field">
        <label>Year</label>
        <select class="year">
          <option value="" disabled selected hidden>Select Year</option>
          <option>2025</option>
          <option>2026</option>
          <option>2027</option>
          <option>2028</option>
          <option>2029</option>
          <option>2030</option>
        </select>
      </div>
      </div>
      <div style="line-height:20px;">
        <label>Time</label>
        <input id="clock_time" type="time">
        <br>
        <!-- <small id="tz_hint" style="color:#555;display:block;margin-top:6px;"></small> -->
    </div>
      <label>Reminder me before (in minutes)</label>
      <input type="number" id="reminder_lead_input" placeholder="Enter number">
      <div id="reminder_method">
        <div id="reminder_method_part">
        <input type="checkbox"><span>Website Notif</span>
        </div>
      </div>
      
    <div id="reminder_modal_button">
      <button type="submit">Create Reminder</button>
      <button type="submit">Cancel</button>
    </div>
        </div>
      </div>
<script src="../../../navbar/navbarFunction.js"></script>
        <script src="../../../navbar/style.js"></script>
        <script src="../../../navbar/profile.js"></script>
        <script src="task.js"></script>
        <script src="new/priority.js"></script>
        </body>
</html>
    </End of: public/user/features/task/index.html>

          [public/user/features/task/new]
            - index.html
    <Contents of: public/user/features/task/new/index.html>
<!DOCTYPE html>
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="../../../../navbar/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body>
        <div id="main_navbar">
            
        </div>
        <div id="first_card">
            <div id="title_value">
            <span>Task Title</span>
            <input id="title_input" type="text" spellcheck="false" placeholder="Enter task title">
            </div>
            <div id="title_value">
            <span>Description</span>
            <textarea id="description_input" spellcheck="false" type="text" placeholder="Enter your task description"></textarea>
            </div>
        </div>
        <div id="second_card">
            <div id="second_card_value">
            <span>Priority</span>
            <select id="priority">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
            </select>
            <div id="priority_label">
                <div id="label">
                    <div id="dot"></div> 
                    <span>
                    Low Priority
                    </span>
                </div>
            </div>
            <span id="category_label">Category</span>
            <select id="category">
                <option value="" disabled selected hidden>Select category</option>
                <option>Job</option>
                <option>Personal</option>
                <option>Study</option>
                <option>Health</option>
                <option>Finance</option>
                <option>Hoby</option>
                <option>Other</option>
            </select>
            </div>
        </div>
        <div id="third_card">
            <div id="third_card_value">
                <span>Deadline</span>
      <br>
      <br>
      <div id="grid">
      <div class="field">
        <label>Date</label>
        <select class="date">
          <option value="" disabled selected hidden>Select Date</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
  <option value="8">8</option>
  <option value="9">9</option>
  <option value="10">10</option>
  <option value="11">11</option>
  <option value="12">12</option>
  <option value="13">13</option>
  <option value="14">14</option>
  <option value="15">15</option>
  <option value="16">16</option>
  <option value="17">17</option>
  <option value="18">18</option>
  <option value="19">19</option>
  <option value="20">20</option>
  <option value="21">21</option>
  <option value="22">22</option>
  <option value="23">23</option>
  <option value="24">24</option>
  <option value="25">25</option>
  <option value="26">26</option>
  <option value="27">27</option>
  <option value="28">28</option>
  <option value="29">29</option>
  <option value="30">30</option>
  <option value="31">31</option>
</select>
        </option>
      </div>
      <div class="field">
        <label>Month</label>
        <select class="month">
  <option value="" disabled selected hidden>Select Month</option>
  <option value="1">January</option>
  <option value="2">February</option>
  <option value="3">March</option>
  <option value="4">April</option>
  <option value="5">May</option>
  <option value="6">June</option>
  <option value="7">July</option>
  <option value="8">August</option>
  <option value="9">September</option>
  <option value="10">October</option>
  <option value="11">November</option>
  <option value="12">December</option>
</select>
      </div>
      <div class="field">
        <label>Year</label>
        <select class="year">
          <option value="" disabled selected hidden>Select Year</option>
          <option>2025</option>
          <option>2026</option>
          <option>2027</option>
          <option>2028</option>
          <option>2029</option>
          <option>2030</option>
        </select>
      </div>
      </div>
      <br>
      <div style="line-height:20px;">
        <label>Time</label>
        <input id="time" type="time">
            </div>
        </div>
        </div>
        <br>
        
        <button type="submit" id="create_reminder">Create Task</button>
        <script src="../../../../navbar/navbarFunction.js"></script>
        <script src="../../../../navbar/style.js"></script>
        <script src="../../../../navbar/profile.js"></script>
        <script src="priority.js"></script>
    </body>
</html>
    </End of: public/user/features/task/new/index.html>

            - priority.js
    <Contents of: public/user/features/task/new/priority.js>
document.addEventListener('DOMContentLoaded', function() {
  // ===== Bagian styling priority badge (sama seperti sebelumnya) =====
  const prioritySelect = document.getElementById('priority');
  const labelStyle = document.getElementById('label');
  const dotStyle = document.getElementById('dot');
  const text = document.querySelector('#label span');

  function updatePriorityLabel(value) {
    if (!labelStyle || !text) return;

    if (value === 'low') {
      text.textContent = 'Low Priority';
      labelStyle.style.color = '#3CB93C';
      labelStyle.style.borderColor = '#A6ECA6';
      labelStyle.style.backgroundColor = '#E5FFE5';
      if (dotStyle) dotStyle.style.backgroundColor = '#3CB93C';
    } else if (value === 'medium') {
      text.textContent = 'Medium Priority';
      labelStyle.style.color = '#C68B00';
      labelStyle.style.borderColor = '#FFE499';
      labelStyle.style.backgroundColor = '#FFF4CC';
      if (dotStyle) dotStyle.style.backgroundColor = '#C68B00';
    } else if (value === 'high') {
      text.textContent = 'High Priority';
      labelStyle.style.color = '#E23C3C';
      labelStyle.style.borderColor = '#FFB2B2';
      labelStyle.style.backgroundColor = '#FFE5E5';
      if (dotStyle) dotStyle.style.backgroundColor = '#E23C3C';
    }
  }

  if (prioritySelect) {
    updatePriorityLabel(prioritySelect.value);
    prioritySelect.addEventListener('change', function() {
      updatePriorityLabel(prioritySelect.value);
    });
  }

  // ===== Bagian form create / edit task =====
  const title = document.getElementById('title_input');
  const desc = document.getElementById('description_input');
  const category = document.getElementById('category');
  const date = document.querySelector('.date');
  const month = document.querySelector('.month');
  const year = document.querySelector('.year');
  const time = document.getElementById('time');
  const button = document.getElementById('create_reminder');

  // Deteksi mode edit
  const params = new URLSearchParams(window.location.search);
  const taskId = params.get('id');
  const isEditMode = !!taskId;

  async function loadTaskForEdit() {
    if (!isEditMode) return;
    if (!(title && category && date && month && year && time)) return;

    try {
      const res = await fetch(`/api/tasks/${taskId}`);
      if (!res.ok) {
        console.error('Gagal mengambil data task untuk edit');
        return;
      }
      const data = await res.json();

      title.value = data.title || '';
      if (desc) desc.value = data.description || '';
      if (prioritySelect) {
        prioritySelect.value = data.priority || 'low';
        updatePriorityLabel(prioritySelect.value);
      }
      category.value = data.category || '';

      // due_date: "YYYY-MM-DD"
      if (data.due_date) {
        const [y, m, d] = data.due_date.split('-');
        date.value = d;
        month.value = parseInt(m, 10); // HTML month option value="1"... etc.
        year.value = y;
      }
      // due_time: "HH:MM"
      if (data.due_time) {
        time.value = data.due_time.slice(0, 5);
      }

      if (button) {
        button.textContent = 'Update Task';
      }
    } catch (err) {
      console.error('Error loadTaskForEdit:', err);
    }
  }

  if (button && title && category && date && month && year && time) {
    button.addEventListener('click', async function() {
      const titleVal = title.value.trim();
      const descVal = desc ? desc.value.trim() : '';
      const priorityVal = prioritySelect ? prioritySelect.value : 'low';
      const categoryVal = category.value;
      const dayVal = date.value;
      const monthVal = month.value;
      const yearVal = year.value;
      const timeVal = time.value;

      if (!titleVal) {
        alert('Title wajib diisi');
        return;
      }
      if (!categoryVal) {
        alert('Category wajib diisi');
        return;
      }
      if (!dayVal || !monthVal || !yearVal) {
        alert('Tanggal (dd/mm/yyyy) wajib diisi');
        return;
      }
      if (!timeVal) {
        alert('Time wajib diisi');
        return;
      }

      const payload = {
        title: titleVal,
        description: descVal,
        priority: priorityVal,
        category: categoryVal,
        day: dayVal,
        month: monthVal,
        year: yearVal,
        time: timeVal
      };

      const oldText = button.textContent;
      button.disabled = true;
      button.textContent = isEditMode ? 'Updating...' : 'Saving...';

            try {
        const url = isEditMode ? `/api/tasks/${taskId}` : '/api/tasks';
        const method = isEditMode ? 'PUT' : 'POST';

        const res = await fetch(url, {
          method,
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        // Coba baca JSON response (baik sukses maupun gagal)
        let data = null;
        try {
          data = await res.json();
        } catch (_) {
          data = null;
        }

        if (!res.ok) {
          let msg = isEditMode ? 'Gagal mengupdate task' : 'Gagal membuat task';
          if (data && data.message) msg = data.message;
          alert(msg);
        } else {
          // ====> SIMPAN task terakhir kalau mode CREATE, untuk dipakai di halaman task/index
          if (!isEditMode && data) {
            try {
              sessionStorage.setItem('lastCreatedTask', JSON.stringify(data));
            } catch (e) {
              console.warn('Gagal menyimpan lastCreatedTask ke sessionStorage', e);
            }
          }

          // Balik ke halaman list task
          window.location.href = '../';
        }
      } catch (err) {
        console.error('Error submit task:', err);
        alert('Network error saat submit task');
      } finally {
        button.disabled = false;
        button.textContent = oldText;
      }

    });
  }

  // Kalau mode edit, prefill form
  loadTaskForEdit();
});
    </End of: public/user/features/task/new/priority.js>

            - style.css
    <Contents of: public/user/features/task/new/style.css>
body {
    font-family: "Roboto", Sans-Serif;
}
#first_card {
    border:1px solid #e5e5e5;
    border-radius:12px;
    color:black;
    display:flex;
    flex-direction:column;
    gap:35px;
    padding:25px 25px;
    margin:70px 20px 20px 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}
#first_card span {
    font-size:15px;
    color:black;
    font-weight:500;
}
#title_value {
    display:flex;
    flex-direction:column;
    margin:0;
    gap:10px;
    width: 100%;
    height:100%;
}
#title_input {
    border-radius:8px;
    box-sizing:border-box;
    border:0px solid #e0e0e0;
    border-radius:8px;
    width:100%;
    height: 50px;
    margin:0;
    background-color: #f9f9f9;
    outline-color: lightgray;
    padding: 0 15px;
    font-size:15px;
}
#title_value input:focus {
    background-color:white;
}
#description_input {
    border-radius: 8px;
    box-sizing: border-box;
    width: 100%;
    height: 90px;
    margin: 0;
    background-color: #f9f9f9;
    outline-color: lightgray;
    padding: 10px 15px;
    font-size: 15px;
    border: 0;
     resize: none;
    line-height: 1.5;
    font-family: "Roboto", Sans-Serif;
}
#description_input:focus {
    background-color: white;
}
#second_card {
    border:1px solid #e5e5e5;
    border-radius:12px;
    color:black;
    display:flex;
    flex-direction:column;
    gap:35px;
    padding:25px 25px;
    margin:30px 20px 20px 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}
#second_card span {
  font-weight:500;
}
#second_card_value {
    display:flex;
    flex-direction:column;
    margin:0;
    gap:10px;
}
#second_card_value select {
    border-radius:8px;
    box-sizing:border-box;
    border:0px solid #e0e0e0;
    border-radius:8px;
    width:100%;
    height: 50px;
    margin:0;
    background-color: #f9f9f9;
    outline-color: lightgray;
    padding: 0 15px;
    font-size:15px;
}
#second_card_value select:focus {
    outline-color: lightgray;
    background-color:white;
}
#label {
    border:1px solid #e5e5e5;
    padding:5px 15px;
    border-radius: 30px;
    font-size: 13px;
    font-weight:500;
    background-color:#E5FFE5;
    color:#3CB93C;
    display:inline-flex;
    align-items: center;
}
#dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right:8px;
    background-color: #3CB93C;
    vertical-align: middle;
    
}
#category_label {
    margin-top:20px;
}
#third_card {
    border:1px solid #e5e5e5;
    border-radius:12px;
    color:black;
    display:flex;
    flex-direction:column;
    gap:35px;
    padding:25px 25px;
    margin:30px 20px 20px 20px;
}
#grid {
  justify-content: space-between;
  display: flex;
  flex-direction: row;
  gap:15px 20px;
  box-sizing: border-box;
}
label {
  color: #999999;
  font-size:15px;
}
.field {
  gap: 5px;
  display: flex;
  flex-direction: column;
}#grid {
  justify-content: space-between;
  display: flex;
  flex-direction: row;
  gap:15px 20px;
}
label {
  color: #999999;
  font-size:15px;
}
.field {
  gap: 5px;
  display: flex;
  flex-direction: column;
}
select.date,
select.month,
select.year {
  box-sizing: border-box;
  outline:none;
  border:none;
  border-radius: 8px;
  width: 120px;
  padding: 10px 8px;
  background-color: #f9f9f9;
}
select:focus {
  outline: 2px solid lightgray;
}
#time {
  width: 100%;
  height: 40px;
  background-color: #f9f9f9;
  border-radius: 8px;
  padding: 0 10px;
  box-sizing: border-box;
  border:none;
}
#time:focus {
  outline: 2px solid lightgray;
}
#create_reminder {
  display: block;
  width: 90%;
  margin: auto;
  border:0px;
  border-radius: 10px;
  background-color: #22C55E;
  padding:15px;
  font-family: "Roboto", sans-serif;
  font-weight:bold;
  font-size: 15px;
  color:white;
  margin-bottom: 50px;
}
    </End of: public/user/features/task/new/style.css>

          - style.css
    <Contents of: public/user/features/task/style.css>
body {
  font-family: "Roboto", Sans-Serif;
  background: #F7F7F7;
  width:100%;
}
#task_stats {
  display:flex;
  flex-direction:column;
  gap:15px;
  margin:70px 10px 0 10px;
}
#task_stats_all {
  background:white;
  padding:20px;
  flex:1;
  border-radius:8px;
  display:flex;
}
#task_list_value {
  display:flex;
  flex-direction:column;
  margin-left:15px;
  justify-content: center;
  gap:5px;
}
#task_pending_value {
  display:flex;
  flex-direction:column;
  margin-left:15px;
  justify-content: center;
  gap:5px;
}
#task_completed_value {
  display:flex;
  flex-direction:column;
  margin-left:15px;
  justify-content: center;
  gap:5px;
}
#top_span {
  font-size:14px;
  color:#555555;
  font-weight:400;
}
#amount {
  font-size:24px;
  font-weight:500;
}
#horizontal_task_stats {
  display:flex;
  gap:15px;
  justify-content: center;
}
#list_icon {
  background:#E3F2FD;
  color:#1976D2;
  display:inline-flex;
  padding:14px;
  border-radius:12px;
  font-size:18px;
  justify-content: center;
  align-items: center;
  aspect-ratio: 1 / 1;
  width:25px;
}
#pending_icon {
  background:#FFF8E1;
  color:#F9A825;
  display:inline-flex;
  padding:14px;
  border-radius:12px;
  font-size:18px;
  justify-content: center;
  align-items: center;
  width:25px;
}
#completed_icon {
  background:#E8F5E9;
  color:#1976D2;
  display:inline-flex;
  padding:14px;
  border-radius:12px;
  font-size:18px;
  justify-content: center;
  align-items: center;
  width:25px;
}
#task_type {
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  display:inline-flex;
  flex-direction: row;
  gap: 10px;
  padding:5px;
  border-radius: 10px;
  margin: 30px 10px 0px 10px;
  background:white;
  border:0px solid black;
}
#task_type_part {
  width:85px;
  display:flex;
  text-align:center;
  justify-content: center;
  padding:10px;
  border-radius:10px;
  font-weight:600;
  color:#374151;
  background: #FFFFFF;
}
#task_card {
  background:white;
  padding:25px;
  margin:20px 15px 0 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  border-radius:10px;
  position: relative;   /* penting */
  overflow: visible;    /* agar dropdown bisa keluar */
}
#main_value {
  flex-direction:row;
  display:flex;
  gap:15px;
  align-items:flex-start;
}
.round_check {
  appearance: none;
  -webkit-appearance: none;

  width: 22px;
  height: 22px;
  border: 2px solid lightgray;
  border-radius: 50%;
  cursor: pointer;
  position: relative;

  display: inline-flex;
  justify-content: center;
  align-items: center;
}
.round_check:hover {
  border-color: #3CB93C;
}
.round_check:checked {
  background: #3CB93C;
  border:2px solid #3CB93C;
}

.round_check:checked::after {
  content: "âœ”";
  color: white;
  font-size: 14px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -55%);
  
}
#two {
  width:100%;
}
#top_detail {
  display:flex;
  justify-content: space-between;
  align-items: center;
  border:0px solid black;
}
#main_value span {
  font-weight:500;
  font-size:18px;
  border:0px solid black;
  
}
#label {
    border:1px solid #e5e5e5;
    padding:3px 10px;
    border-radius: 30px;
    font-size: 10px;
    font-weight:500;
    background-color:#E5FFE5;
    color:#3CB93C;
    display:inline-flex;
    align-items: center;
}
#label span {
  font-size:13px;
}

#main_value p {
  color:#555555;
  line-height: 1.4;
  font-size:13px;
  border:0px solid black;
  padding:0px;
  margin-top:10px;
  margin-bottom:0;
  word-spacing:0px;
  letter-spacing:0.5px;
}
#bottom_detail {
  color:#555555;
  display:flex;
  flex-direction:row;
  justify-content: space-between;
  border:0px solid black;
  align-items: center;
  margin-top:10px;
  width:100%;
}
#bottom_info {
  display:flex;
  gap:25px;
  margin:0;
}
#bottom_detail span {
  font-size:14px;
  color:#555555;
  font-weight:400;
  display:flex;
  gap:6px;
  text-decoration-line: none;
}


#dropdown_menu {
  display: none;
  flex-direction: column;
  position: absolute;
  top: 40px;
  right: 15px;
  background: white;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  border-radius: 8px;
  padding: 10px 0;
  z-index: 50;
  gap: 2px;
  justify-content: flex-start;
  align-items: flex-start;
}

#dropdown_menu span {
  border-bottom:0px solid black;
  padding:2px 20px 0px 20px;
  display:flex;
  align-items: center;
  justify-content: flex-start;
  gap:10px;
  font-weight:400;
  font-size: 14px;
}
.fa-solid.fa-trash {
  color:#E53935;
  font-size:14px;
}
.fa-solid.fa-pen-to-square {
  color:#1E88E5;
  font-size:14px;
}
#reminder_example {
  background-color: white;
  padding: 15px 20px;
  border-radius: 12px;
  display:none;
  flex-direction: column;
  gap:8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  z-index: 100 ;
  position:fixed;
  bottom:20px;
  box-sizing: border-box;
  left: 10px;
  right: 10px;
}
#reminder_example span {
  font-size: 16px;
  font-weight: 500;
  margin:0;
}
#reminder_example p {
  font-size: 14px;
  color: black;
  margin:0;
}
#reminder_button {
  display:flex;
  gap:20px;
  margin-top:5px;
}
#reminder_button button {
  padding:6px 12px;
  border-radius: 8px;
  border:0px solid black;
  font-size:14px;
  cursor: pointer;
}
#reminder_button button:first-child {
  background-color: #1976D2;
  color: white;
  font-weight:600;
}
#reminder_button button:last-child {
  background-color: #E0E0E0;
  color: black;
  font-weight:600;
  width:60px;
}
#reminder_modal {
  display:none;
  flex-direction: column;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 200;
}
#reminder_modal_content {
  background: white;
  padding: 25px 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 380px;
  box-sizing: border-box;
  display:flex;
  flex-direction: column;
  gap:10px;
}
#reminder_modal_content span {
  margin:0;
  font-size: 18px;
  font-weight: 500;
  margin-bottom:10px;
}
#reminder_title_input {
  display: block;
  align-items: center;
  margin:0;
  margin-top:0px;
  padding:15px 10px;
  width:100%;
  height: 40px;
  border-radius: 8px;
  border: none;
  font-family: "Roboto", Sans-Serif;
  font-size: 15px;
  outline: none;
  background-color: #f9f9f9;
  white-space: nowrap;
  overflow-x: auto;
  overflow-x: hidden;
  box-sizing: border-box;
}
#reminder_title_input:focus {
  outline: 2px solid lightgray;
  background-color: white;
}
#reminder_description_input {
  margin:0;
  margin-top:0px;
  padding:15px 15px;
  width:90%;
  min-height: 40px;
  border-radius: 8px;
  border: none;
  font-family: "Roboto", Sans-Serif;
  font-size: 15px;
  outline: none;
  background-color: #f9f9f9;
  resize: none;
}
#reminder_description_input:focus {
  outline: 2px solid lightgray;
  background-color: white;
}
#grid {
  justify-content: space-between;
  display: flex;
  flex-direction: row;
  gap:15px 20px;
  box-sizing: border-box;
}
label {
  color: #999999;
  font-size:15px;
}
.field {
  gap: 5px;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
}
select.date,
select.month,
select.year {
  box-sizing: border-box;
  outline:none;
  border:none;
  border-radius: 8px;
  width: 120px;
  padding: 10px 8px;
  background-color: #f9f9f9;
  width:100%;
}
select:focus {
  outline: 2px solid lightgray;
}
#clock_time {
  width: 100%;
  height: 40px;
  background-color: #f9f9f9;
  border-radius: 8px;
  padding: 0 10px;
  box-sizing: border-box;
  border:0px solid black;
}
#clock_time:focus {
  outline: 2px solid lightgray;
}
#reminder_lead_input {
  width: 50%;
  height: 30px;
  background-color: #f9f9f9;
  border-radius: 8px;
  padding: 0 10px;
  box-sizing: border-box;
  border:0px solid black;
}
#reminder_lead_input:focus {
  outline: 2px solid lightgray;
}
#reminder_method {
  margin-top:10px;
  margin-bottom:0px;
  border: 0px solid black;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
#reminder_method_part {
  display: flex;
  align-items: center;
}
#reminder_method_part input {
  appearance: none;
  border: 1px solid black;
  border-radius: 50%;
  width: 14px;
  height:100%;
  aspect-ratio: 1 / 1;
}
#reminder_method_part input:checked {
  background-color: #1976D2;
  border: 1px solid #1976D2;
}
#reminder_method span {
  margin:0;
  font-weight:400;
  font-size:14px;
}
#reminder_modal_button {
  display:flex;
  justify-content: flex-end;
  gap:15px;
  margin-top:10px;
  border: 0px solid black;
}
#reminder_modal_button button {
  padding:8px 16px;
  border-radius: 8px;
  border:0px solid black;
  font-size:14px;
  cursor: pointer;
}
#reminder_modal_button button:first-child {
  background-color: #2E7D32;
  color: white;
  font-weight:600;
}
#reminder_modal_button button:last-child {
  background-color: #f5f5f5;
  color: #555;
  border:1px solid #cccccc;
  font-weight:600;
}
    </End of: public/user/features/task/style.css>

          - task.js
    <Contents of: public/user/features/task/task.js>
document.addEventListener('DOMContentLoaded', function () {
  const typeButtons = document.querySelectorAll('#task_type_part');
  const listContainer = document.getElementById('task_list');

  let tasks = []; // { id, status, el, checkbox }

  function updateStats() {
    const total = tasks.length;
    const pending = tasks.filter(t => t.status === 'pending').length;
    const completed = tasks.filter(t => t.status === 'completed').length;

    const totalEl = document.querySelector('#task_list_value #amount');
    const pendingEl = document.querySelector('#task_pending_value #amount');
    const completedEl = document.querySelector('#task_completed_value #amount');

    if (totalEl) totalEl.textContent = total;
    if (pendingEl) pendingEl.textContent = pending;
    if (completedEl) completedEl.textContent = completed;
  }

  function applyFilter(typeName) {
    tasks.forEach(t => {
      if (typeName === 'All Task' || typeName === 'All') {
        t.el.style.display = 'block';
      } else if (typeName === 'Pending') {
        t.el.style.display = (t.status === 'pending') ? 'block' : 'none';
      } else if (typeName === 'Completed') {
        t.el.style.display = (t.status === 'completed') ? 'block' : 'none';
      }
    });
  }

  function selectButton(btn) {
    typeButtons.forEach(b => {
      b.style.backgroundColor = '';
      b.style.color = '#374151';
      b.removeAttribute('data-selected');
    });

    btn.style.backgroundColor = '#2E7D32';
    btn.style.color = 'white';
    btn.setAttribute('data-selected', 'true');
  }

  function formatDate(isoDate) {
    if (!isoDate) return '';
    const parts = String(isoDate).split('-');
    if (parts.length !== 3) return isoDate;
    const [y, m, d] = parts;
    return `${d}/${m}/${y.slice(2)}`; // dd/mm/yy
  }

  function applyCompletedStyle(card, completed) {
    const titleEl = card.querySelector('#top_detail span');
    const descEl = card.querySelector('#main_value p');
    const bottomSpans = card.querySelectorAll('#bottom_info span');
    const priorityLabel = card.querySelector('#label');

    if (!titleEl || !descEl) return;

    if (completed) {
      titleEl.style.color = '#A1A1AA';
      titleEl.style.textDecorationLine = 'line-through';
      descEl.style.color = '#A1A1AA';
      bottomSpans.forEach(x => x.style.color = '#A1A1AA');
      if (priorityLabel) {
        priorityLabel.style.opacity = '0.7';
      }
    } else {
      titleEl.style.color = '';
      titleEl.style.textDecorationLine = '';
      descEl.style.color = '';
      bottomSpans.forEach(x => x.style.color = '');
      if (priorityLabel) {
        priorityLabel.style.opacity = '1';
      }
    }
  }

  function applyPriorityLabel(labelEl, priority) {
    if (!labelEl) return;
    const textSpan = labelEl.querySelector('span');
    const value = String(priority || 'low').toLowerCase();

    if (value === 'low') {
      if (textSpan) textSpan.textContent = 'Low';
      labelEl.style.color = '#3CB93C';
      labelEl.style.borderColor = '#A6ECA6';
      labelEl.style.backgroundColor = '#E5FFE5';
    } else if (value === 'medium') {
      if (textSpan) textSpan.textContent = 'Medium';
      labelEl.style.color = '#C68B00';
      labelEl.style.borderColor = '#FFE499';
      labelEl.style.backgroundColor = '#FFF4CC';
    } else if (value === 'high') {
      if (textSpan) textSpan.textContent = 'High';
      labelEl.style.color = '#E23C3C';
      labelEl.style.borderColor = '#FFB2B2';
      labelEl.style.backgroundColor = '#FFE5E5';
    }
  }

  function closeAllDropdownMenus() {
    if (!listContainer) return;
    const menus = listContainer.querySelectorAll('#dropdown_menu');
    menus.forEach(m => m.style.display = 'none');
  }

  function bindCardEvents(taskObj) {
    const card = taskObj.el;
    const checkbox = taskObj.checkbox;

    if (checkbox) {
      checkbox.addEventListener('change', async function () {
        const checked = checkbox.checked;
        const newStatus = checked ? 'completed' : 'pending';
        taskObj.status = newStatus;

        applyCompletedStyle(card, checked);
        updateStats();

        const active = document.querySelector('#task_type_part[data-selected="true"]');
        if (active) applyFilter(active.textContent.trim());

        try {
          const res = await fetch(`/api/tasks/${taskObj.id}/status`, {
            method: 'PATCH',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ status: newStatus })
          });
          if (!res.ok) {
            console.error('Gagal update status task di server');
          }
        } catch (err) {
          console.error('Error network saat update status task', err);
        }
      });
    }

    // Dropdown edit/delete
    const dropdown = card.querySelector('#dropdown');
    const dropdownMenu = card.querySelector('#dropdown_menu');
    const deleteBtn = dropdownMenu ? dropdownMenu.querySelector('span[data-action="delete"]') : null;
    const editBtn = dropdownMenu ? dropdownMenu.querySelector('span[data-action="edit"]') : null;

    if (dropdown && dropdownMenu) {
      dropdown.addEventListener('click', function (e) {
        e.stopPropagation();
        const isVisible = dropdownMenu.style.display === 'flex';
        closeAllDropdownMenus();
        dropdownMenu.style.display = isVisible ? 'none' : 'flex';
      });
    }

    if (deleteBtn) {
      deleteBtn.addEventListener('click', async function (e) {
        e.stopPropagation();
        const yakin = confirm('Yakin ingin menghapus task ini?');
        if (!yakin) return;

        try {
          const res = await fetch(`/api/tasks/${taskObj.id}`, {
            method: 'DELETE'
          });
          if (!res.ok) {
            alert('Gagal menghapus task');
            return;
          }
          // Hapus dari DOM & dari array
          card.remove();
          tasks = tasks.filter(t => t.id !== taskObj.id);
          updateStats();

          const active = document.querySelector('#task_type_part[data-selected="true"]');
          if (active) applyFilter(active.textContent.trim());
        } catch (err) {
          console.error('Error delete task:', err);
          alert('Network error saat menghapus task');
        }
      });
    }

    if (editBtn) {
      editBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        // Arahkan ke halaman /task/new dengan query ?id=...
        window.location.href = `new/?id=${taskObj.id}`;
      });
    }
  }

  function renderTasks(list) {
    if (!listContainer) return;

    listContainer.innerHTML = '';
    tasks = [];

    if (!list || list.length === 0) {
      const empty = document.createElement('p');
      empty.textContent = 'Belum ada task. Buat task baru di halaman /task/new.';
      empty.style.margin = '16px';
      empty.style.color = '#6B7280';
      listContainer.appendChild(empty);
      updateStats();
      return;
    }

    list.forEach(taskData => {
      const card = document.createElement('div');
      card.id = 'task_card';
      card.dataset.id = taskData.id;
      card.dataset.status = taskData.status || 'pending';

      const isCompleted = (taskData.status === 'completed');

      card.innerHTML = `
        <div id="main_value">
          <div id="1">
            <input type="checkbox" class="round_check" ${isCompleted ? 'checked' : ''}>
          </div>
          <div id="two">
            <div id="top_detail">
              <span>${taskData.title}</span>
              <div id="priority_label">
                <div id="label">
                  <span></span>
                </div>
              </div>
            </div>
            <p>${taskData.description || ''}</p>
            <div id="bottom_detail">
              <div id="bottom_info">
                <span><i class="fa-regular fa-folder"></i>${taskData.category}</span>
                <span><i class="fa-regular fa-calendar"></i>${formatDate(taskData.due_date)}</span>
                <span><i class="fa-regular fa-clock"></i>${taskData.due_time}</span>
              </div>
              <div id="dropdown">
                <a class="fa-solid fa-ellipsis"></a>
              </div>
            </div>
          </div>
        </div>
        <div id="dropdown_menu">
          <span data-action="delete"><i class="fa-solid fa-trash"></i>Delete</span>
          <hr>
          <span data-action="edit"><i class="fa-solid fa-pen-to-square"></i>Edit</span>
        </div>
      `;

      listContainer.appendChild(card);

      const checkbox = card.querySelector('.round_check');
      const labelEl = card.querySelector('#label');

      applyPriorityLabel(labelEl, taskData.priority);
      applyCompletedStyle(card, isCompleted);

      const taskObj = {
        id: taskData.id,
        status: taskData.status || 'pending',
        el: card,
        checkbox
      };

      tasks.push(taskObj);
      bindCardEvents(taskObj);
    });

    updateStats();

    const active = document.querySelector('#task_type_part[data-selected="true"]');
    if (active) {
      applyFilter(active.textContent.trim());
    } else {
      applyFilter('All Task');
    }

    // Tutup dropdown jika klik di luar
    document.addEventListener('click', function () {
      closeAllDropdownMenus();
    });
  }

  async function loadTasksFromServer() {
    try {
      const res = await fetch('/api/tasks');
      if (!res.ok) {
        console.error('Gagal mengambil tasks dari API');
        return;
      }
      const data = await res.json();
      renderTasks(data);
    } catch (err) {
      console.error('Error fetch /api/tasks:', err);
    }
  }

  // Setup button filter di atas
  if (typeButtons.length > 0) {
    selectButton(typeButtons[0]);
    applyFilter('All Task');

    typeButtons.forEach(btn => {
      btn.addEventListener('click', function () {
        selectButton(btn);
        applyFilter(btn.textContent.trim());
      });
    });
  }

  loadTasksFromServer();

  // ====== REMINDER INLINE & MODAL SETUP ======
  const reminderInline = document.querySelector('#reminder_example');
  const reminderAccept = document.querySelector('#reminder_button button:first-child');
  const reminderDecline = document.querySelector('#reminder_button button:last-child');
  const reminderModal = document.querySelector('#reminder_modal');
  const reminderCancel = document.querySelector('#reminder_modal_button button:last-child');
  const reminderCreateBtn = document.querySelector('#reminder_modal_button button:first-child');

  // Input di dalam modal
  const reminderTitleInput = document.getElementById('reminder_title_input');
  const reminderDescInput = document.getElementById('reminder_description_input');
  const reminderDateSelect = document.querySelector('#reminder_modal select.date');
  const reminderMonthSelect = document.querySelector('#reminder_modal select.month');
  const reminderYearSelect = document.querySelector('#reminder_modal select.year');
  const reminderTimeInput = document.getElementById('clock_time');
  const reminderLeadInput = document.getElementById('reminder_lead_input');
  const reminderMethodCheckboxes = document.querySelectorAll('#reminder_method_part input[type="checkbox"]');

  // ===== Helper timezone (dipakai saat kirim reminder) =====
  function detectBrowserTZ() {
    try {
      const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
      return typeof tz === 'string' && tz ? tz : '';
    } catch {
      return '';
    }
  }

  // Sembunyikan semua reminder UI di awal
  if (reminderInline) reminderInline.style.display = 'none';
  if (reminderModal) reminderModal.style.display = 'none';

  // ===== Ambil task yang baru saja dibuat dari sessionStorage =====
  let lastCreatedTask = null;
  try {
    const raw = sessionStorage.getItem('lastCreatedTask');
    if (raw) {
      lastCreatedTask = JSON.parse(raw);
      // Tampilkan inline bar hanya kalau memang ada task baru
      if (reminderInline) reminderInline.style.display = 'flex';
    }
  } catch (e) {
    console.warn('Gagal parse lastCreatedTask dari sessionStorage', e);
  }

  // Mapping nomor bulan â†’ nama bulan (sesuai option di <select class="month">)
  const MONTH_NAMES = [
    'January','February','March','April','May','June',
    'July','August','September','October','November','December'
  ];

  // Prefill form reminder dari data task
  function prefillReminderFromTask(task) {
    if (!task) return;

    if (reminderTitleInput) {
      reminderTitleInput.value = task.title || '';
    }
    if (reminderDescInput) {
      reminderDescInput.value = task.description || '';
    }

    if (task.due_date && reminderDateSelect && reminderMonthSelect && reminderYearSelect) {
      // task.due_date = "YYYY-MM-DD"
      const parts = String(task.due_date).split('-'); // [yyyy, mm, dd]
      if (parts.length === 3) {
        const year = parts[0];
        const monthNum = parseInt(parts[1], 10); // 1..12
        const dayNum = parseInt(parts[2], 10);   // 1..31

        reminderYearSelect.value = year;
        reminderDateSelect.value = String(dayNum); // select.date pakai "1","2",...

        if (monthNum >= 1 && monthNum <= 12) {
          const monthName = MONTH_NAMES[monthNum - 1];
          reminderMonthSelect.value = monthName;
        }
      }
    }

    if (task.due_time && reminderTimeInput) {
      // task.due_time = "HH:MM"
      reminderTimeInput.value = String(task.due_time).slice(0, 5);
    }

    if (reminderLeadInput) {
      reminderLeadInput.value = 0; // default lead 0 menit
    }

    if (reminderMethodCheckboxes && reminderMethodCheckboxes.length) {
      reminderMethodCheckboxes.forEach(cb => { cb.checked = false; });
    }
  }

  // ===== Event handler tombol di inline bar dan modal =====
  if (reminderAccept && reminderModal) {
    reminderAccept.addEventListener('click', () => {
      // Prefill setiap kali user klik "Yes, add it"
      prefillReminderFromTask(lastCreatedTask);
      reminderModal.style.display = 'flex';
    });
  }

  if (reminderDecline && reminderInline) {
    reminderDecline.addEventListener('click', () => {
      reminderInline.style.display = 'none';
      // Task sudah tidak butuh reminder â†’ hapus flag
      try { sessionStorage.removeItem('lastCreatedTask'); } catch (_) {}
    });
  }

  if (reminderCancel && reminderModal) {
    reminderCancel.addEventListener('click', () => {
      reminderModal.style.display = 'none';
    });
  }

  // ===== Submit reminder dari modal ke /api/reminders =====
  if (reminderCreateBtn) {
    reminderCreateBtn.addEventListener('click', async () => {
      const title = reminderTitleInput ? reminderTitleInput.value.trim() : '';
      const description = reminderDescInput ? reminderDescInput.value.trim() : '';
      const day = reminderDateSelect ? reminderDateSelect.value : '';
      const month = reminderMonthSelect ? reminderMonthSelect.value : '';
      const year = reminderYearSelect ? reminderYearSelect.value : '';
      const time = reminderTimeInput ? reminderTimeInput.value : '';
      const lead = reminderLeadInput ? Number(reminderLeadInput.value || 0) : 0;

      if (!title) {
        alert('Title wajib diisi');
        return;
      }
      if (!day || !month || !year) {
        alert('Tanggal wajib diisi');
        return;
      }
      if (!time) {
        alert('Jam wajib diisi');
        return;
      }

      const tz = detectBrowserTZ();
      if (!tz) {
        console.warn('Timezone tidak terdeteksi; backend akan fallback/menolak sesuai konfigurasi.');
      }

      const payload = {
        title,
        description,
        day,
        month,       // nama bulan, BE kamu sudah handle
        year,
        time,        // "HH:MM"
        timezone: tz,
        leadMinutes: lead,
        channel: 'termux' // sementara tetap gunakan termux
      };

      try {
        const res = await fetch('/api/reminders', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-Timezone': tz || ''
          },
          body: JSON.stringify(payload)
        });

        let data = null;
        try {
          data = await res.json();
        } catch (_) {
          data = null;
        }

        if (!res.ok) {
          throw new Error((data && data.message) || 'Gagal membuat reminder');
        }

        alert('Reminder berhasil dibuat. Notifikasi akan dikirim via Termux-API.');

        // Tutup UI & bersihkan flag
        if (reminderModal) reminderModal.style.display = 'none';
        if (reminderInline) reminderInline.style.display = 'none';
        try { sessionStorage.removeItem('lastCreatedTask'); } catch (_) {}
      } catch (err) {
        console.error('Error create reminder:', err);
        alert('Error: ' + err.message);
      }
    });
  }
});
    </End of: public/user/features/task/task.js>

        [public/user/features/writing]
          [public/user/features/writing/journals]
          [public/user/features/writing/notes]
            - home.js
    <Contents of: public/user/features/writing/notes/home.js>
document.addEventListener('DOMContentLoaded', () => {
    const tabFilter = document.querySelectorAll('.filter');
    tabFilter[0].style.backgroundColor = '#2e7d32';
    tabFilter[0].style.color = 'white';

    tabFilter.forEach(a => {
        tabFilter.forEach(b => {
        a.addEventListener('click', () => {
            b.style.backgroundColor = '#f7f7f7';
            b.style.color = '#374151';
            a.style.backgroundColor = '#2e7d32';
            a.style.color = 'white';
        })
        });
    });
    
});
    </End of: public/user/features/writing/notes/home.js>

            - index.html
    <Contents of: public/user/features/writing/notes/index.html>
<!DOCTYPE html>
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="../../../../navbar/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body>
        <div id="main_navbar"></div>
        <div id="workspace_toolbar">
          <div id="search">
            <input type="search" placeholder="Search note or journal">
            <i class="fa-solid fa-magnifying-glass"></i>
          </div>
          <div id="filter_bar">
            <div class="filter">
              <span><i class="fa-solid fa-list"></i>All</span>
            </div>
            <div class="filter">
              <span><i class="fa-solid fa-pencil"></i>Notes</span>
            </div>
            <div class="filter">
              <span><i class="fa-solid fa-book"></i>Journal</span>
            </div>
            <div class="filter">
              <span><i class="fa-solid fa-thumbtack"></i>Pinned</span>
            </div>
          </div>
        </div>
        <button id="tes" type="submit">Tes</button>
        <div id="notes_card">
          <div id="notes_top">
            <span>Example</span>
            <div id="notes_icon">
            <i class="fa-solid fa-pencil"></i>
              </div>
          </div>
          <div id="notes_middle">
            <p>qui laborum elit Lorem consequat veniam</p>
          </div>
          <div id="notes_bottom">
            <p>Hari ini</p>
            <div id="right_notes_bottom">
              <i class="fa-regular fa-calendar"></i>
            <p>25 Nov 2025</p>
            </div>
          </div>
        </div>
<script src="../../../../navbar/navbarFunction.js"></script>
        <script src="../../../../navbar/style.js"></script>
        <script src="../../../../navbar/profile.js"></script>
        <script src="home.js"></script>
        <script src="new/notes.js"></script>
        </body>
</html>
    </End of: public/user/features/writing/notes/index.html>

            [public/user/features/writing/notes/new]
              - index.html
    <Contents of: public/user/features/writing/notes/new/index.html>
<!DOCTYPE html>
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="../../../../../navbar/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
    </head>
    <body>
        <div id="main_navbar"></div>
        <div id="main_card">
            <div id="card_header">
                <i class="fa-solid fa-arrow-left"></i>
                <span>Tuesday 25 November 2025</span>
                <div id="right_card_header">
                <i class="fa-solid fa-thumbtack"></i>
                <button type="submit">Save</button>
                </div>
            </div>
            <input type="text" placeholder="Notes title">
            <textarea placeholder="Start writing your notes here..."></textarea>
        </div>
<script src="../../../../../navbar/navbarFunction.js"></script>
        <script src="../../../../../navbar/style.js"></script>
        <script src="../../../../../navbar/profile.js"></script>
        <script src="notes.js"></script>
        </body>
</html>
    </End of: public/user/features/writing/notes/new/index.html>

              - notes.js
    <Contents of: public/user/features/writing/notes/new/notes.js>
document.addEventListener('DOMContentLoaded', () => {
  console.log('jawa');
  const title = document.querySelector('#main_card input');
  const notes = document.querySelector('#main_card textarea');
  const save = document.querySelector('#card_header button');
  const date = new Date().toLocaleDateString('id-ID', {
        day: 'numeric', month: 'short', year: 'numeric'
      });
    const notesCardValue = `
    <div id="notes_top">
            <span>${title}</span>
            <div id="notes_icon">
            <i class="fa-solid fa-pencil"></i>
              </div>
          </div>
          <div id="notes_middle">
            <p>${notes}</p>
          </div>
          <div id="notes_bottom">
            <p>Hari ini</p>
            <div id="right_notes_bottom">
              <i class="fa-regular fa-calendar"></i>
            <p>${date}</p>
            </div>
          </div>
    `;
    save.addEventListener('click', () => {
      const notesCard = document.createElement('div');
      notesCard.id = 'notes_card';
      notesCard.innerHTML = notesCardValue;
      document.body.appendChild(notesCard);
      });
});
    </End of: public/user/features/writing/notes/new/notes.js>

              - style.css
    <Contents of: public/user/features/writing/notes/new/style.css>
html, body {
    font-family: "Roboto", sans-serif;
    background-color: #f7f7f7;
    height:100%;
}
#main_card {
    margin:70px 15px 0 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding:15px;
    border-radius: 10px;
    background-color: white;
    display:flex;
    flex-direction: column;
    gap:15px;
    height:100%;
}
#card_header {
    border:0px solid black;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#card_header span {
    font-weight:450;
}
#right_card_header {
    display: flex;
    align-items: center;
    gap:20px;
}
.fa-thumbtack {
    color:#555555;
    cursor: pointer;
    font-size: 20px;
}
.fa-arrow-left {
    font-size: 20px;
    font-weight: 100;
    cursor: pointer;
}
#right_card_header button {
    background-color: #2e7d32;
    border:none;
    color:white;
    padding:8px 20px;
    border-radius:8px;
    font-size: 15px;
    font-weight: 400;
    font-family: "Roboto", sans-serif;
    cursor: pointer;
}
#main_card input {
    font-size:28px;
    font-weight: 700;
    color: #282B37;
    border:none;
    margin:0 10px;
    margin:20px 10px 0 10px;
}
#main_card input:focus {
    outline: none;
}
#main_card textarea {
    font-family: "Roboto", sans-serif;
    font-size: 15px;
    border:none;
    resize: vertical;
    margin:0 10px;
}
#main_card textarea:focus {
    outline: none;
}
    </End of: public/user/features/writing/notes/new/style.css>

            - style.css
    <Contents of: public/user/features/writing/notes/style.css>
body {
  font-family: "Roboto", Sans-Serif;
  background-color: #F7F7F7;
}
#workspace_toolbar {
  margin-top:60px;
  display:flex;
  flex-direction: column;
  border:0px solid black;
  background-color: white;
  gap:20px;
  padding:20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
#search {
  position: relative;
  display: flex;
}
#search input {
  width: 100%;
  height: 40px;
  border-radius: 12px;
  outline: 1px solid lightgray;
  border: 0px solid #555555;
  background-color: #f8f8f8;
  padding: 0 40px 0 20px;
  box-sizing: border-box;
}
#search input:focus {
  background-color: white;
  outline: 2px solid #2e7d32;
}
#search i {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: #555;
  pointer-events: none;
  font-size: 16px;
}
#filter_bar {
  display:flex;
  flex-direction:row;
  border:0px solid black;
  margin:0 0px;
  gap:15px;
}
.filter {
  border:0px solid  blue;
  padding: 10px 20px;
  border-radius: 18px;
  background-color: #F7F7F7;
  color:#374151;
  display:flex;
  align-items: center;
}
.filter span {
  display:flex;
  gap:8px;
  font-weight:500;
  font-size: 14PX;
  align-items: center;
}
#tes {
  margin:20px;
  width:100px;
}
#notes_card {
  display:flex;
  flex-direction: column;
  border:0px solid black;
  padding: 20px 25px;
  margin:20px 15px;
  gap:15px;
  background: white;
  border-radius:12px;
}
#notes_top {
  display:flex;
  flex-direction: row;
  justify-content: space-between;
  border:0px solid black;
  align-items: center;
}
#notes_top span {
  font-weight:600;
}
#notes_icon {
  color:#1976D2;
  background: #E3F2FD;
  padding:5px;
  border-radius:50%;
  width:16px;
  aspect-ratio: 1 / 1;
  display:flex;
  align-items: center;
  justify-content: center;
  font-size:12px;
}
#notes_middle {
  display:flex;
  flex-direction: row;
}
#notes_middle p {
  margin:0;
  color:#555555;
  font-size:15px;
}
#notes_bottom {
  display:flex;
  flex-direction: row;
  justify-content: space-between;
}
#notes_bottom p {
  margin:0;
  color:#555555;
  font-size:15px;
}
#right_notes_bottom {
  font-size:12px;
  display:flex;
  gap:5px;
  color:#555555;
  align-items: center;
}
#right_notes_bottom p {
  font-size:12px;
}
    </End of: public/user/features/writing/notes/style.css>

      [public/user/pricing]
        - hover.js
    <Contents of: public/user/pricing/hover.js>
document.addEventListener('DOMContentLoaded', function() {
  const allCard = document.querySelectorAll('.pricing_card');
  const allButton = document.querySelectorAll('.pricing_card button');
  
  allCard.forEach(function(click) {
    const button = click.querySelector('button');
    click.addEventListener('click', function() {
      allCard.forEach(function(cardReset) {
        cardReset.style.border = '';
      });
      allButton.forEach(function(buttonReset) {
        buttonReset.style.backgroundColor = '#f0f0f0'
        buttonReset.style.color = 'black'
      });
      if (click.style.border === '') {
        click.style.border = '2px solid green';
        button.style.backgroundColor = 'green';
        button.style.color = 'white';
      } else {
        click.style.border = '#d9d9d9';
        button.style.backgroundColor = '#f0f0f0';
        button.style.color = 'black';
      }
    });
  });
});
    </End of: public/user/pricing/hover.js>

        - index.bak
    [Binary file â€” contents skipped]

        - index.html
    <Contents of: public/user/pricing/index.html>
<!DOCTYPE html>
<html>
  <head>
    <title>Produse Pricing</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css"href="../../navbar/style.css">
    <link rel="stylesheet" type="text/css" href="style.css">
          <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
  </head>
  <body>
    <div id="main_content">
      <div id="main_navbar"></div>
    <div id="jawa">
      <h1>ProCoin Pricing</h1>
      <p>Choose the appropriate package or determine a custom quantity according to your needs</p>
    </div>
    <div class="pricing_card">
      <h5>Starter Pack</h5>
      <div id="coin_num">
        <span>
      <p>100</p>
       <img id="procoin_img" src="../../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$10</h5>
      <p id="price_subtext">$0.10 per Coin</p>
      </div>
      <button type="submit">Purchase</button>
    </div>
    <div class="pricing_card">
      <h5>Basic Pack</h5>
      <div id="coin_num">
        <span>
      <p>250</p>
       <img id="procoin_img" src="../../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$20</h5>
      <p id="price_subtext">$0.08 per Coin</p>
      </div>
      <button type="submit">Purchase</button>
    </div>
    <div class="pricing_card">
      <h5>Pro Pack</h5>
       <div id="coin_num">
        <span>
      <p>500</p>
       <img id="procoin_img" src="../../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$40</h5>
      <p id="price_subtext">$0.08 per Coin</p>
      </div>
      <button type="submit">Purchase</button>
    </div>
    <div class="pricing_card">
      <h5>Ultimate Pack</h5>
      <div id="coin_num">
        <span>
      <p>1000</p>
       <img id="procoin_img" src="../../image/procoin.png">
       </span>
       <p>ProCoin</p>
      </div>
      <div id="coin_num">
        <h5>$80</h5>
      <p id="price_subtext">$0.08 per Coin</p>
      </div>
      <button type="submit">Purchase</button>
    </div>
    <div id="custom_amount">
      <div id="custom_card">
        <div id="custom_heading">
        <h5>Custom Amount</h5>
        <p>Decide for yourself how many coins you want to buy</p>
        </div>
        <div id="custom_main">
        <input type="number" min="1" id="custom_input" placeholder="Number of ProCoins">
        <button type="submit"><i class="fa-solid fa-cart-shopping"></i></button>
        </div>
        <div id="custom_price">
          <span>Total Price: $0.00</span>
        </div>
        <div id="custom_note">
          <p><span>Note:</span> Custom purchases have a higher rate ($0.10 per coin) than savings packages. Choose a package to get the best price.</p>
        </div>
      </div>
      </div>
      </div>
      <script src="../../navbar/navbarFunction.js"></script>
        <script src="../../navbar/style.js"></script>
<script src="../../navbar/profile.js"></script>
<script src="price.js"></script>
<script src="hover.js"></script>
</div>
  </body>
</html>

    </End of: public/user/pricing/index.html>

        - price.js
    <Contents of: public/user/pricing/price.js>
document.addEventListener("DOMContentLoaded", function() {
    const amount = document.querySelector("#custom_main input");
    const price = document.querySelector("#custom_price");

    amount.addEventListener("keydown", function(event) {
        if (["e", "E", "+", "-"].includes(event.key)) {
            event.preventDefault();
        }
    });

    amount.addEventListener("input", function(){
        const coin = parseInt(amount.value);
        if (isNaN(coin)) {
            price.textContent = "Total Price: $0.00";
        }
        else if (coin < 0) {
            price.textContent = "Invalid Amount";
        }
         else {
        price.textContent = "Total Price: $" + (coin * 0.10).toFixed(1);
    }
    });

});
    </End of: public/user/pricing/price.js>

        - style.css
    <Contents of: public/user/pricing/style.css>
body {
  font-family: "Roboto", Sans-Serif;
  padding:0;
  margin:0;
  margin-bottom:10px;
  background-color: #F5F6F8;
}
#main_content {
  z-index:1;
}
#jawa {
  display:block;
  align-items: center;
  justify-content: center;
  border:0px solid black;
  text-align: center;
  margin: 70px 40px 50px 40px;
}
#jawa h1 {
  margin:0;
}
#jawa p {
  color: #555555;
  line-height: 1.6;
}
.pricing_card {
  display: flex;
  flex-direction: column;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding:25px;
  margin: 0 30px 40px 30px;
  border-radius: 10px;
  text-align:center;
  gap:15px;
  background-color: white;
  border:2px solid #d9d9d9;
}
.pricing_card h5 {
  font-size: 22px;
  margin: 0;
}
#coin_num span {
  display:flex;
  gap:5px;
}
#coin_num span p {
  margin:0;
  font-size: 28px;
  border:0px solid black;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight:600;
  color:#1976D2;
  gap:50px;
}
#coin_num h5 {
  font-size: 26px;
  border:0px solid black;
  display: flex;
  align-items: center;
  justify-content: center;
  gap:0px;
}
.pricing_card p {
  margin: 0;
  font-size: 16px;
  color:#555555;
  margin-top:5px;
}
.pricing_card #price_subtext {
  color:#555555;
}
.pricing_card button {
  padding:12px;
  border:none;
  background-color: #f0f0f0;
  border-radius: 10px;
  font-weight: 450;
  font-size:18px;
  color:black;
}
.pricing_card img {
  width:30px;
  margin:0;
}
.pricing_card span {
  display:flex;
  align-items: center;
  justify-content: center;
  gap:3px;
}
.pricing_card p {
  display:flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  margin:0;
  padding:0;
  gap:5px;
}
#procoin_img {
  border: 0px solid black;
 width:25px;
}

#custom_amount {
  display: flex;
  justify-content: center;
  margin-bottom: 0px;
}
#custom_card {
  display: flex;
  flex-direction: column;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding:35px 30px;
  margin: 0 30px 40px 30px;
  border-radius: 10px;
  text-align:center;
  gap:15px;
  background-color: white;
}
#custom_card h5 {
  font-size: 22px;
  margin: 0;
}
#custom_card p {
  margin: 12px 50px 0 50px;
  font-size: 16px;
  color:#555555;
  margin-bottom:20px;
  line-height:1.4;
}
#custom_input {
  padding:10px;
  font-size:16px;
  border:1px solid #CCCCCC;
  text-align: center;
  width:60% ;
  outline:none;
} 
#custom_main {
  display:flex;
  justify-content: center;
}
#custom_main button {
  padding:12px;
  border:none;
  font-weight: 450;
  font-size:18px;
  color:white;
  background-color: #1976D2;
}
#custom_price {
  font-weight:bold;
}
#custom_note {
  margin-top: 15px;
  border:1px solid yellow;
  border-radius:8px;
  padding:0;
  padding:5px 10px;
  background-color: #fefce8;
}
#custom_note p {
  margin:10px;
  font-size:14px;
  text-align: left;
  color:brown;
}
#custom_note p span {
  font-weight:600;
}
#logout_confirmation {
  position: fixed;
  top:70px;
  display:none;
  z-index: 9999 !important;
  background: transparent;
  background-color: rgba(0,0,0,0.3);
}
.pricing_card:hover {
  border:2px solid #bfbfbf;
  cursor: pointer;
}
.pricing_card button:hover {
  background-color: #e5e7eb;
  cursor: pointer;
}
    </End of: public/user/pricing/style.css>

      [public/user/profile]
        - index.html
    <Contents of: public/user/profile/index.html>
<!DOCTYPE html>
<html lang="id">
  <head>
    <title>Profil Pengguna - Produse</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>

    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="../../navbar/style.css">
  </head>
  <body class="produse-body">
    <div id="main_navbar"></div>

    <main class="content-wrapper profile-page">
      <section class="profile-container">
        
        <header class="profile-page-header">
          <div class="profile-page-label">Akun</div>
          <h1 class="profile-page-title">Profil Pengguna</h1>
          <p class="profile-page-subtitle">
            Kelola identitas dan informasi akun Produse Anda.
          </p>
        </header>

        <article class="profile-card">
          <div class="profile-card-main">
            
            <div class="profile-identity">
              <div class="profile-avatar-wrapper">
                <div class="profile-avatar">
                  <span id="profile-initial" class="profile-avatar-initial">U</span>
                </div>
              </div>

              <div class="profile-text">
                <h2 id="profile-fullname" class="profile-fullname">Memuat...</h2>
                <p id="profile-username" class="profile-username">@...</p>
              </div>
            </div>

            <div class="profile-actions">
              <button class="btn btn-primary profile-edit-btn">
                <i class="fa-solid fa-pen-to-square"></i>
                <span>Edit Profil</span>
              </button>

              <div class="profile-edit-dropdown"> 
                  <button class="btn btn-secondary btn-upload-photo">
                    <i class="fa-solid fa-camera"></i>
                    <span>Unggah Foto</span>
                  </button>
                  <button class="btn btn-danger btn-delete-photo">
                    <i class="fa-solid fa-trash-can"></i>
                    <span>Hapus Foto</span>
                  </button>
              </div>
            </div>
          </div>

          <hr class="profile-divider">

          <div class="profile-details-grid">
            <div class="detail-item">
              <div class="detail-label-wrapper">
                <div class="detail-icon">
                  <i class="fa-solid fa-envelope"></i>
                </div>
                <div class="detail-text">
                  <span class="detail-label">Email</span>
                </div>
              </div>
              <span id="profile-email" class="detail-value">...</span>
            </div>
            
            <div class="detail-item">
              <div class="detail-label-wrapper">
                <div class="detail-icon">
                  <i class="fa-solid fa-phone"></i>
                </div>
                <div class="detail-text">
                  <span class="detail-label">Nomor Telepon</span>
                </div>
              </div>
              <span id="profile-phone" class="detail-value">...</span>
            </div>

            <div class="detail-item">
              <div class="detail-label-wrapper">
                <div class="detail-icon">
                  <i class="fa-solid fa-calendar-days"></i>
                </div>
                <div class="detail-text">
                  <span class="detail-label">Bergabung</span>
                </div>
              </div>
              <span id="profile-joined" class="detail-value">...</span>
            </div>

            <div class="detail-item">
              <div class="detail-label-wrapper">
                <div class="detail-icon">
                  <i class="fa-solid fa-globe"></i>
                </div>
                <div class="detail-text">
                  <span class="detail-label">Zona Waktu</span>
                </div>
              </div>
              <span id="profile-timezone" class="detail-value">...</span>
            </div>
          </div>
        </article>
      </section>
    </main>

    <script src="../../navbar/navbarFunction.js"></script>
    <script src="../../navbar/style.js"></script>
    <script src="../../navbar/profile.js"></script>
    <script src="profile-edit.js"></script>
    <script src="profile-data.js"></script>
  </body>
</html>

    </End of: public/user/profile/index.html>

        - profile-data.js
    <Contents of: public/user/profile/profile-data.js>
document.addEventListener('DOMContentLoaded', async () => {
    // Referensi elemen HTML
    const elFullname = document.getElementById('profile-fullname');
    const elUsername = document.getElementById('profile-username');
    const elInitial  = document.getElementById('profile-initial');
    const elEmail    = document.getElementById('profile-email');
    const elPhone    = document.getElementById('profile-phone');
    const elJoined   = document.getElementById('profile-joined');
    const elTimezone = document.getElementById('profile-timezone');

    // 1. Deteksi Timezone Browser (Real-time user sekarang)
    try {
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
        elTimezone.textContent = tz || 'UTC';
    } catch (e) {
        elTimezone.textContent = 'Tidak terdeteksi';
    }

    // 2. Ambil Data User dari Database via API
    try {
        const res = await fetch('/api/auth/me');
        if (!res.ok) {
            // Jika gagal (misal sesi habis), redirect ke login
            window.location.href = '../../login/';
            return;
        }

        const user = await res.json();

        // 3. Isi Data ke HTML
        
        // Nama & Username
        elFullname.textContent = user.name;
        elUsername.textContent = '@' + (user.username || 'user');
        
        // Avatar Inisial (Huruf pertama dari nama)
        if (user.name) {
            elInitial.textContent = user.name.charAt(0).toUpperCase();
        }

        // Email
        elEmail.textContent = user.email;

        // Tanggal Bergabung (Format: 3 November 2025)
        if (user.created_at) {
            const date = new Date(user.created_at);
            // Opsi format tanggal Indonesia
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            elJoined.textContent = date.toLocaleDateString('id-ID', options);
        } else {
            elJoined.textContent = '-';
        }

        // Logika Nomor Telepon
        if (user.phone && user.phone.trim() !== "") {
            // Jika ada nomor di database
            elPhone.textContent = user.phone;
            elPhone.style.color = 'var(--text-main)'; // Warna normal
        } else {
            // Jika kosong, tampilkan Tombol Tambah
            elPhone.innerHTML = ''; // Kosongkan dulu
            
            const addBtn = document.createElement('button');
            addBtn.textContent = '+ Tambahkan Nomor';
            
            // Styling tombol sederhana agar rapi
            addBtn.style.padding = '6px 12px';
            addBtn.style.fontSize = '12px';
            addBtn.style.fontWeight = '500';
            addBtn.style.color = '#2e7d32'; // Warna hijau aksen
            addBtn.style.border = '1px solid #2e7d32';
            addBtn.style.borderRadius = '8px';
            addBtn.style.backgroundColor = 'transparent';
            addBtn.style.cursor = 'pointer';

            // Hover effect sederhana via JS
            addBtn.onmouseover = () => { addBtn.style.backgroundColor = '#e8f5e9'; };
            addBtn.onmouseout  = () => { addBtn.style.backgroundColor = 'transparent'; };

            // Aksi tombol (Nanti diarahkan ke halaman khusus)
            addBtn.onclick = () => {
                alert('Fitur tambah nomor akan segera hadir di halaman pengaturan!');
                // window.location.href = '../settings/phone'; // Contoh nanti
            };

            elPhone.appendChild(addBtn);
        }

    } catch (err) {
        console.error('Gagal memuat profil:', err);
        elFullname.textContent = 'Error memuat data';
    }
});

    </End of: public/user/profile/profile-data.js>

        - profile-edit.js
    <Contents of: public/user/profile/profile-edit.js>
document.addEventListener('DOMContentLoaded', () => {
  
const editButton = document.querySelector('.btn.btn-primary.profile-edit-btn');
    const dropdown = document.querySelector('.profile-edit-dropdown');
    const uploadButton = document.querySelector('.btn.btn-secondary.btn-upload-photo');
    const deleteButton = document.querySelector('.btn.btn-danger.btn-delete-photo');
console.log(editButton + dropdown + uploadButton + deleteButton);
    console.log('jawa');
    
    if (editButton && dropdown) {
        // Menampilkan/Menyembunyikan dropdown saat Edit Profil diklik
        editButton.addEventListener('click', function(event) {
            event.stopPropagation();
            dropdown.classList.toggle('show'); 
        });

        // Menutup dropdown saat mengklik di luar area
        window.addEventListener('click', function(event) {
            if (!dropdown.contains(event.target) && !editButton.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });
    }

    // 4. LOGIKA TOMBOL AKSI DI DALAM DROPDOWN (Unggah & Hapus Foto)
    // Di sini Anda dapat menambahkan kode untuk menampilkan modal/popup Unggah/Hapus yang sesungguhnya
    if (uploadButton) {
        uploadButton.addEventListener('click', function() {
            console.log('Aksi: Unggah Foto');
            alert('Popup Unggah Foto akan ditampilkan.'); // Ganti dengan logika modal Anda
            if (dropdown) dropdown.classList.remove('show');
        });
    }

    if (deleteButton) {
        deleteButton.addEventListener('click', function() {
            console.log('Aksi: Hapus Foto');
            alert('Popup Konfirmasi Hapus Foto akan ditampilkan.'); // Ganti dengan logika modal Anda
            if (dropdown) dropdown.classList.remove('show');
        });
    }
    
})
    </End of: public/user/profile/profile-edit.js>

        - style.css
    <Contents of: public/user/profile/style.css>
:root {
  --bg-page: #f9f9f9;
  --bg-card: #ffffff;
  --text-main: #212121;
  --text-muted: #555555;
  --border-subtle: #e0e0e0;

  --accent-green: #2e7d32;
  --accent-green-soft: #e8f5e9;
  --accent-blue: #1976d2;
  --accent-blue-soft: #e3f2fd;

  --radius-lg: 12px;
  --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.08);
}

body.produse-body {
  margin: 0;
  padding: 0;
  background-color: var(--bg-page);
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  color: var(--text-main);
  -webkit-font-smoothing: antialiased;
}

.content-wrapper.profile-page {
  max-width: 960px;
  margin: 0 auto;
  padding: 88px 16px 32px;
  box-sizing: border-box;
}

.profile-page-header {
  margin-bottom: 24px;
}

.profile-page-label {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  background-color: var(--accent-blue-soft);
  color: var(--accent-blue);
}

.profile-page-title {
  margin: 10px 0 4px;
  font-size: 22px;
  font-weight: 600;
  letter-spacing: -0.02em;
}

.profile-page-subtitle {
  margin: 0;
  font-size: 14px;
  color: var(--text-muted);
}

.profile-card {
  background-color: var(--bg-card);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-soft);
  padding: 20px 18px;
  box-sizing: border-box;
  border: 1px solid rgba(15, 23, 42, 0.03);
}

.profile-card-main {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.profile-identity {
  display: flex;
  align-items: center;
  gap: 14px;
}

.profile-avatar-wrapper {
  flex-shrink: 0;
  position: relative; 
}

.profile-avatar {
  width: 64px;
  height: 64px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 20%, #ffffff, var(--accent-green-soft));
  border: 1px solid rgba(46, 125, 50, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden; 
}

.profile-avatar-initial {
  font-size: 28px;
  font-weight: 600;
  color: var(--accent-green);
}

.profile-avatar-actions {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

.profile-avatar:hover .profile-avatar-actions {
    opacity: 1;
    pointer-events: all;
}

.btn-icon {
    width: 30px;
    height: 30px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 999px;
    font-size: 13px;
    color: #fff;
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.18s ease;
}

.btn-icon:hover {
    background-color: rgba(255, 255, 255, 0.35);
    transform: none; 
    box-shadow: none;
}

.btn-delete-photo {
    background-color: rgba(220, 38, 38, 0.7); 
}

.btn-delete-photo:hover {
    background-color: rgba(220, 38, 38, 0.9);
}

.profile-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.profile-fullname {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

.profile-username {
  margin: 0;
  font-size: 13px;
  color: var(--text-muted);
}

.profile-actions {
  position: relative; 
  display: flex; 
  justify-content: flex-start;
}

.profile-edit-btn {
  position: relative;
  z-index: 20; 
}

.btn {
  border: none;
  outline: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  font-weight: 500;
  border-radius: 999px;
  padding: 9px 16px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: background-color 0.18s ease, box-shadow 0.18s ease,
    transform 0.08s ease, border-color 0.18s ease, color 0.18s ease;
  background: transparent;
}

.btn-primary {
  background-color: var(--accent-green);
  color: #ffffff;
  box-shadow: 0 10px 30px rgba(46, 125, 50, 0.35);
}

.btn-primary:hover {
  background-color: #256629;
  box-shadow: 0 14px 34px rgba(46, 125, 50, 0.45);
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 8px 18px rgba(46, 125, 50, 0.35);
}

.profile-divider {
  border: none;
  border-top: 1px solid var(--border-subtle);
  margin: 16px 0 18px;
}

.profile-details-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
}

.detail-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px 10px;
  border-radius: 10px;
  background-color: #fafafa;
  border: 1px solid rgba(15, 23, 42, 0.04);
}

.detail-label-wrapper {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

.detail-icon {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  background-color: var(--accent-blue-soft);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: var(--accent-blue);
  font-size: 13px;
}

.detail-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.detail-label {
  font-size: 13px;
  font-weight: 500;
}

.detail-description {
  font-size: 11px;
  color: var(--text-muted);
}

.detail-value {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-main);
  margin-left: 38px;
  word-break: break-word;
}

.profile-edit-dropdown {
  position: absolute;
  top: 100%; 
  left: 0; 
  
  background-color: var(--bg-card);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-soft);
  padding: 8px;
  margin-top: 8px; 
  min-width: 180px; 
  z-index: 10;
  border: 1px solid var(--border-subtle);

  display: flex;
  flex-direction: column;
  gap: 4px;

  opacity: 0;
  visibility: hidden;
  transform: translateY(-5px);
  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s;
}

.profile-edit-dropdown.show {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.profile-edit-dropdown .btn {
  width: 100%;
  justify-content: flex-start;
  background-color: transparent;
  color: var(--text-main);
  box-shadow: none;
  transition: background-color 0.1s ease, color 0.1s ease;
  padding: 8px 10px;
  border-radius: 8px;
}

.profile-edit-dropdown .btn:hover {
  background-color: var(--bg-page); 
  transform: none;
  box-shadow: none;
}

.profile-edit-dropdown .btn-delete-photo {
  color: #dc2626; 
}

.profile-edit-dropdown .btn-delete-photo:hover {
    background-color: #fef2f2; 
}

@media (min-width: 640px) {
  .profile-card {
    padding: 22px 22px 20px;
  }

  .profile-details-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (min-width: 768px) {
  .profile-card-main {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }

  .profile-actions {
    justify-content: flex-end;
  }
  
  .profile-edit-dropdown {
      left: unset;
      right: 0;
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    scroll-behavior: auto !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

    </End of: public/user/profile/style.css>


=== END OF DUMP ===
